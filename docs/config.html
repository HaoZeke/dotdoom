<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2025-07-27 Sun 02:08 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Literate doom-emacs config</title>
<meta name="author" content="Rohit Goswami (HaoZeke) &lt;rohit.goswami@aol.com&gt;" />
<meta name="generator" content="Org Mode" />
<style type="text/css">
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<link rel="stylesheet" type="text/css" href="https://thomasf.github.io/solarized-css/solarized-dark.min.css" />
<script> window.goatcounter = { path: '/dotdoomhome', }; </script>
<script data-goatcounter="https://rgoswami.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
<script src="https://thomasf.github.io/solarized-css/org-info.min.js">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
// @license-end
</script>

<script>
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
org_html_manager.set("TOC_DEPTH", "3");
org_html_manager.set("LINK_HOME", "https://dotdoom.rgoswami.me");
org_html_manager.set("LINK_UP", "");
org_html_manager.set("LOCAL_TOC", "1");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "underline");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "1");
org_html_manager.set("VIEW", "1");
org_html_manager.setup();  // activate after the parameters are set
// @license-end
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href=""> UP </a>
 |
 <a accesskey="H" href="https://dotdoom.rgoswami.me"> HOME </a>
</div><div id="content" class="content">
<h1 class="title">Literate doom-emacs config</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org9364c84">0.1. About</a>
<ul>
<li><a href="#orgaf9f78b">0.1.1. About that TOC..</a></li>
</ul>
</li>
<li><a href="#org7b0eb4a">0.2. Personal Information</a></li>
</ul>
</li>
<li><a href="#org6c93381">1. Doom Emacs Stuff</a>
<ul>
<li><a href="#org5024d10">1.1. Visual tweaks</a>
<ul>
<li><a href="#orgcdbf5c2">1.1.1. Font Face</a></li>
<li><a href="#org8b0dcf0">1.1.2. Unicode Fonts</a></li>
<li><a href="#orga5fcb64">1.1.3. Helm and Childframes</a></li>
<li><a href="#org47d8920">1.1.4. Saner Dashboard</a></li>
</ul>
</li>
<li><a href="#org9601650">1.2. Bugfixes</a></li>
<li><a href="#org681dc45">1.3. Helm changes</a></li>
<li><a href="#orgf60f41f">1.4. Disable eager functions</a>
<ul>
<li><a href="#orgb13cf13">1.4.1. Kill spellcheck</a></li>
<li><a href="#org2e536d3">1.4.2. Kill over-eager literate after-save-hook</a></li>
<li><a href="#org76ccad3">1.4.3. Kill Orgmode template</a></li>
</ul>
</li>
<li><a href="#org3a1b8ad">1.5. Variables</a>
<ul>
<li><a href="#org976fd81">1.5.1. Theme</a></li>
<li><a href="#orgddde0d4">1.5.2. Do not Format on Save</a></li>
</ul>
</li>
<li><a href="#org5267a33">1.6. Keybindings</a>
<ul>
<li><a href="#orgd4e71c8">1.6.1. <span class="done DONE">DONE</span> General</a></li>
<li><a href="#org4a75c6d">1.6.2. Evil Setup and Error Handling</a></li>
<li><a href="#org0c9d160">1.6.3. Spacemacs Equivalency</a></li>
<li><a href="#org488151b">1.6.4. Global Maps</a></li>
<li><a href="#org857d709">1.6.5. Markdown Improvements</a></li>
<li><a href="#org610c729">1.6.6. Org Noter</a></li>
<li><a href="#orgee5847c">1.6.7. Org Mode additions</a></li>
<li><a href="#org9a4c53b">1.6.8. Anki Editor</a></li>
<li><a href="#org2e72647">1.6.9. CC Mode</a></li>
<li><a href="#org54f642e">1.6.10. Evil Colemak</a></li>
<li><a href="#orgddd3047">1.6.11. <span class="done DONE">DONE</span> Neotree &#x2013;&gt; Treemacs</a></li>
<li><a href="#org280ac97">1.6.12. TeX Mode</a></li>
</ul>
</li>
<li><a href="#org665ea1f">1.7. Safe Evals and Variables</a>
<ul>
<li><a href="#org1b7eefc">1.7.1. MacOS Variables</a></li>
<li><a href="#orgfc32b5d">1.7.2. Private Variables</a></li>
<li><a href="#org104d414">1.7.3. Safe Variables</a></li>
<li><a href="#org710c60a">1.7.4. Asynchronous Exports</a></li>
<li><a href="#org313ce64">1.7.5. TRAMP Settings</a></li>
<li><a href="#org30292f8">1.7.6. Language Servers</a></li>
</ul>
</li>
<li><a href="#org4b7e42f">1.8. Package Settings</a>
<ul>
<li><a href="#org5bed365">1.8.1. Word wrap</a></li>
<li><a href="#org1c12fb4">1.8.2. Spellings</a></li>
<li><a href="#org0639762">1.8.3. Magit Aids</a></li>
<li><a href="#org6d52db9">1.8.4. PDF Tools</a></li>
</ul>
</li>
<li><a href="#org05c654d">1.9. Anki Editor</a></li>
<li><a href="#orgd8967ab">1.10. Org Additions</a>
<ul>
<li><a href="#org2e08834">1.10.1. todo Modifications</a></li>
<li><a href="#org04669c3">1.10.2. Ignore Support</a></li>
<li><a href="#orgc047abe">1.10.3. File Handling</a></li>
<li><a href="#org65c06fe">1.10.4. Ob-Mermaid</a></li>
<li><a href="#orga6c208d">1.10.5. <span class="done KILL">KILL</span> Ob-Julia</a></li>
<li><a href="#orge3fda28">1.10.6. Org Download</a></li>
<li><a href="#org8994607">1.10.7. Org Babel</a></li>
<li><a href="#org958e90d">1.10.8. Async Org Babel</a></li>
<li><a href="#org370612f">1.10.9. Org Config</a></li>
<li><a href="#org07d9757">1.10.10. Org Latex Subfigure</a></li>
<li><a href="#org18ff7c0">1.10.11. Org Rifle</a></li>
<li><a href="#org7106926">1.10.12. Org Mind Map</a></li>
<li><a href="#orgffc441c">1.10.13. Org Gantt</a></li>
<li><a href="#org419c411">1.10.14. Org Drill</a></li>
<li><a href="#org66f7102">1.10.15. Org Re-Reveal Additions</a></li>
<li><a href="#org0c29d43">1.10.16. Org GCal</a></li>
<li><a href="#org4cbaf18">1.10.17. Hugo Settings</a></li>
<li><a href="#org951f351">1.10.18. Citeproc</a></li>
<li><a href="#orged7013a">1.10.19. CalcTeX</a></li>
</ul>
</li>
<li><a href="#orge955a77">1.11. Syntax Highlighting</a>
<ul>
<li><a href="#orgbb45d98">1.11.1. <span class="todo TODO">TODO</span> Misc Highlighting</a></li>
<li><a href="#org40aceac">1.11.2. CPP Additions</a></li>
<li><a href="#org4a142f9">1.11.3. Fortran</a></li>
<li><a href="#org3b5a7ad">1.11.4. Quarto</a></li>
<li><a href="#orgf796d32">1.11.5. Meson</a></li>
<li><a href="#org7690c17">1.11.6. <code>xonsh</code> Mode</a></li>
<li><a href="#orgc5eb3e1">1.11.7. PKGBUILD Mode</a></li>
<li><a href="#orgd424930">1.11.8. LAMMPS Mode</a></li>
<li><a href="#orgb31afb3">1.11.9. Pug Mode</a></li>
<li><a href="#org695311b">1.11.10. Conf Mode Files</a></li>
<li><a href="#org34a2507">1.11.11. JVM Languages</a></li>
<li><a href="#org3e99107">1.11.12. Systemd</a></li>
<li><a href="#org1744e22">1.11.13. Dart Mode</a></li>
<li><a href="#org2d84b0b">1.11.14. SaltStack</a></li>
<li><a href="#orgdd20523">1.11.15. Mathematica</a></li>
<li><a href="#org69b254e">1.11.16. Snakemake</a></li>
<li><a href="#org99c4b1a">1.11.17. CapnProto</a></li>
<li><a href="#orgfd06649">1.11.18. Nushell</a></li>
<li><a href="#orgd7e9961">1.11.19. Nickel</a></li>
<li><a href="#org661bdc8">1.11.20. Meson</a></li>
<li><a href="#org7445355">1.11.21. Astro</a></li>
</ul>
</li>
<li><a href="#org3a7fce2">1.12. Aesthetics</a>
<ul>
<li><a href="#org9e5d378">1.12.1. Wakatime</a></li>
</ul>
</li>
<li><a href="#orgaf9bbfa">1.13. Dockerfile Mode</a></li>
<li><a href="#org668d982">1.14. Functions</a>
<ul>
<li><a href="#orge362658">1.14.1. Org-Export HTML with useful IDs</a></li>
<li><a href="#org1f85e33">1.14.2. Org-mode export pdf when saved</a></li>
<li><a href="#org5e8d90b">1.14.3. Org-mode export koma-letter</a></li>
<li><a href="#org0834fff">1.14.4. Org-mode export TeX</a></li>
<li><a href="#org0ca5da5">1.14.5. Org-mode clear results</a></li>
<li><a href="#org94d2e14">1.14.6. <span class="todo TODO">TODO</span> Caveats</a></li>
<li><a href="#org585bffc">1.14.7. Helper function</a></li>
<li><a href="#orgcacd587">1.14.8. Async Command without Buffers</a></li>
<li><a href="#org846ba65">1.14.9. Better Rust Formatting</a></li>
<li><a href="#orgb9c79fa">1.14.10. Smarter Clang Formatting</a></li>
<li><a href="#org63d7bdc">1.14.11. Org-mode export to Markdown</a></li>
<li><a href="#org7ec5fcf">1.14.12. <span class="todo TODO">TODO</span> Smartparens Wrapping</a></li>
<li><a href="#orgacd88b6">1.14.13. Sort words</a></li>
<li><a href="#orgb388b50">1.14.14. <code>doas</code> helpers</a></li>
</ul>
</li>
<li><a href="#org4850132">1.15. Chat Clients</a>
<ul>
<li><a href="#org3a80a58">1.15.1. Matrix</a></li>
</ul>
</li>
<li><a href="#org08d3c6e">1.16. Projects</a>
<ul>
<li><a href="#org9b4b4f4">1.16.1. dotDoom</a></li>
<li><a href="#org2a5a207">1.16.2. Firestarter</a></li>
</ul>
</li>
<li><a href="#org0cebc70">1.17. Hooks</a>
<ul>
<li><a href="#org4cf40df">1.17.1. <span class="todo TODO">TODO</span> Caveats</a></li>
<li><a href="#orgfaaa9e4">1.17.2. Out of Focus Hook</a></li>
<li><a href="#org815bf53">1.17.3. Before Save Hooks</a></li>
<li><a href="#org8e0d832">1.17.4. Disable Auto RDM</a></li>
</ul>
</li>
<li><a href="#org80b262c">1.18. Troubleshooting</a></li>
</ul>
</li>
<li><a href="#orgcb6416b">2. Sphinx and RsT</a></li>
<li><a href="#org235be6d">3. R Helpers</a>
<ul>
<li>
<ul>
<li><a href="#orgc813eb0">3.0.1. R Markdown</a></li>
<li><a href="#org8780c06">3.0.2. <span class="done DONE">DONE</span> Rmd to Rorg</a></li>
<li><a href="#orgf038e36">3.0.3. Keybindings</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org6b2e6e0">4. Org LaTeX</a>
<ul>
<li>
<ul>
<li><a href="#orgbd13c19">4.0.1. Async Config</a></li>
<li><a href="#org1fe0569">4.0.2. Path Additions</a></li>
<li><a href="#orgdce947a">4.0.3. Config</a></li>
</ul>
</li>
<li><a href="#org81bf1e7">4.1. Shared Preferences</a>
<ul>
<li><a href="#orga45a676">4.1.1. Compiler</a></li>
<li><a href="#orgccaf7dc">4.1.2. Packages</a></li>
</ul>
</li>
<li><a href="#org4b6459b">4.2. Export Templates</a>
<ul>
<li><a href="#org6cf9c79">4.2.1. KOMA Article</a></li>
<li><a href="#orge318d23">4.2.2. KOMA Report</a></li>
<li><a href="#orgc389542">4.2.3. Tufte Book</a></li>
</ul>
</li>
<li><a href="#org35f332c">4.3. LaTeX Preview for Org mode</a></li>
<li><a href="#orgc89f0b3">4.4. Math support</a></li>
<li><a href="#org4808b72">4.5. Prettier TeX buffers</a></li>
<li><a href="#org5b9885e">4.6. Babel Tabs</a></li>
<li><a href="#orgced6a73">4.7. Pandoc Babel</a>
<ul>
<li><a href="#org93635b2">4.7.1. Restructured Text</a></li>
<li><a href="#org765e13e">4.7.2. Markdown HTML</a></li>
</ul>
</li>
<li><a href="#org2ef8526">4.8. Completion</a>
<ul>
<li><a href="#orgb00158b">4.8.1. Github Copilot</a></li>
</ul>
</li>
<li><a href="#org1b3d53f">4.9. Flycheck Additions</a>
<ul>
<li><a href="#orgbe7cde5">4.9.1. MELPA Helpers</a></li>
</ul>
</li>
<li><a href="#org5cc39ad">4.10. Xenops Inspired</a></li>
</ul>
</li>
<li><a href="#orgcbd9ea1">5. Notes</a>
<ul>
<li><a href="#org862ff93">5.1. noteYoda</a>
<ul>
<li><a href="#org2da5c66">5.1.1. Org-Ref</a></li>
<li><a href="#org075c52c">5.1.2. Helm Bibtex</a></li>
<li><a href="#org87d728c">5.1.3. Org-Roam</a></li>
<li><a href="#orgb08e0bc">5.1.4. Org-Noter</a></li>
</ul>
</li>
<li><a href="#orgf1c76fc">5.2. Org Capture</a>
<ul>
<li><a href="#orgdefccab">5.2.1. Buffer Size</a></li>
<li><a href="#org05e6212">5.2.2. Functions</a></li>
<li><a href="#org935c56e">5.2.3. Templates</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org9364c84" class="outline-3">
<h3 id="org9364c84"><span class="section-number-3">0.1.</span> About</h3>
<div class="outline-text-3" id="text-0-1">
<p>
This is a literate config file for <a href="https://github.com/hlissner/doom-emacs">doom-emacs</a> by <code>hlinssner</code>. This is meant to
be used with the <code>develop</code> branch. Much of the basic setup is pulled from the
<a href="https://github.com/gilbertw1/emacs-literate-starter">emacs literate starter</a> by <code>gilbertw1</code>. The <a href="packages.html">companion packages page</a> describes the
basic package setup, while the <code>init.el</code> is described on <a href="index.html">the project homepage</a>.
</p>
</div>
<div id="outline-container-orgaf9f78b" class="outline-4">
<h4 id="orgaf9f78b"><span class="section-number-4">0.1.1.</span> About that TOC..</h4>
<div class="outline-text-4" id="text-0-1-1">
<p>
So as mentioned <a href="https:https://github.com/snosov1/toc-org/issues/35">here</a> there is trouble when <code>org-export</code> tries to create files
while keeping the <code>org-toc</code> tag.
</p>

<p>
It&rsquo;s not really a problem since <code>org-export</code> actually generates a TOC for the
files anyway.
</p>
</div>
</div>
</div>
<div id="outline-container-org7b0eb4a" class="outline-3">
<h3 id="org7b0eb4a"><span class="section-number-3">0.2.</span> Personal Information</h3>
<div class="outline-text-3" id="text-0-2">
<p>
Let&rsquo;s set some variables with basic user information.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">user-full-name</span> <span style="color: #b5bd68;">"Rohit Goswami (HaoZeke)"</span>
      <span style="color: #cc6666;">user-mail-address</span> <span style="color: #b5bd68;">"rohit.goswami@aol.com"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org6c93381" class="outline-2">
<h2 id="org6c93381"><span class="section-number-2">1.</span> Doom Emacs Stuff</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org5024d10" class="outline-3">
<h3 id="org5024d10"><span class="section-number-3">1.1.</span> Visual tweaks</h3>
<div class="outline-text-3" id="text-1-1">
</div>
<div id="outline-container-orgcdbf5c2" class="outline-4">
<h4 id="orgcdbf5c2"><span class="section-number-4">1.1.1.</span> Font Face</h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
Honestly the basic font setting is simply not pretty enough.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">doom-font</span> (<span style="color: #de935f;">font-spec</span> <span style="color: #81a2be;">:family</span> <span style="color: #b5bd68;">"Intel One Mono"</span> <span style="color: #81a2be;">:size</span> 18))
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(setq doom-font (font-spec :family "Attribute Mono" :size 16))</span>
(<span style="color: #b294bb;">unless</span> (<span style="color: #de935f;">find-font</span> <span style="color: #cc6666;">doom-font</span>)
  (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">doom-font</span> (<span style="color: #de935f;">font-spec</span> <span style="color: #81a2be;">:family</span> <span style="color: #b5bd68;">"Cascadia Code PL"</span> <span style="color: #81a2be;">:size</span> 14)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org8b0dcf0" class="outline-4">
<h4 id="org8b0dcf0"><span class="section-number-4">1.1.2.</span> Unicode Fonts</h4>
<div class="outline-text-4" id="text-1-1-2">
<p>
This should be implemented as fallback font once <a href="https://github.com/hlissner/doom-emacs/pull/861">this</a> is merged.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">doom-unicode-font</span> (<span style="color: #de935f;">font-spec</span> <span style="color: #81a2be;">:family</span> <span style="color: #b5bd68;">"Symbola"</span> <span style="color: #81a2be;">:size</span> 20))
</pre>
</div>
</div>
</div>
<div id="outline-container-orga5fcb64" class="outline-4">
<h4 id="orga5fcb64"><span class="section-number-4">1.1.3.</span> Helm and Childframes</h4>
<div class="outline-text-4" id="text-1-1-3">
<p>
I prefer the regular diminished font size, even for the childframes.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Undo the helm text enlargement in childframes</span>
(<span style="color: #b294bb;">setq</span> +helm-posframe-text-scale 0)
</pre>
</div>
</div>
</div>
<div id="outline-container-org47d8920" class="outline-4">
<h4 id="org47d8920"><span class="section-number-4">1.1.4.</span> Saner Dashboard</h4>
<div class="outline-text-4" id="text-1-1-4">
<p>
I have trouble at work with the current DOOM dashboard. This one is from the
<code>doom-emacs</code> lead developer, as found on Discord.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">+doom-dashboard-banner-file</span> (<span style="color: #de935f;">expand-file-name</span> <span style="color: #b5bd68;">"banner.png"</span> <span style="color: #cc6666;">doom-private-dir</span>))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org9601650" class="outline-3">
<h3 id="org9601650"><span class="section-number-3">1.2.</span> Bugfixes</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Most of these should be removed when <code>doom</code> fixes them.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">package-archives</span> <span style="color: #c5c8c6;">'</span>((<span style="color: #b5bd68;">"gnu"</span> . <span style="color: #b5bd68;">"http://elpa.gnu.org/packages/"</span>)
                         (<span style="color: #b5bd68;">"nongnu"</span> . <span style="color: #b5bd68;">"https://elpa.nongnu.org/nongnu/"</span>)
                         (<span style="color: #b5bd68;">"elpa"</span> . <span style="color: #b5bd68;">"https://elpa.gnu.org/packages/"</span>)
                         (<span style="color: #b5bd68;">"melpa"</span> . <span style="color: #b5bd68;">"https://melpa.org/packages/"</span>)
                         ))
</pre>
</div>
</div>
</div>
<div id="outline-container-org681dc45" class="outline-3">
<h3 id="org681dc45"><span class="section-number-3">1.3.</span> Helm changes</h3>
<div class="outline-text-3" id="text-1-3">
<p>
This makes `helm` behave more like `ivy` while working with directories.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">after!</span> helm
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">I want backspace to go up a level, like ivy</span>
  (<span style="color: #b294bb;">add-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">helm-find-files-after-init-hook</span>
    (<span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:map</span> <span style="color: #cc6666;">helm-find-files-map</span>
          <span style="color: #b5bd68;">"&lt;DEL&gt;"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">helm-find-files-up-one-level</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf60f41f" class="outline-3">
<h3 id="orgf60f41f"><span class="section-number-3">1.4.</span> Disable eager functions</h3>
<div class="outline-text-3" id="text-1-4">
</div>
<div id="outline-container-orgb13cf13" class="outline-4">
<h4 id="orgb13cf13"><span class="section-number-4">1.4.1.</span> Kill spellcheck</h4>
<div class="outline-text-4" id="text-1-4-1">
<p>
This is really really really excruciatingly slow for LaTeX mode and maybe even
for other random buffers.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">LaTeX-mode-hook</span> +spellcheck-immediately nil)
</pre>
</div>
</div>
<ol class="org-ol">
<li><a id="orgdb86b00"></a>Snippets<br />
<div class="outline-text-5" id="text-1-4-1-1">
<p>
I am not sure if these need to be initialized.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">AndreaCrotti</span>
(<span style="color: #b294bb;">use-package!</span> yasnippet-snippets
  <span style="color: #81a2be;">:after</span> yasnippet)
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-org2e536d3" class="outline-4">
<h4 id="org2e536d3"><span class="section-number-4">1.4.2.</span> Kill over-eager literate after-save-hook</h4>
<div class="outline-text-4" id="text-1-4-2">
<p>
This is a little too frequent for working with a <code>git</code> repo. Henrik mentioned an
<code>async</code> version of the re-compliation might be in the works, until then however I
will probably only manually trigger the re-compliation.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">after!</span> org
  (<span style="color: #de935f;">remove-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">after-save-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">+literate|recompile-maybe</span>))
</pre>
</div>
</div>
</div>
<div id="outline-container-org76ccad3" class="outline-4">
<h4 id="org76ccad3"><span class="section-number-4">1.4.3.</span> Kill Orgmode template</h4>
<div class="outline-text-4" id="text-1-4-3">
<p>
These conflict with my other templates.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #81a2be;">set-file-template!</span> <span style="color: #b5bd68;">"\\.org$"</span> <span style="color: #81a2be;">:ignore</span> t)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org3a1b8ad" class="outline-3">
<h3 id="org3a1b8ad"><span class="section-number-3">1.5.</span> Variables</h3>
<div class="outline-text-3" id="text-1-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span>
   org_notes (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"HOME"</span>) <span style="color: #b5bd68;">"/Git/Gitlab/Mine/Notes/"</span>)
   zot_bib (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"HOME"</span>) <span style="color: #b5bd68;">"/Insync/r95g10@gmail.com/Google Drive/zotLib.bib"</span>)
   <span style="color: #cc6666;">org-directory</span> org_notes
   deft-directory org_notes
   org-roam-directory org_notes
   )
</pre>
</div>
</div>
<div id="outline-container-org976fd81" class="outline-4">
<h4 id="org976fd81"><span class="section-number-4">1.5.1.</span> Theme</h4>
<div class="outline-text-4" id="text-1-5-1">
<p>
Sometimes I do tire of the defaults.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Also like doom-city-lights, doom-oceanic-next, doom-tomorrow-night, doom-wilmersdorf, leuven, doom-monokai-pro, doom-solarized-dark-high-contrast</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Light ones like solarized</span>
(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">doom-theme</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">doom-tomorrow-night</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgddde0d4" class="outline-4">
<h4 id="orgddde0d4"><span class="section-number-4">1.5.2.</span> Do not Format on Save</h4>
<div class="outline-text-4" id="text-1-5-2">
<p>
Formatting with <code>styler</code> takes forever.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span> +format-on-save-enabled-modes <span style="color: #c5c8c6;">'</span>(not emacs-lisp-mode <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">works well enough without it</span>
                                          sql-mode        <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">sqlformat is broken</span>
                                          tex-mode        <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">latexindent is broken</span>
                                          latex-mode      <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">latexindent is broken</span>
                                          bibtex-mode     <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">is broken</span>
                                          ess-r-mode      <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">styler takes forever</span>
                                          web-mode      <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">dunno who this is for</span>
                                          ))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org5267a33" class="outline-3">
<h3 id="org5267a33"><span class="section-number-3">1.6.</span> Keybindings</h3>
<div class="outline-text-3" id="text-1-6">
<p>
These are eventually going to with <a href="https://github.com/noctuid/general.el">general</a> anyway. So it&rsquo;s better to load that
for now and carry on. Later this block can be prevented from being tangled.
</p>
</div>
<div id="outline-container-orgd4e71c8" class="outline-4">
<h4 id="orgd4e71c8"><span class="section-number-4">1.6.1.</span> <span class="done DONE">DONE</span> General</h4>
<div class="outline-text-4" id="text-1-6-1">
<ul class="org-ul">
<li class="on"><code>[X]</code> Remove once merged upstream.</li>
</ul>
<p>
This does very little other than load it and remind it that <code>SPC</code> is the leader for the other bindings to work.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> general)
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Creating a constant for making future changes simpler</span>
(<span style="color: #b294bb;">defconst</span> <span style="color: #cc6666;">my-leader</span> <span style="color: #b5bd68;">"SPC"</span>)
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Tell general all about it</span>
(<span style="color: #b294bb;">general-create-definer</span> my-leader-def
  <span style="color: #81a2be;">:prefix</span> <span style="color: #cc6666;">my-leader</span>)
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:prefix my-leader)</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(general-create-definer my-local-leader-def</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">;; :prefix my-local-leader</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">:prefix "SPC m")</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org4a75c6d" class="outline-4">
<h4 id="org4a75c6d"><span class="section-number-4">1.6.2.</span> Evil Setup and Error Handling</h4>
<div class="outline-text-4" id="text-1-6-2">
<p>
Actually this might not be ported over so I&rsquo;m just going to put this elsewhere.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">I like short names</span>
(<span style="color: #de935f;">general-evil-setup</span> t)
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Stop telling me things begin with non-prefix keys</span>
(<span style="color: #de935f;">general-auto-unbind-keys</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org0c9d160" class="outline-4">
<h4 id="org0c9d160"><span class="section-number-4">1.6.3.</span> Spacemacs Equivalency</h4>
<div class="outline-text-4" id="text-1-6-3">
</div>
<ol class="org-ol">
<li><a id="org1076ef1"></a>Kill buffer<br />
<div class="outline-text-5" id="text-1-6-3-1">
<p>
Also it&rsquo;s inconvenient to have a key chord requiring two hands to close a
buffer.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Compatibility, delete when fully migrated</span>
(<span style="color: #b294bb;">defconst</span> <span style="color: #cc6666;">my-leader</span> <span style="color: #b5bd68;">"SPC"</span>)
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Bind a new key chord</span>
(<span style="color: #b294bb;">map!</span>
 (<span style="color: #81a2be;">:leader</span>
  (<span style="color: #81a2be;">:prefix</span> <span style="color: #b5bd68;">"b"</span>
   <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Kill buffer"</span> <span style="color: #b5bd68;">"d"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">kill-this-buffer</span>)
  (<span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"k"</span> . <span style="color: #b5bd68;">"kill"</span>)
   <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Save and kill"</span> <span style="color: #b5bd68;">"e"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">save-buffers-kill-terminal</span>
   <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Kill buffer"</span> <span style="color: #b5bd68;">"b"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">my-kill-this-buffer</span>
   <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Delete frame"</span> <span style="color: #b5bd68;">"f"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">delete-frame</span>
   (<span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"o"</span> . <span style="color: #b5bd68;">"Other"</span>)
    <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Frames"</span> <span style="color: #b5bd68;">"f"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">delete-other-frames</span>
    <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Windows"</span> <span style="color: #b5bd68;">"w"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">delete-other-windows</span>
    )
   )
  ))
</pre>
</div>
</div>
<ol class="org-ol">
<li><a id="org24e1170"></a>general.el<br />
<div class="outline-text-6" id="text-1-6-3-1-1">
<p>
The binding syntax of the future, TODAY!
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">** Global Keybindings</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Normal mode?</span>
(<span style="color: #b294bb;">nmap</span>
  <span style="color: #81a2be;">:prefix</span> <span style="color: #cc6666;">my-leader</span>
  <span style="color: #b5bd68;">"b d"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">kill-this-buffer</span>
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">kill things</span>
  <span style="color: #b5bd68;">"k"</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #81a2be;">:ignore</span> t <span style="color: #81a2be;">:which-key</span> <span style="color: #b5bd68;">"kill"</span>)
  <span style="color: #b5bd68;">"k e"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">save-buffers-kill-terminal</span>
  <span style="color: #b5bd68;">"k b"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">my-kill-this-buffer</span>
  <span style="color: #b5bd68;">"k f"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">delete-frame</span>
  <span style="color: #b5bd68;">"k o f"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">delete-other-frames</span>
  <span style="color: #b5bd68;">"k o w"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">delete-other-windows</span>
  <span style="color: #b5bd68;">"a"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">helm-mini</span>)
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(my-leader-def 'normal 'override</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">"a" 'org-agenda)</span>
</pre>
</div>
</div>
</li>
</ol>
</li>
</ol>
</div>
<div id="outline-container-org488151b" class="outline-4">
<h4 id="org488151b"><span class="section-number-4">1.6.4.</span> Global Maps</h4>
<div class="outline-text-4" id="text-1-6-4">
</div>
<ol class="org-ol">
<li><a id="org034c264"></a>Multiple Cursors<br />
<div class="outline-text-5" id="text-1-6-4-1">
<p>
These need practice. Many of these are already in the default configuration, but
they are redefined here for mnemonic usage. Also to add the <code>which-key</code> hints.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">nmap</span>
  <span style="color: #81a2be;">:prefix</span> <span style="color: #b5bd68;">"gz"</span>
  <span style="color: #81a2be;">:keymaps</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">global</span>
  <span style="color: #b5bd68;">"r"</span> <span style="color: #c5c8c6;">'</span>(mc/edit-lines <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Span region"</span>)
  <span style="color: #b5bd68;">"z"</span> <span style="color: #c5c8c6;">'</span>(+evil/mc-make-cursor-here <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Place frozen cursor"</span>)
  )
</pre>
</div>
</div>
</li>
<li><a id="orge3c7db2"></a>Move around with Links<br />
<div class="outline-text-5" id="text-1-6-4-2">
<p>
Useful for navigating files and what not.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:leader</span>
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Follow thing"</span>  <span style="color: #b5bd68;">"RET"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-open-at-point</span>)
</pre>
</div>
</div>
</li>
<li><a id="org65cfdba"></a>Replace Stuff<br />
<div class="outline-text-5" id="text-1-6-4-3">
<p>
There are way too many of these to keep using <code>helm</code>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:leader</span>
      (<span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"r"</span> . <span style="color: #b5bd68;">"Replace"</span>)
       <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"String"</span> <span style="color: #b5bd68;">"s"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">replace-string</span>
       <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Query"</span> <span style="color: #b5bd68;">"q"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">query-replace</span>
       (<span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"r"</span> . <span style="color: #b5bd68;">"Regexp"</span>)
        <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"String"</span> <span style="color: #b5bd68;">"s"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">replace-regexp</span>
        <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Query"</span> <span style="color: #b5bd68;">"q"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">query-replace-regexp</span>
        )
       )
      )
</pre>
</div>
</div>
</li>
<li><a id="org07fe9d3"></a>Insert Unicode<br />
<div class="outline-text-5" id="text-1-6-4-4">
<p>
This should hopefully propogate across all modes.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:leader</span>
      (<span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"i"</span> . <span style="color: #b5bd68;">"Insert"</span>)
       <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Unicode"</span> <span style="color: #b5bd68;">"u"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">insert-char</span>
       <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Snippet"</span> <span style="color: #b5bd68;">"s"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">yas-insert-snippet</span>
       <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"From Clipboard"</span> <span style="color: #b5bd68;">"y"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">+default/yank-pop</span>
       <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"From Evil Registers"</span> <span style="color: #b5bd68;">"r"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">counsel-evil-registers</span>
      )
)
</pre>
</div>
</div>
</li>
<li><a id="orga14faeb"></a>Wrap Words<br />
<div class="outline-text-5" id="text-1-6-4-5">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Load conditionally</li>
</ul>
<p>
This is for working with the various options enabled by <code>+smartparens</code>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:leader</span>
      (<span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"i"</span> . <span style="color: #b5bd68;">"Insert"</span>)
        (<span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"w"</span> . <span style="color: #b5bd68;">"Wrap"</span>)
          <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Backticks"</span> <span style="color: #b5bd68;">"`"</span> . <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">sp-wrap-backtick</span>
          <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Tildes"</span> <span style="color: #b5bd68;">"~"</span> . <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">sp-wrap-tilde</span>
          )))
</pre>
</div>
</div>
</li>
<li><a id="orgeb17d78"></a>Lookup<br />
<div class="outline-text-5" id="text-1-6-4-6">
<p>
These were bound to really weird things.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">nmap</span>
  <span style="color: #81a2be;">:prefix</span> <span style="color: #cc6666;">my-leader</span>
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">look things up</span>
  <span style="color: #b5bd68;">"l"</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #81a2be;">:ignore</span> t <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"lookup"</span>)
  <span style="color: #b5bd68;">"l o"</span> <span style="color: #c5c8c6;">'</span>(+lookup/online-select <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Online"</span>)
  <span style="color: #b5bd68;">"l f"</span> <span style="color: #c5c8c6;">'</span>(+lookup/file <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"File"</span>)
  )
</pre>
</div>
</div>
</li>
<li><a id="org7a33893"></a>No ESC<br />
<div class="outline-text-5" id="text-1-6-4-7">
<p>
The escape key for exiting things seems very painful.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #de935f;">general-define-key</span>
 <span style="color: #81a2be;">:keymaps</span> <span style="color: #c5c8c6;">'</span>(insert visual normal)
 <span style="color: #b5bd68;">"S-SPC"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">evil-force-normal-state</span>)
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-org857d709" class="outline-4">
<h4 id="org857d709"><span class="section-number-4">1.6.5.</span> Markdown Improvements</h4>
<div class="outline-text-4" id="text-1-6-5">
<p>
Local leader is already bound to `m` and there are few bindings, this just adds
more.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:localleader</span>
      <span style="color: #81a2be;">:map</span> <span style="color: #cc6666;">markdown-mode-map</span>
      <span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"i"</span> . <span style="color: #b5bd68;">"Insert"</span>)
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Blockquote"</span>    <span style="color: #b5bd68;">"q"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">markdown-insert-blockquote</span>
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Bold"</span>          <span style="color: #b5bd68;">"b"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">markdown-insert-bold</span>
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Code"</span>          <span style="color: #b5bd68;">"c"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">markdown-insert-code</span>
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Emphasis"</span>      <span style="color: #b5bd68;">"e"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">markdown-insert-italic</span>
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Footnote"</span>      <span style="color: #b5bd68;">"f"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">markdown-insert-footnote</span>
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Code Block"</span>    <span style="color: #b5bd68;">"s"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">markdown-insert-gfm-code-block</span>
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Image"</span>         <span style="color: #b5bd68;">"i"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">markdown-insert-image</span>
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Link"</span>          <span style="color: #b5bd68;">"l"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">markdown-insert-link</span>
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"List Item"</span>     <span style="color: #b5bd68;">"n"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">markdown-insert-list-item</span>
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Pre"</span>           <span style="color: #b5bd68;">"p"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">markdown-insert-pre</span>
      (<span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"h"</span> . <span style="color: #b5bd68;">"Headings"</span>)
       <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"One"</span>   <span style="color: #b5bd68;">"1"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">markdown-insert-atx-1</span>
       <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Two"</span>   <span style="color: #b5bd68;">"2"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">markdown-insert-atx-2</span>
       <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Three"</span> <span style="color: #b5bd68;">"3"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">markdown-insert-atx-3</span>
       <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Four"</span>  <span style="color: #b5bd68;">"4"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">markdown-insert-atx-4</span>
       <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Five"</span>  <span style="color: #b5bd68;">"5"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">markdown-insert-atx-5</span>
       <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Six"</span>   <span style="color: #b5bd68;">"6"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">markdown-insert-atx-6</span>))
</pre>
</div>
</div>
</div>
<div id="outline-container-org610c729" class="outline-4">
<h4 id="org610c729"><span class="section-number-4">1.6.6.</span> Org Noter</h4>
<div class="outline-text-4" id="text-1-6-6">
<p>
These bindings should probably be after <code>org-noter</code> is loaded.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:localleader</span>
      <span style="color: #81a2be;">:map</span> (<span style="color: #cc6666;">org-mode-map</span> <span style="color: #cc6666;">pdf-view-mode-map</span>)
      (<span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"o"</span> . <span style="color: #b5bd68;">"Org"</span>)
        (<span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"n"</span> . <span style="color: #b5bd68;">"Noter"</span>)
          <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Noter"</span> <span style="color: #b5bd68;">"n"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-noter</span>
          )))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgee5847c" class="outline-4">
<h4 id="orgee5847c"><span class="section-number-4">1.6.7.</span> Org Mode additions</h4>
<div class="outline-text-4" id="text-1-6-7">
<p>
Apart from extension specific bindings, here we define useful functions which
are a part of <code>org-mode</code>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">after!</span> org (<span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:localleader</span>
                  <span style="color: #81a2be;">:map</span> <span style="color: #cc6666;">org-mode-map</span>
                  <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Eval Block"</span> <span style="color: #b5bd68;">"e"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">ober-eval-block-in-repl</span>
                  (<span style="color: #81a2be;">:prefix</span> <span style="color: #b5bd68;">"o"</span>
                   <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Tags"</span> <span style="color: #b5bd68;">"t"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-set-tags</span>
                   <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Roam Bibtex"</span> <span style="color: #b5bd68;">"b"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">orb-note-actions</span>
                   (<span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"p"</span> . <span style="color: #b5bd68;">"Properties"</span>)
                    <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Set"</span> <span style="color: #b5bd68;">"s"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-set-property</span>
                    <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Delete"</span> <span style="color: #b5bd68;">"d"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-delete-property</span>
                    <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Actions"</span> <span style="color: #b5bd68;">"a"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-property-action</span>
                    )
                   )
                  (<span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"i"</span> . <span style="color: #b5bd68;">"Insert"</span>)
                   <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Link"</span> <span style="color: #b5bd68;">"l"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-insert-link</span>
                   <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Item"</span> <span style="color: #b5bd68;">"o"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-toggle-item</span>
                   <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Citation"</span> <span style="color: #b5bd68;">"c"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-ref-insert-cite-link</span>
                   <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Footnote"</span> <span style="color: #b5bd68;">"f"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-footnote-action</span>
                   <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Table"</span> <span style="color: #b5bd68;">"t"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-table-create-or-convert-from-region</span>
                   (<span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"d"</span> . <span style="color: #b5bd68;">"Download"</span>)
                    <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Screenshot"</span> <span style="color: #b5bd68;">"s"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-download-screenshot</span>
                    <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Clipboard"</span> <span style="color: #b5bd68;">"c"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-download-clipboard</span>
                    <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Link"</span> <span style="color: #b5bd68;">"l"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-download-image</span>
                    )
                   (<span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"b"</span> . <span style="color: #b5bd68;">"Math"</span>)
                    <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Bold"</span> <span style="color: #b5bd68;">"f"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-make-bold-math</span>
                    <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Blackboard"</span> <span style="color: #b5bd68;">"b"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-make-blackboard-math</span>
                    <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Remove"</span> <span style="color: #b5bd68;">"r"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-make-symrm-math</span>
                    <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Vert"</span> <span style="color: #b5bd68;">"v"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-make-vert-math</span>
                    )
                   (<span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"h"</span> . <span style="color: #b5bd68;">"Headings"</span>)
                    <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Normal"</span> <span style="color: #b5bd68;">"h"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-insert-heading</span>
                    <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Todo"</span> <span style="color: #b5bd68;">"t"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-insert-todo-heading</span>
                    (<span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"s"</span> . <span style="color: #b5bd68;">"Subheadings"</span>)
                     <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Normal"</span> <span style="color: #b5bd68;">"s"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-insert-subheading</span>
                     <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Todo"</span> <span style="color: #b5bd68;">"t"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-insert-todo-subheading</span>
                     )
                    )
                   (<span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"e"</span> . <span style="color: #b5bd68;">"Exports"</span>)
                    <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Dispatch"</span> <span style="color: #b5bd68;">"d"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-export-dispatch</span>
                    )
                   )
                  )
  )
</pre>
</div>
</div>
<ol class="org-ol">
<li><a id="org6b531b0"></a>Math Environments<br />
<div class="outline-text-5" id="text-1-6-7-1">
<p>
Modified from <a href="https://tex.stackexchange.com/questions/22573/how-can-i-tell-auctex-that-breqn-is-a-math-environment">this TeXSE answer</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">LaTeX-mode-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">add-my-latex-environments</span>)
(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">add-my-latex-environments</span> ()
  (<span style="color: #de935f;">LaTeX-add-environments</span>
   <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"thm"</span> LaTeX-env-label)
   <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"prop"</span> LaTeX-env-label)
   <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"lem"</span> LaTeX-env-label)
   <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"cor"</span> LaTeX-env-label)
   <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"defn"</span> LaTeX-env-label)
   <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"not"</span> LaTeX-env-label)
   <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"rem"</span> LaTeX-env-label)
   <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"ex"</span> LaTeX-env-label)
   <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"align"</span> LaTeX-env-label)
   <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"notation"</span> LaTeX-env-label)
   <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"dmath"</span> LaTeX-env-label)
   ))

<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Code I added to make syntax highlighting work in Auctex</span>

(<span style="color: #de935f;">custom-set-variables</span>
 <span style="color: #c5c8c6;">'</span>(<span style="color: #cc6666;">font-latex-math-environments</span> (<span style="color: #b294bb;">quote</span>
                                 (<span style="color: #b5bd68;">"display"</span> <span style="color: #b5bd68;">"displaymath"</span> <span style="color: #b5bd68;">"equation"</span> <span style="color: #b5bd68;">"eqnarray"</span> <span style="color: #b5bd68;">"gather"</span> <span style="color: #b5bd68;">"multline"</span>
                                  <span style="color: #b5bd68;">"align"</span> <span style="color: #b5bd68;">"alignat"</span> <span style="color: #b5bd68;">"xalignat"</span> <span style="color: #b5bd68;">"dmath"</span>)))
 <span style="color: #c5c8c6;">'</span>(<span style="color: #cc6666;">TeX-insert-braces</span> nil)) <span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">Stops putting {} on argumentless commands to "save" whitespace</span>

<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Additionally, reftex code to recognize this environment as an equation</span>
(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">reftex-label-alist</span>
      <span style="color: #c5c8c6;">'</span>((<span style="color: #b5bd68;">"dmath"</span> ?e nil nil t)))
</pre>
</div>
</div>
</li>
<li><a id="org393ade0"></a>Special Math Environments<br />
<div class="outline-text-5" id="text-1-6-7-2">
<p>
Stolen <a href="https://tex.stackexchange.com/questions/45712/faster-way-of-writing-mathbf">from here</a>. Note that these are meant to work with <code>unicode-math</code>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">org-make-bold-math</span> ()
  <span style="color: #717171;">"If there's a selection -- wrap this with '</span><span style="color: #de935f;">\symbf{</span><span style="color: #717171;">' and '</span><span style="color: #de935f;">}</span><span style="color: #717171;">'</span>
<span style="color: #717171;">   and put the point to the end.  Otherwise -- put the point</span>
<span style="color: #717171;">   between '</span><span style="color: #de935f;">\symbf{</span><span style="color: #717171;">' and '</span><span style="color: #de935f;">}</span><span style="color: #717171;">'</span>

<span style="color: #717171;">   Also: when not in math mode -- enclose the thing in dollars."</span>

  (<span style="color: #b294bb;">interactive</span>)

  (<span style="color: #b294bb;">let</span> (start end
              (delim <span style="color: #b5bd68;">""</span>)
              (jump 1)
              )

    (<span style="color: #b294bb;">when</span> (<span style="color: #de935f;">not</span> (<span style="color: #de935f;">texmathp</span>))
      (<span style="color: #b294bb;">setq</span> delim <span style="color: #b5bd68;">"$"</span>)
      (<span style="color: #b294bb;">setq</span> jump 2)
      )

    (<span style="color: #b294bb;">if</span> (<span style="color: #de935f;">use-region-p</span>)
        (<span style="color: #b294bb;">progn</span>
          (<span style="color: #b294bb;">setq</span> start (<span style="color: #de935f;">region-beginning</span>))
          (<span style="color: #b294bb;">setq</span> end (<span style="color: #de935f;">region-end</span>))

          (<span style="color: #de935f;">narrow-to-region</span> start end)

          (<span style="color: #de935f;">goto-char</span> (<span style="color: #de935f;">point-min</span>))
          (<span style="color: #de935f;">insert</span> (<span style="color: #de935f;">concat</span> delim <span style="color: #b5bd68;">"\\symbf{"</span>))

          (<span style="color: #de935f;">goto-char</span> (<span style="color: #de935f;">point-max</span>))
          (<span style="color: #de935f;">insert</span> (<span style="color: #de935f;">concat</span> <span style="color: #b5bd68;">"}"</span> delim))
          (<span style="color: #de935f;">widen</span>)
          )

      (<span style="color: #b294bb;">progn</span>
        (<span style="color: #de935f;">insert</span> (<span style="color: #de935f;">concat</span> delim <span style="color: #b5bd68;">"\\symbf{}"</span> delim))
        (<span style="color: #de935f;">backward-char</span> jump)
        )
      )
    ))


(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">org-make-blackboard-math</span> ()
  <span style="color: #717171;">"If there's a selection -- wrap this with '</span><span style="color: #de935f;">\symbb{</span><span style="color: #717171;">' and '</span><span style="color: #de935f;">}</span><span style="color: #717171;">'</span>
<span style="color: #717171;">   and put the point to the end.  Otherwise -- put the point</span>
<span style="color: #717171;">   between '</span><span style="color: #de935f;">\symbb{</span><span style="color: #717171;">' and '</span><span style="color: #de935f;">}</span><span style="color: #717171;">'</span>

<span style="color: #717171;">   Also: when not in math mode -- enclose the thing in dollars."</span>

  (<span style="color: #b294bb;">interactive</span>)

  (<span style="color: #b294bb;">let</span> (start end
              (delim <span style="color: #b5bd68;">""</span>)
              (jump 1)
              )

    (<span style="color: #b294bb;">when</span> (<span style="color: #de935f;">not</span> (<span style="color: #de935f;">texmathp</span>))
      (<span style="color: #b294bb;">setq</span> delim <span style="color: #b5bd68;">"$"</span>)
      (<span style="color: #b294bb;">setq</span> jump 2)
      )

    (<span style="color: #b294bb;">if</span> (<span style="color: #de935f;">use-region-p</span>)
        (<span style="color: #b294bb;">progn</span>
          (<span style="color: #b294bb;">setq</span> start (<span style="color: #de935f;">region-beginning</span>))
          (<span style="color: #b294bb;">setq</span> end (<span style="color: #de935f;">region-end</span>))

          (<span style="color: #de935f;">narrow-to-region</span> start end)

          (<span style="color: #de935f;">goto-char</span> (<span style="color: #de935f;">point-min</span>))
          (<span style="color: #de935f;">insert</span> (<span style="color: #de935f;">concat</span> delim <span style="color: #b5bd68;">"\\symbb{"</span>))

          (<span style="color: #de935f;">goto-char</span> (<span style="color: #de935f;">point-max</span>))
          (<span style="color: #de935f;">insert</span> (<span style="color: #de935f;">concat</span> <span style="color: #b5bd68;">"}"</span> delim))
          (<span style="color: #de935f;">widen</span>)
          )

      (<span style="color: #b294bb;">progn</span>
        (<span style="color: #de935f;">insert</span> (<span style="color: #de935f;">concat</span> delim <span style="color: #b5bd68;">"\\symbb{}"</span> delim))
        (<span style="color: #de935f;">backward-char</span> jump)
        )
      )
    ))

(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">org-make-symrm-math</span> ()
  <span style="color: #717171;">"If there's a selection -- wrap this with '</span><span style="color: #de935f;">\symrm{</span><span style="color: #717171;">' and '</span><span style="color: #de935f;">}</span><span style="color: #717171;">'</span>
<span style="color: #717171;">   and put the point to the end.  Otherwise -- put the point</span>
<span style="color: #717171;">   between '</span><span style="color: #de935f;">\symrm{</span><span style="color: #717171;">' and '</span><span style="color: #de935f;">}</span><span style="color: #717171;">'</span>

<span style="color: #717171;">   Also: when not in math mode -- enclose the thing in dollars."</span>

  (<span style="color: #b294bb;">interactive</span>)

  (<span style="color: #b294bb;">let</span> (start end
              (delim <span style="color: #b5bd68;">""</span>)
              (jump 1)
              )

    (<span style="color: #b294bb;">when</span> (<span style="color: #de935f;">not</span> (<span style="color: #de935f;">texmathp</span>))
      (<span style="color: #b294bb;">setq</span> delim <span style="color: #b5bd68;">"$"</span>)
      (<span style="color: #b294bb;">setq</span> jump 2)
      )

    (<span style="color: #b294bb;">if</span> (<span style="color: #de935f;">use-region-p</span>)
        (<span style="color: #b294bb;">progn</span>
          (<span style="color: #b294bb;">setq</span> start (<span style="color: #de935f;">region-beginning</span>))
          (<span style="color: #b294bb;">setq</span> end (<span style="color: #de935f;">region-end</span>))

          (<span style="color: #de935f;">narrow-to-region</span> start end)

          (<span style="color: #de935f;">goto-char</span> (<span style="color: #de935f;">point-min</span>))
          (<span style="color: #de935f;">insert</span> (<span style="color: #de935f;">concat</span> delim <span style="color: #b5bd68;">"\\symrm{"</span>))

          (<span style="color: #de935f;">goto-char</span> (<span style="color: #de935f;">point-max</span>))
          (<span style="color: #de935f;">insert</span> (<span style="color: #de935f;">concat</span> <span style="color: #b5bd68;">"}"</span> delim))
          (<span style="color: #de935f;">widen</span>)
          )

      (<span style="color: #b294bb;">progn</span>
        (<span style="color: #de935f;">insert</span> (<span style="color: #de935f;">concat</span> delim <span style="color: #b5bd68;">"\\symrm{}"</span> delim))
        (<span style="color: #de935f;">backward-char</span> jump)
        )
      )
    ))

(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">org-make-vert-math</span> ()
  <span style="color: #717171;">"If there's a selection -- wrap this with '</span><span style="color: #de935f;">\vert{</span><span style="color: #717171;">' and '</span><span style="color: #de935f;">}</span><span style="color: #717171;">'</span>
<span style="color: #717171;">   and put the point to the end.  Otherwise -- put the point</span>
<span style="color: #717171;">   between '</span><span style="color: #de935f;">\vert{</span><span style="color: #717171;">' and '</span><span style="color: #de935f;">}</span><span style="color: #717171;">'</span>

<span style="color: #717171;">   Also: when not in math mode -- enclose the thing in dollars."</span>

  (<span style="color: #b294bb;">interactive</span>)

  (<span style="color: #b294bb;">let</span> (start end
              (delim <span style="color: #b5bd68;">""</span>)
              (jump 1)
              )

    (<span style="color: #b294bb;">when</span> (<span style="color: #de935f;">not</span> (<span style="color: #de935f;">texmathp</span>))
      (<span style="color: #b294bb;">setq</span> delim <span style="color: #b5bd68;">"$"</span>)
      (<span style="color: #b294bb;">setq</span> jump 2)
      )

    (<span style="color: #b294bb;">if</span> (<span style="color: #de935f;">use-region-p</span>)
        (<span style="color: #b294bb;">progn</span>
          (<span style="color: #b294bb;">setq</span> start (<span style="color: #de935f;">region-beginning</span>))
          (<span style="color: #b294bb;">setq</span> end (<span style="color: #de935f;">region-end</span>))

          (<span style="color: #de935f;">narrow-to-region</span> start end)

          (<span style="color: #de935f;">goto-char</span> (<span style="color: #de935f;">point-min</span>))
          (<span style="color: #de935f;">insert</span> (<span style="color: #de935f;">concat</span> delim <span style="color: #b5bd68;">"&#8214;"</span>))

          (<span style="color: #de935f;">goto-char</span> (<span style="color: #de935f;">point-max</span>))
          (<span style="color: #de935f;">insert</span> (<span style="color: #de935f;">concat</span> <span style="color: #b5bd68;">"&#8214;"</span> delim))
          (<span style="color: #de935f;">widen</span>)
          )

      (<span style="color: #b294bb;">progn</span>
        (<span style="color: #de935f;">insert</span> (<span style="color: #de935f;">concat</span> delim <span style="color: #b5bd68;">"&#8214;&#8214;"</span> delim))
        (<span style="color: #de935f;">backward-char</span> jump)
        )
      )
    ))
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-org9a4c53b" class="outline-4">
<h4 id="org9a4c53b"><span class="section-number-4">1.6.8.</span> Anki Editor</h4>
<div class="outline-text-4" id="text-1-6-8">
<p>
These are only relevant to <code>org-mode</code>. Nevertheless they are not part of
<code>org-mode</code> so semantically it makes no sense to use <code>o</code> after the localleader.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:localleader</span>
      <span style="color: #81a2be;">:map</span> <span style="color: #cc6666;">org-mode-map</span>
      (<span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"a"</span> . <span style="color: #b5bd68;">"Anki"</span>)
       <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Push"</span> <span style="color: #b5bd68;">"p"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">anki-editor-push-notes</span>
       <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Retry"</span> <span style="color: #b5bd68;">"r"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">anki-editor-retry-failure-notes</span>
       <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Insert"</span> <span style="color: #b5bd68;">"n"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">anki-editor-insert-note</span>
       (<span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"c"</span> . <span style="color: #b5bd68;">"Cloze"</span>)
        <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Dwim"</span> <span style="color: #b5bd68;">"d"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">anki-editor-cloze-dwim</span>
        <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Region"</span> <span style="color: #b5bd68;">"r"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">anki-editor-cloze-region</span>
        )
       )
      )
</pre>
</div>
</div>
</div>
<div id="outline-container-org2e72647" class="outline-4">
<h4 id="org2e72647"><span class="section-number-4">1.6.9.</span> CC Mode</h4>
<div class="outline-text-4" id="text-1-6-9">
<p>
These are basically wrappers around various <code>rtags</code> functions.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">nmap</span>
  <span style="color: #81a2be;">:prefix</span> <span style="color: #cc6666;">my-leader</span>
  <span style="color: #81a2be;">:keymaps</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">c-mode-base-map</span>
  <span style="color: #b5bd68;">"m"</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #81a2be;">:ignore</span> t <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Local Commands"</span>)
  <span style="color: #b5bd68;">"m r"</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #81a2be;">:ignore</span> t <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Rtags"</span>)
  <span style="color: #b5bd68;">"m r c"</span> <span style="color: #c5c8c6;">'</span>(rtags-check-includes <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Check Includes"</span>)
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">All the find commands</span>
  <span style="color: #b5bd68;">"m r f"</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #81a2be;">:ignore</span> t <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Find"</span>)
  <span style="color: #b5bd68;">"m r f s"</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #81a2be;">:ignore</span> t <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Symbol"</span>)
  <span style="color: #b5bd68;">"m r f s a"</span> <span style="color: #c5c8c6;">'</span>(rtags-find-symbol-at-point <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"At point"</span>)
  <span style="color: #b5bd68;">"m r f s s"</span> <span style="color: #c5c8c6;">'</span>(rtags-find-symbol <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Symbol"</span>)
  <span style="color: #b5bd68;">"m r f s c"</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #81a2be;">:ignore</span> t <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Current"</span>)
  <span style="color: #b5bd68;">"m r f s c f"</span> <span style="color: #c5c8c6;">'</span>(rtags-find-symbol-current-file <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"File"</span>)
  <span style="color: #b5bd68;">"m r f s c d"</span> <span style="color: #c5c8c6;">'</span>(rtags-find-symbol-current-dir <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Directory"</span>)
  <span style="color: #b5bd68;">"m r f f"</span> <span style="color: #c5c8c6;">'</span>(rtags-find-functions-called-by-this-function <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Functions"</span>)
  <span style="color: #b5bd68;">"m r f r"</span> <span style="color: #c5c8c6;">'</span>(rtags-find-references <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"References"</span>)
  )

</pre>
</div>
</div>
</div>
<div id="outline-container-org54f642e" class="outline-4">
<h4 id="org54f642e"><span class="section-number-4">1.6.10.</span> Evil Colemak</h4>
<div class="outline-text-4" id="text-1-6-10">
<p>
These are mostly because movement without <code>hnei</code> is horrible. Read about it
<a href="https://rgoswami.me/posts/colemak-dots-refactor/">here</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> evil-colemak-basics
  <span style="color: #81a2be;">:after</span> evil
  <span style="color: #81a2be;">:config</span>
  (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">evil-colemak-basics-rotate-t-f-j</span> t)
  (<span style="color: #cc6666;">global-evil-colemak-basics-mode</span>)
  )
</pre>
</div>
</div>
<ol class="org-ol">
<li><a id="org45a7771"></a>Visual Lines<br />
<div class="outline-text-5" id="text-1-6-10-1">
<p>
Since I tend to keep <code>visual-line-mode</code> all the time, <a href="https://github.com/YourFin/evil-better-visual-line/">evil-better-visual-line</a> is a natural choice.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> evil-better-visual-line
  <span style="color: #81a2be;">:after</span> evil-colemak-basics
  <span style="color: #81a2be;">:config</span>
  (<span style="color: #de935f;">evil-better-visual-line-on</span>)
  (<span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:map</span> <span style="color: #cc6666;">evil-colemak-basics-keymap</span>
        (<span style="color: #81a2be;">:nvm</span> <span style="color: #b5bd68;">"n"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">evil-better-visual-line-next-line</span>
         <span style="color: #81a2be;">:nvm</span> <span style="color: #b5bd68;">"e"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">evil-better-visual-line-previous-line</span>
         <span style="color: #81a2be;">:nvm</span> <span style="color: #b5bd68;">"g n"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">evil-next-line</span>
         <span style="color: #81a2be;">:nvm</span> <span style="color: #b5bd68;">"g e"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">evil-previous-line</span>))
  )
</pre>
</div>
</div>
</li>
<li><a id="orga23fe67"></a>Search<br />
<div class="outline-text-5" id="text-1-6-10-2">
<p>
Harmonizing with Vimium.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">after!</span> evil (<span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:map</span> <span style="color: #cc6666;">evil-motion-state-map</span>
                   (<span style="color: #81a2be;">:n</span> <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Previous match"</span> <span style="color: #b5bd68;">"K"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">evil-search-previous</span>
                    <span style="color: #81a2be;">:n</span> <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Next match"</span> <span style="color: #b5bd68;">"k"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">evil-search-next</span>
                    <span style="color: #81a2be;">:n</span> <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Forward search"</span> <span style="color: #b5bd68;">"/"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">evil-search-forward</span>
                    )
                   ))
</pre>
</div>
</div>
</li>
<li><a id="orgda4fb4a"></a>Window Bindings<br />
<div class="outline-text-5" id="text-1-6-10-3">
<p>
These are somehow not part of the <code>evil-colemak</code> setup.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">after!</span> evil
  (<span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:map</span> <span style="color: #cc6666;">evil-window-map</span>
        (<span style="color: #81a2be;">:leader</span>
         (<span style="color: #81a2be;">:prefix</span> (<span style="color: #b5bd68;">"w"</span> . <span style="color: #b5bd68;">"Select Window"</span>)
          <span style="color: #81a2be;">:n</span> <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Left"</span>  <span style="color: #b5bd68;">"h"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">evil-window-left</span>
          <span style="color: #81a2be;">:n</span> <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Up"</span>    <span style="color: #b5bd68;">"e"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">evil-window-up</span>
          <span style="color: #81a2be;">:n</span> <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Down"</span>  <span style="color: #b5bd68;">"n"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">evil-window-down</span>
          <span style="color: #81a2be;">:n</span> <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Right"</span> <span style="color: #b5bd68;">"i"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">evil-window-right</span>
          ))
        ))
</pre>
</div>
</div>
</li>
<li><a id="org8b1e303"></a>Page Movement<br />
<div class="outline-text-5" id="text-1-6-10-4">
<p>
Harmonizing with Zathura.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">after!</span> evil
  (<span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:map</span> <span style="color: #cc6666;">evil-colemak-basics-keymap</span>
      <span style="color: #81a2be;">:nv</span> <span style="color: #b5bd68;">"N"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">evil-scroll-page-down</span>
      <span style="color: #81a2be;">:nv</span> <span style="color: #b5bd68;">"E"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">evil-scroll-page-up</span>)
  )
</pre>
</div>
</div>
</li>
<li><a id="orgdbfce6e"></a>Evil Org<br />
<div class="outline-text-5" id="text-1-6-10-5">
<p>
Annoyingly, <code>evil-org-mode</code> had a map which kept overriding all my other
settings. Thankfully it has a helper variable to set movement. I also do not
need this anyway, at-least not by default.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">after!</span> org
  (<span style="color: #de935f;">remove-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-mode-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">evil-org-mode</span>)
  (<span style="color: #b294bb;">setq</span> evil-org-movement-bindings
        <span style="color: #c5c8c6;">'</span>((up . <span style="color: #b5bd68;">"e"</span>) (down . <span style="color: #b5bd68;">"n"</span>)
          (left . <span style="color: #b5bd68;">"h"</span>) (right . <span style="color: #b5bd68;">"i"</span>))
        )
)
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-orgddd3047" class="outline-4">
<h4 id="orgddd3047"><span class="section-number-4">1.6.11.</span> <span class="done DONE">DONE</span> Neotree &#x2013;&gt; Treemacs</h4>
<div class="outline-text-4" id="text-1-6-11">
</div>
<ol class="org-ol">
<li><a id="org9a018f6"></a>CANCELLED Toggle pane<br />
<div class="outline-text-5" id="text-1-6-11-1">
<p>
This remaps <code>SPC o N</code> to use <code>treemacs</code>.
I guess this doesn&rsquo;t make all that much sense, but <code>t</code> and <code>T</code> and bound to
terminals and that makes sense, so I guess this is fine.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Remap opening the sidebar</span>
(<span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:leader</span>
      <span style="color: #81a2be;">:nv</span> <span style="color: #b5bd68;">"o n"</span> nil
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Open treemacs pane"</span>
      <span style="color: #81a2be;">:n</span> <span style="color: #b5bd68;">"o n"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">+treemacs/toggle</span>)
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Remap finding stuff</span>
(<span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:leader</span>
      <span style="color: #81a2be;">:nv</span> <span style="color: #b5bd68;">"o N"</span> nil
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Treemacs find file"</span>
      <span style="color: #81a2be;">:n</span> <span style="color: #b5bd68;">"o N"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">treemacs-find-file</span>)
</pre>
</div>
<p>
Cancelled since <a href="https://github.com/hlissner/doom-emacs/commit/287460cb050c94010f4d8ded0fbfecf479c1772a">this commit</a> on the <code>develop</code> branch.
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-org280ac97" class="outline-4">
<h4 id="org280ac97"><span class="section-number-4">1.6.12.</span> TeX Mode</h4>
<div class="outline-text-4" id="text-1-6-12">
<p>
These are more semantic for me.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">nmap</span>
  <span style="color: #81a2be;">:prefix</span> <span style="color: #cc6666;">my-leader</span>
  <span style="color: #81a2be;">:keymaps</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #cc6666;">latex-mode-map</span> <span style="color: #cc6666;">tex-mode-map</span> <span style="color: #cc6666;">LaTeX-mode-map</span>)
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Folding Stuff</span>
  <span style="color: #b5bd68;">"m f"</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #81a2be;">:ignore</span> t <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Fold Things"</span>)
  <span style="color: #b5bd68;">"m f c"</span> <span style="color: #c5c8c6;">'</span>(TeX-fold-comment <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Comment"</span>)
  <span style="color: #b5bd68;">"m f e"</span> <span style="color: #c5c8c6;">'</span>(TeX-fold-env <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Environment"</span>)
  <span style="color: #b5bd68;">"m f m"</span> <span style="color: #c5c8c6;">'</span>(TeX-fold-math <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Math"</span>)
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Insertions</span>
  <span style="color: #b5bd68;">"m i"</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #81a2be;">:ignore</span> t <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Insert"</span>)
  <span style="color: #b5bd68;">"m i m"</span> <span style="color: #c5c8c6;">'</span>(helm-insert-latex-math <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Math Symbols"</span>)
  <span style="color: #b5bd68;">"m i r"</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #81a2be;">:ignore</span> t <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"References"</span>)
  <span style="color: #b5bd68;">"m i r h"</span> <span style="color: #c5c8c6;">'</span>(helm-bibtex-with-local-bibliography <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Helm"</span>)
  <span style="color: #b5bd68;">"m i r r"</span> <span style="color: #c5c8c6;">'</span>(reftex-citation <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Reftex"</span>)
  )
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org665ea1f" class="outline-3">
<h3 id="org665ea1f"><span class="section-number-3">1.7.</span> Safe Evals and Variables</h3>
<div class="outline-text-3" id="text-1-7">
</div>
<div id="outline-container-org1b7eefc" class="outline-4">
<h4 id="org1b7eefc"><span class="section-number-4">1.7.1.</span> MacOS Variables</h4>
<div class="outline-text-4" id="text-1-7-1">
<p>
To use <code>path</code> variables <a href="https://github.com/purcell/exec-path-from-shell">more easily</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">cond</span> ((<span style="color: #de935f;">featurep</span> <span style="color: #de935f;">:system</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">macos</span>) (<span style="color: #b294bb;">use-package!</span> exec-path-from-shell
                                   <span style="color: #81a2be;">:config</span>
                                   (exec-path-from-shell-initialize)
                                   )
       ))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfc32b5d" class="outline-4">
<h4 id="orgfc32b5d"><span class="section-number-4">1.7.2.</span> Private Variables</h4>
<div class="outline-text-4" id="text-1-7-2">
<p>
On a Mac, when using Nix and Emacs 28, some of the path variables need to be set to find <code>gpg</code>. These should probably be handled through <code>doom env</code> since the terminal does not have trouble finding <code>gpg</code>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">cond</span> ((<span style="color: #de935f;">featurep</span> <span style="color: #de935f;">:system</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">macos</span>) (<span style="color: #de935f;">custom-set-variables</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #cc6666;">epg-gpg-program</span> <span style="color: #b5bd68;">"/usr/local/bin/gpg"</span>)) <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">brew</span>
       (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">exec-path</span> (<span style="color: #de935f;">append</span> <span style="color: #cc6666;">exec-path</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"/run/current-system/sw/bin"</span>))) <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">nix</span>
       (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">exec-path</span> (<span style="color: #de935f;">append</span> <span style="color: #cc6666;">exec-path</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"/usr/local/bin/"</span>))) <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">brew</span>
       ))
</pre>
</div>
<p>
These are encrypted with <code>gpg</code> and are essentially set mostly by <code>custom-*</code>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> epa-file
  <span style="color: #81a2be;">:demand</span>
  <span style="color: #81a2be;">:config</span>
  (<span style="color: #de935f;">epa-file-enable</span>)
  (<span style="color: #de935f;">load</span> (<span style="color: #de935f;">concat</span> <span style="color: #cc6666;">doom-private-dir</span> <span style="color: #b5bd68;">"local/private.el.gpg"</span>))
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-org104d414" class="outline-4">
<h4 id="org104d414"><span class="section-number-4">1.7.3.</span> Safe Variables</h4>
<div class="outline-text-4" id="text-1-7-3">
<p>
The problem is that <code>packages.el</code> isn&rsquo;t being produced by the clever little ugly
commit I tried so, this is a workaround to tangle <b>any</b> file to be produced in
<code>.el</code> format in the same location.
</p>
</div>
<ol class="org-ol">
<li><a id="orgdef7223"></a>Tangle<br />
<div class="outline-text-5" id="text-1-7-3-1">
<p>
So adding the automatic tangling code doesn&rsquo;t mangle things up everytime you
open emacs.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">safe-local-variable-values</span> <span style="color: #c5c8c6;">'</span>((<span style="color: #cc6666;">after-save-hook</span> . haozeke/org-save-and-export-latex)
 (<span style="color: #cc6666;">before-save-hook</span> . org-babel-execute-buffer)))
</pre>
</div>
</div>
</li>
<li><a id="org15f59c0"></a><span class="done KILL">KILL</span> Caveats<br />
<div class="outline-text-5" id="text-1-7-3-2">
<ul class="org-ul">
<li>This actually forms it relative to the exact path.
(Gotta move it to the config folder)</li>
<li>The actual code is much more elegant in every way possible.</li>
<li>Seriously there has to be  a way to not have to do this.</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-org710c60a" class="outline-4">
<h4 id="org710c60a"><span class="section-number-4">1.7.4.</span> Asynchronous Exports</h4>
<div class="outline-text-4" id="text-1-7-4">
<p>
As per this <a href="https://superuser.com/a/898717/899764">interesting answer on the superuser forums</a>, I need to set
<code>org-export-async-init-file</code>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-export-async-init-file</span> (<span style="color: #de935f;">concat</span> <span style="color: #cc6666;">doom-private-dir</span> <span style="color: #b5bd68;">"local/async-ox.el"</span>))
</pre>
</div>
</div>
</div>
<div id="outline-container-org313ce64" class="outline-4">
<h4 id="org313ce64"><span class="section-number-4">1.7.5.</span> TRAMP Settings</h4>
<div class="outline-text-4" id="text-1-7-5">
<p>
I use some paths on my remote machines, which are non-standard.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">after!</span> tramp
  (<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">tramp-remote-path</span> <span style="color: #b5bd68;">"~/.local/bin"</span>)
  (<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">tramp-remote-path</span> <span style="color: #b5bd68;">"~/.cargo/bin"</span>)
  (<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">tramp-remote-path</span> <span style="color: #b5bd68;">"~/.hpc/bin"</span>)
  (<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">tramp-remote-path</span> <span style="color: #b5bd68;">"~/.local/lsp/bin"</span>)
  (<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">tramp-remote-path</span> <span style="color: #b5bd68;">"~/.micromamba/envs/lsp/bin/"</span>)
  (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">remote-file-name-inhibit-cache</span> 60)
  (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">remote-file-name-inhibit-locks</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">t</span>)
  (<span style="color: #b294bb;">setq</span> tramp-completion-reread-directory-timeout 60)
  (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">tramp-verbose</span> 1)
  (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">tramp-inline-compress-start-size</span> 1000)
  (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">tramp-default-method</span> <span style="color: #b5bd68;">"sshx"</span>)
  (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">vc-ignore-dir-regexp</span> (<span style="color: #de935f;">format</span> <span style="color: #b5bd68;">"%s</span><span style="color: #c5c8c6; font-weight: bold;">\\</span><span style="color: #c5c8c6; font-weight: bold;">|</span><span style="color: #b5bd68;">%s</span><span style="color: #c5c8c6; font-weight: bold;">\\</span><span style="color: #c5c8c6; font-weight: bold;">|</span><span style="color: #b5bd68;">%s"</span>
                                     <span style="color: #cc6666;">vc-ignore-dir-regexp</span>
                                     <span style="color: #cc6666;">tramp-file-name-regexp</span>
                                     <span style="color: #b5bd68;">"[/\\\\]node_modules"</span>)
        )
  (<span style="color: #b294bb;">setq-default</span> <span style="color: #cc6666;">tramp-ssh-controlmaster-options</span>
                <span style="color: #b5bd68;">"-o ControlMaster=auto -o ControlPath='</span><span style="color: #de935f;">/tmp/tramp.%%C</span><span style="color: #b5bd68;">' -o ControlPersist=90m"</span>)
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-org30292f8" class="outline-4">
<h4 id="org30292f8"><span class="section-number-4">1.7.6.</span> Language Servers</h4>
<div class="outline-text-4" id="text-1-7-6">
<p>
Between <code>lsp-mode</code> and <code>eglot</code> I ended up with eglot for reasons better described here.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">after!</span> eglot
  <span style="color: #81a2be;">:config</span>
  (<span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">nix-mode-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">eglot-ensure</span>)
  (<span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">f90-mode-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">eglot-ensure</span>)
  (<span style="color: #81a2be;">set-eglot-client!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">cc-mode</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"clangd"</span> <span style="color: #b5bd68;">"-j=3"</span> <span style="color: #b5bd68;">"--clang-tidy"</span>))
  (<span style="color: #81a2be;">set-eglot-client!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">python-mode</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"pylsp"</span>))
  (<span style="color: #b294bb;">when</span> (<span style="color: #de935f;">string=</span> (<span style="color: #cc6666;">system-name</span>) <span style="color: #b5bd68;">"Rohits-MacBook-Pro.local"</span>)
    (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">exec-path</span> (<span style="color: #de935f;">append</span> <span style="color: #cc6666;">exec-path</span> <span style="color: #c5c8c6;">'</span>(
                                        (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"HOME"</span>) <span style="color: #b5bd68;">"/.micromamba/envs/lsp/bin/"</span>) <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">python, fortran</span>
                                        (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"HOME"</span>) <span style="color: #b5bd68;">"/.local/lsp/bin/"</span>) <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">clangd</span>
                                        (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"HOME"</span>) <span style="color: #b5bd68;">"/.digestif/bin/"</span>) <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">tex</span>
                                        (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"HOME"</span>) <span style="color: #b5bd68;">"/.nvm/versions/node/v16.1.0/bin/bash-language-server"</span>)
                                        )))
    )
  )
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org4b7e42f" class="outline-3">
<h3 id="org4b7e42f"><span class="section-number-3">1.8.</span> Package Settings</h3>
<div class="outline-text-3" id="text-1-8">
<p>
These should eventually go into a different module.
Each of these.
</p>
</div>
<div id="outline-container-org5bed365" class="outline-4">
<h4 id="org5bed365"><span class="section-number-4">1.8.1.</span> Word wrap</h4>
<div class="outline-text-4" id="text-1-8-1">
<p>
This section is to work with the settings for the <code>word-wrap</code> <code>doom</code> module.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">enable word-wrap in C/C++/ObjC/Java</span>
(<span style="color: #b294bb;">add-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">markdown-mode-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #cc6666;">+word-wrap-mode</span>)
(<span style="color: #b294bb;">add-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">text-mode-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #cc6666;">+word-wrap-mode</span>)
(<span style="color: #b294bb;">add-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">tex-mode-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #cc6666;">+word-wrap-mode</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org1c12fb4" class="outline-4">
<h4 id="org1c12fb4"><span class="section-number-4">1.8.2.</span> Spellings</h4>
<div class="outline-text-4" id="text-1-8-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">after!</span> spell-fu
  (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">spell-fu-idle-delay</span> 0.5 <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">default is 0.25</span>
        <span style="color: #cc6666;">ispell-program-name</span> <span style="color: #b5bd68;">"hunspell"</span>
        <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">aspell -&gt; "--sug-mode=ultra"</span>
        <span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">ispell-extra-args '("-d en_US")</span>
        <span style="color: #cc6666;">ispell-dictionary</span> <span style="color: #b5bd68;">"en_US"</span> <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">needed for MacOS in particular</span>
        <span style="color: #cc6666;">ispell-personal-dictionary</span> <span style="color: #b5bd68;">"~/.aspell.en.pws"</span> <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">standard location</span>
        spell-fu-dictionary <span style="color: #b5bd68;">"~/.config/dict"</span> <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">standard location</span>
        )
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">use American English as ispell default dictionary</span>
  (<span style="color: #de935f;">ispell-change-dictionary</span> <span style="color: #b5bd68;">"american"</span> t)
  (<span style="color: #b294bb;">setq-default</span> <span style="color: #cc6666;">ispell-program-name</span> <span style="color: #b5bd68;">"hunspell"</span>)
  )
</pre>
</div>
<p>
Also, it gets annoying to have spell check enabled while working with code.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Can always be enabled with SPC t s</span>
(<span style="color: #de935f;">remove-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">text-mode-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #cc6666;">spell-fu-mode</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org0639762" class="outline-4">
<h4 id="org0639762"><span class="section-number-4">1.8.3.</span> Magit Aids</h4>
<div class="outline-text-4" id="text-1-8-3">
</div>
<ol class="org-ol">
<li><a id="org7a77108"></a><span class="done DONE">DONE</span> Magit todos<br />
<div class="outline-text-5" id="text-1-8-3-1">
<p>
Of course this is not really meant to be here..
A variation of this was included upstream in the <code>develop</code> branch.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> magit-org-todos
  <span style="color: #81a2be;">:mode</span> <span style="color: #b5bd68;">"\\COMMIT_EDITMSG\\'"</span>
  <span style="color: #81a2be;">:commands</span> (magit-org-todods magit-org-todos-autoinsert)
  <span style="color: #81a2be;">:config</span>
  (magit-org-todos-autoinsert))
</pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(use-package! magit-todos)</span>
</pre>
</div>
</div>
</li>
<li><a id="org94d10da"></a><span class="done DONE">DONE</span> Magithub<br />
<div class="outline-text-5" id="text-1-8-3-2">
<p>
This is for sweet github integration.
Also integrated upstream.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> magithub
  <span style="color: #81a2be;">:after</span> magit
  <span style="color: #81a2be;">:commands</span> (magithub-clone
             magithub-completion-enable)
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:ensure t</span>
  <span style="color: #81a2be;">:config</span>
  (magithub-feature-autoinject t)
  (<span style="color: #b294bb;">setq</span>
   magithub-clone-default-directory <span style="color: #b5bd68;">"$HOME/Git/Github/"</span>
   magithub-dir (<span style="color: #de935f;">concat</span> <span style="color: #cc6666;">doom-etc-dir</span> <span style="color: #b5bd68;">"magithub/"</span>)
   magithub-preferred-remote-method <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">clone_url</span>))
(<span style="color: #b294bb;">use-package!</span> evil-magit <span style="color: #81a2be;">:after</span> magit
              <span style="color: #81a2be;">:init</span>
              (<span style="color: #b294bb;">setq</span> evil-magit-state <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">normal</span>))
</pre>
</div>
</div>
</li>
<li><a id="org68c8820"></a><span class="todo HOLD">HOLD</span> Magit Delta<br />
<div class="outline-text-5" id="text-1-8-3-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> magit-delta
  <span style="color: #81a2be;">:if</span> (<span style="color: #de935f;">executable-find</span> <span style="color: #b5bd68;">"delta"</span>)
  <span style="color: #81a2be;">:hook</span> (<span style="color: #de935f;">magit-mode</span> . magit-delta-mode)
  <span style="color: #81a2be;">:config</span>
                                        <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">Kanged https://github.com/dandavison/magit-delta/issues/13</span>
  (<span style="color: #b294bb;">setq</span> magit-delta-delta-args (<span style="color: #de935f;">append</span> magit-delta-delta-args <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"magit-delta"</span>)))
                                        <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">Kanged https://github.com/dandavison/magit-delta/issues/15#issuecomment-865774240</span>
  (<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">hz/magit-delta-toggle</span> ()
    <span style="color: #717171;">"Toggle magit-delta-mode and refresh magit."</span>
    (<span style="color: #b294bb;">interactive</span>)
    (<span style="color: #b294bb;">progn</span>
      (<span style="color: #de935f;">call-interactively</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">magit-delta-mode</span>)
      (<span style="color: #de935f;">magit-refresh</span>)))
  <span style="color: #81a2be;">:general</span>
  (<span style="color: #81a2be;">:keymaps</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">magit-mode-map</span>
   <span style="color: #81a2be;">:states</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">normal</span>
   <span style="color: #81a2be;">:prefix</span> <span style="color: #b5bd68;">","</span>
   <span style="color: #b5bd68;">"t"</span> <span style="color: #c5c8c6;">'</span>(hz/magit-delta-toggle <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"toggle magit-delta"</span>))
  )
</pre>
</div>
<p>
Currently there are <a href="https://github.com/dandavison/magit-delta/issues/9">still performance issues</a>, which is why the <code>toggle</code>
keybinding is useful, however, there is a nicer workaround, simply disable for
larger diffs as <a href="https://github.com/dandavison/magit-delta/issues/9#issuecomment-795435781">described here</a>. Eventually this should be fixed somewhere else.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">defvar</span> <span style="color: #cc6666;">hz/magit-delta-point-max</span> 50000)
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Disable mode if there are too many characters</span>
(<span style="color: #de935f;">advice-add</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">magit-delta-call-delta-and-convert-ansi-escape-sequences</span> <span style="color: #81a2be;">:around</span>
            (<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">hz/magit-delta-colorize-maybe-a</span> (fn <span style="color: #f0c674;">&amp;rest</span> args)
              (<span style="color: #b294bb;">if</span> (<span style="color: #de935f;">&lt;=</span> (<span style="color: #de935f;">point-max</span>) <span style="color: #cc6666;">hz/magit-delta-point-max</span>)
                  (<span style="color: #de935f;">apply</span> fn args)
                (<span style="color: #81a2be;">magit-delta-mode</span> -1))))
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Re-enable mode after `</span><span style="color: #de935f;">magit-refresh</span><span style="color: #5a5b5a;">' if there aren't too many characters</span>
(<span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">magit-post-refresh-hook</span>
          (<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">hz/magit-enable-magit-delta-maybe-h</span> (<span style="color: #f0c674;">&amp;rest</span> _args)
            (<span style="color: #b294bb;">when</span> (<span style="color: #b294bb;">and</span> (<span style="color: #de935f;">not</span> magit-delta-mode)
                       (<span style="color: #de935f;">&lt;=</span> (<span style="color: #de935f;">point-max</span>) <span style="color: #cc6666;">hz/magit-delta-point-max</span>))
              (<span style="color: #81a2be;">magit-delta-mode</span> +1))))
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-org6d52db9" class="outline-4">
<h4 id="org6d52db9"><span class="section-number-4">1.8.4.</span> PDF Tools</h4>
<div class="outline-text-4" id="text-1-8-4">
<p>
These bindings are essentially part of <code>org-noter</code> however, they do not actually
need to be bound in <code>org-mode</code> files. Also updated to have <code>evil-colemak</code> bindings.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">after!</span> pdf-view
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">open pdfs scaled to fit page</span>
  (<span style="color: #b294bb;">setq-default</span> <span style="color: #cc6666;">pdf-view-display-size</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">fit-width</span>)
  (<span style="color: #b294bb;">add-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">pdf-view-mode-hook</span> (<span style="color: #cc6666;">evil-colemak-basics-mode</span> -1))
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">automatically annotate highlights</span>
  (<span style="color: #b294bb;">setq</span> pdf-annot-activate-created-annotations t
        <span style="color: #cc6666;">pdf-view-resize-factor</span> 1.1)
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">faster motion</span>
  (<span style="color: #b294bb;">map!</span>
   <span style="color: #81a2be;">:map</span> <span style="color: #cc6666;">pdf-view-mode-map</span>
   <span style="color: #81a2be;">:n</span> <span style="color: #b5bd68;">"g g"</span>          <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">pdf-view-first-page</span>
   <span style="color: #81a2be;">:n</span> <span style="color: #b5bd68;">"G"</span>            <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">pdf-view-last-page</span>
   <span style="color: #81a2be;">:n</span> <span style="color: #b5bd68;">"N"</span>            <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">pdf-view-next-page-command</span>
   <span style="color: #81a2be;">:n</span> <span style="color: #b5bd68;">"E"</span>            <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">pdf-view-previous-page-command</span>
   <span style="color: #81a2be;">:n</span> <span style="color: #b5bd68;">"e"</span>            <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">evil-collection-pdf-view-previous-line-or-previous-page</span>
   <span style="color: #81a2be;">:n</span> <span style="color: #b5bd68;">"n"</span>            <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">evil-collection-pdf-view-next-line-or-next-page</span>
   <span style="color: #81a2be;">:localleader</span>
   (<span style="color: #81a2be;">:prefix</span> <span style="color: #b5bd68;">"o"</span>
            (<span style="color: #81a2be;">:prefix</span> <span style="color: #b5bd68;">"n"</span>
             <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Insert"</span> <span style="color: #b5bd68;">"i"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-noter-insert-note</span>
             ))
   ))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org05c654d" class="outline-3">
<h3 id="org05c654d"><span class="section-number-3">1.9.</span> Anki Editor</h3>
<div class="outline-text-3" id="text-1-9">
<p>
This is for my favorite <a href="https://github.com/louietan/anki-editor">anki interaction</a> mechanism.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> anki-editor
  <span style="color: #81a2be;">:after</span> org-noter
  <span style="color: #81a2be;">:config</span>
  <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">I like making decks</span>
  (<span style="color: #b294bb;">setq</span> anki-editor-create-decks <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">t</span>))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd8967ab" class="outline-3">
<h3 id="orgd8967ab"><span class="section-number-3">1.10.</span> Org Additions</h3>
<div class="outline-text-3" id="text-1-10">
<p>
These are numerous and complicated enough to be in a segment of their own.
</p>
</div>
<div id="outline-container-org2e08834" class="outline-4">
<h4 id="org2e08834"><span class="section-number-4">1.10.1.</span> todo Modifications</h4>
<div class="outline-text-4" id="text-1-10-1">
<p>
I like having the date on my TODO items.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-log-done</span> <span style="color: #b5bd68;">"time"</span>
      <span style="color: #cc6666;">org-log-done-with-time</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">t</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org04669c3" class="outline-4">
<h4 id="org04669c3"><span class="section-number-4">1.10.2.</span> Ignore Support</h4>
<div class="outline-text-4" id="text-1-10-2">
<p>
For the longest time I was setting this per file for bizarre reasons. This makes much more sense.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> ox-extra
  <span style="color: #81a2be;">:after</span> org
  <span style="color: #81a2be;">:config</span>
  (<span style="color: #de935f;">ox-extras-activate</span> <span style="color: #c5c8c6;">'</span>(ignore-headlines))
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc047abe" class="outline-4">
<h4 id="orgc047abe"><span class="section-number-4">1.10.3.</span> File Handling</h4>
<div class="outline-text-4" id="text-1-10-3">
<p>
This controls what is used to open links in <code>org</code> documents. Since there are
only a few defaults defined, I am just prepending them to my changes instead of
dealing with <code>append</code> and stuff.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-file-apps</span>
  <span style="color: #c5c8c6;">'</span>((auto-mode . emacs)
    (<span style="color: #b5bd68;">"\\.mm\\'"</span> . default)
    (<span style="color: #b5bd68;">"\\.x?html?\\'"</span> . default)
    (<span style="color: #b5bd68;">"\\.pdf\\'"</span> . default)
    (<span style="color: #b5bd68;">"\\.png\\'"</span> . viewnior)
    (<span style="color: #b5bd68;">"\\.jpg\\'"</span> . viewnior)
    (<span style="color: #b5bd68;">"\\.svg\\'"</span> . viewnior)
    ))
</pre>
</div>
</div>
</div>
<div id="outline-container-org65c06fe" class="outline-4">
<h4 id="org65c06fe"><span class="section-number-4">1.10.4.</span> Ob-Mermaid</h4>
<div class="outline-text-4" id="text-1-10-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> mermaid-mode)
(<span style="color: #b294bb;">use-package!</span> ob-mermaid)
</pre>
</div>
</div>
</div>
<div id="outline-container-orga6c208d" class="outline-4">
<h4 id="orga6c208d"><span class="section-number-4">1.10.5.</span> <span class="done KILL">KILL</span> Ob-Julia</h4>
<div class="outline-text-4" id="text-1-10-5">
<p>
So <code>julia</code> support is inbuilt, however the process variable needs to be set:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span>  <span style="color: #cc6666;">inferior-julia-program-name</span> <span style="color: #b5bd68;">"/bin/julia"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-orge3fda28" class="outline-4">
<h4 id="orge3fda28"><span class="section-number-4">1.10.6.</span> Org Download</h4>
<div class="outline-text-4" id="text-1-10-6">
<p>
This is already included in the standard doom setup. However, I was having
trouble with relative exports so I have this one instead. Partially kanged from
<code>doom-emacs</code>.
Before setting this up, a new function is defined to call the screenshot process, this setup is <a href="https://github.com/poligen/dotfiles/blob/25785810f9bf98f6eec93e400c686a4ad65ac310/doom.d/config.el">kanged from here</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">From https://github.com/poligen/dotfiles/blob/25785810f9bf98f6eec93e400c686a4ad65ac310/doom.d/config.el</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">My customized org-download to incorporate flameshot gui Workaround to setup flameshot, which enables annotation.</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">In flameshot, set filename as "screenshot", and the command as "flameshot gui -p /tmp", so that we always ends up</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">with /tmp/screenshot.png. Nullify org-download-screenshot-method by setting it to `</span><span style="color: #de935f;">echo</span><span style="color: #5a5b5a;">', so that essentially we</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">are only calling (org-download-image org-download-screenshot-file).</span>
(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">hz-org-download-screenshot</span> ()
  <span style="color: #717171;">"Capture screenshot and insert the resulting file.</span>
<span style="color: #717171;">The screenshot tool is determined by `</span><span style="color: #de935f;">org-download-screenshot-method</span><span style="color: #717171;">'."</span>
  (<span style="color: #b294bb;">interactive</span>)
  (<span style="color: #b294bb;">let</span> ((tmp-file <span style="color: #b5bd68;">"/tmp/screenshot.png"</span>))
    (<span style="color: #de935f;">delete-file</span> tmp-file)
    (<span style="color: #de935f;">call-process-shell-command</span> <span style="color: #b5bd68;">"flameshot gui -p /tmp/"</span>)
    <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Because flameshot exit immediately, keep polling to check file existence</span>
    (<span style="color: #b294bb;">while</span> (<span style="color: #de935f;">not</span> (<span style="color: #de935f;">file-exists-p</span> tmp-file))
      (<span style="color: #de935f;">sleep-for</span> 2))
    (<span style="color: #de935f;">org-download-image</span> tmp-file)))
</pre>
</div>
<p>
Now we can configure the package itself.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> org-download
  <span style="color: #81a2be;">:after</span> org
  <span style="color: #81a2be;">:config</span>
  (<span style="color: #b294bb;">setq-default</span> <span style="color: #cc6666;">org-download-image-dir</span> <span style="color: #b5bd68;">"./images/"</span>
                <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">org-download-screenshot-method "flameshot gui --raw &gt; %s"</span>
                <span style="color: #cc6666;">org-download-delete-image-after-download</span> t
                <span style="color: #cc6666;">org-download-method</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">directory</span>
                <span style="color: #cc6666;">org-download-heading-lvl</span> 1
                <span style="color: #cc6666;">org-download-screenshot-file</span> <span style="color: #b5bd68;">"/tmp/screenshot.png"</span>
                )
  (<span style="color: #b294bb;">cond</span> ((<span style="color: #de935f;">featurep</span> <span style="color: #de935f;">:system</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">linux</span>)
         (<span style="color: #b294bb;">if</span> (<span style="color: #81a2be;">string-match-p</span> <span style="color: #b5bd68;">"wayland"</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"WAYLAND_DISPLAY"</span>))
             (<span style="color: #b294bb;">setq-default</span> <span style="color: #cc6666;">org-download-screenshot-method</span> <span style="color: #b5bd68;">"grim -g \"$(slurp)\" - &gt; %s"</span>)
           (<span style="color: #b294bb;">setq-default</span> <span style="color: #cc6666;">org-download-screenshot-method</span> <span style="color: #b5bd68;">"xclip -selection clipboard -t image/png -o &gt; %s"</span>)
           )
         )
        ((<span style="color: #de935f;">featurep</span> <span style="color: #de935f;">:system</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">macos</span>) (<span style="color: #b294bb;">setq-default</span> <span style="color: #cc6666;">org-download-screenshot-method</span> <span style="color: #b5bd68;">"screencapture -i %s"</span>)))
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-org8994607" class="outline-4">
<h4 id="org8994607"><span class="section-number-4">1.10.7.</span> Org Babel</h4>
<div class="outline-text-4" id="text-1-10-7">
<p>
Julia and Mathematica are not set. Other languages might also be needed here eventually.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">after!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org</span>
            (<span style="color: #de935f;">org-babel-do-load-languages</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-babel-load-languages</span>
                                         (<span style="color: #de935f;">append</span> <span style="color: #cc6666;">org-babel-load-languages</span>
                                                 <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">'((julia . t))</span>
                                                 <span style="color: #c5c8c6;">'</span>((mathematica . t))
                                                 <span style="color: #c5c8c6;">'</span>((ditaa . t))
                                                 ))
            )
(<span style="color: #b294bb;">setq</span> org-babel-mathematica-command <span style="color: #b5bd68;">"~/.local/bin/mash"</span>
      org-ditaa-jar-path (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"HOME"</span>) <span style="color: #b5bd68;">"/.local/bin/ditaa0_9.jar"</span>)
)
</pre>
</div>
</div>
</div>
<div id="outline-container-org958e90d" class="outline-4">
<h4 id="org958e90d"><span class="section-number-4">1.10.8.</span> Async Org Babel</h4>
<div class="outline-text-4" id="text-1-10-8">
<p>
From <a href="https://github.com/diadochos/org-babel-eval-in-repl">here</a>. Now we can configure this.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> org-babel-eval-in-repl
  <span style="color: #81a2be;">:after</span> org
  <span style="color: #81a2be;">:config</span>
  (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">eir-jump-after-eval</span> nil)
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-org370612f" class="outline-4">
<h4 id="org370612f"><span class="section-number-4">1.10.9.</span> Org Config</h4>
<div class="outline-text-4" id="text-1-10-9">
<p>
These are just variables I need to set to prevent things from dying.
</p>
</div>
<ol class="org-ol">
<li><a id="orgcaf24dd"></a>Highlighting LaTeX<br />
<div class="outline-text-5" id="text-1-10-9-1">
<p>
For better font-locking within orgmode.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span> org-latex-preview <span style="color: #c5c8c6;">'</span>(native latex script entities))
</pre>
</div>
</div>
</li>
<li><a id="orge45f67b"></a>Switching to XeLaTeX<br />
<div class="outline-text-5" id="text-1-10-9-2">
<p>
Since I use a lot of unicode math; it makes sense to switch from LaTeX to
XeLaTeX everywhere. This section borrows heavily from <a href="https://github.com/david-sawatzke/dotfiles/blob/80f9ffb265bf664623f5ad39f3a64771e90a402e/doom.d/config.el">here</a> and <a href="https://github.com/isfootaken/.emacs.d/blob/f2a3cd64c62ec1be544bdb8e2427a0e2fafcaf02/conf.org">here</a>. Might
possibly want to look <a href="https://github.com/isfootaken/emacs-org-config/blob/376f770d7427665fa1f8e691fd4c2316febcb41d/conf.org#org-latex-preview">at this</a> later too.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Set after the default-packages list anyway</span>
(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-latex-packages-alist</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">nil</span>)
(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-latex-default-packages-alist</span>
      <span style="color: #c5c8c6;">'</span>((<span style="color: #b5bd68;">"AUTO"</span> <span style="color: #b5bd68;">"inputenc"</span>  t (<span style="color: #b5bd68;">"pdflatex"</span>))
        (<span style="color: #b5bd68;">"T1"</span>   <span style="color: #b5bd68;">"fontenc"</span>   t (<span style="color: #b5bd68;">"pdflatex"</span>))
        (<span style="color: #b5bd68;">""</span>     <span style="color: #b5bd68;">"graphicx"</span>  t)
        (<span style="color: #b5bd68;">""</span>     <span style="color: #b5bd68;">"grffile"</span>   t)
        (<span style="color: #b5bd68;">""</span>     <span style="color: #b5bd68;">"minted"</span>   t)
        <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">("dvipsnames,svgnames*,x11names*,table"     "xcolor"   t)</span>
        (<span style="color: #b5bd68;">""</span>     <span style="color: #b5bd68;">"longtable"</span> nil)
        (<span style="color: #b5bd68;">""</span>     <span style="color: #b5bd68;">"wrapfig"</span>   nil)
        (<span style="color: #b5bd68;">""</span>     <span style="color: #b5bd68;">"rotating"</span>  nil)
        (<span style="color: #b5bd68;">"normalem"</span> <span style="color: #b5bd68;">"ulem"</span>  t)
        (<span style="color: #b5bd68;">""</span>     <span style="color: #b5bd68;">"amsmath"</span>   t)
        (<span style="color: #b5bd68;">""</span>     <span style="color: #b5bd68;">"amssymb"</span>   t)
        (<span style="color: #b5bd68;">""</span>     <span style="color: #b5bd68;">"unicode-math"</span>   t)
        (<span style="color: #b5bd68;">""</span>     <span style="color: #b5bd68;">"mathtools"</span>   t)
        (<span style="color: #b5bd68;">""</span>     <span style="color: #b5bd68;">"textcomp"</span>  t)
        (<span style="color: #b5bd68;">""</span>     <span style="color: #b5bd68;">"capt-of"</span>   nil)
        (<span style="color: #b5bd68;">""</span>     <span style="color: #b5bd68;">"hyperref"</span>  nil)))
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(add-to-list 'org-latex-default-packages-alist '("" "fontspec" t))</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(setq org-latex-inputenc-alist '(("utf8" . "utf8x")))</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(add-to-list 'org-latex-packages-alist '("" "unicode-math"))</span>
(<span style="color: #b294bb;">after!</span> org
  (<span style="color: #de935f;">plist-put</span> <span style="color: #cc6666;">org-format-latex-options</span> <span style="color: #81a2be;">:scale</span> 2.2)
  (<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-preview-latex-process-alist</span> <span style="color: #c5c8c6;">'</span>(dvixelatex <span style="color: #81a2be;">:programs</span>
                                                  (<span style="color: #b5bd68;">"xetex"</span> <span style="color: #b5bd68;">"convert"</span>)
                                                  <span style="color: #81a2be;">:description</span> <span style="color: #b5bd68;">"pdf &gt; png"</span> <span style="color: #81a2be;">:message</span> <span style="color: #b5bd68;">"you need to install the programs: xetex and imagemagick."</span> <span style="color: #81a2be;">:image-input-type</span> <span style="color: #b5bd68;">"pdf"</span> <span style="color: #81a2be;">:image-output-type</span> <span style="color: #b5bd68;">"png"</span> <span style="color: #81a2be;">:image-size-adjust</span>
                                                  (1.0 . 1.0)
                                                  <span style="color: #81a2be;">:latex-compiler</span>
                                                  (<span style="color: #b5bd68;">"xelatex -no-pdf -interaction nonstopmode -output-directory %o %f"</span>)
                                                  <span style="color: #81a2be;">:image-converter</span>
                                                  (<span style="color: #b5bd68;">"dvisvgm %f -n -b min -c %S -o %O"</span>)))

  (<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-preview-latex-process-alist</span> <span style="color: #c5c8c6;">'</span>(imagexetex <span style="color: #81a2be;">:programs</span>
                                                  (<span style="color: #b5bd68;">"xelatex"</span> <span style="color: #b5bd68;">"convert"</span>)
                                                  <span style="color: #81a2be;">:description</span> <span style="color: #b5bd68;">"pdf &gt; png"</span> <span style="color: #81a2be;">:message</span> <span style="color: #b5bd68;">"you need to install the programs: xelatex and imagemagick."</span> <span style="color: #81a2be;">:image-input-type</span> <span style="color: #b5bd68;">"pdf"</span> <span style="color: #81a2be;">:image-output-type</span> <span style="color: #b5bd68;">"png"</span> <span style="color: #81a2be;">:image-size-adjust</span>
                                                  (1.0 . 1.0)
                                                  <span style="color: #81a2be;">:latex-compiler</span>
                                                  (<span style="color: #b5bd68;">"xelatex -interaction nonstopmode -output-directory %o %f"</span>)
                                                  <span style="color: #81a2be;">:image-converter</span>
                                                  (<span style="color: #b5bd68;">"convert -density %D -trim -antialias %f -quality 100 %O"</span>)))
  )
</pre>
</div>
</div>
</li>
<li><a id="orgd8aac22"></a>Inline images<br />
<div class="outline-text-5" id="text-1-10-9-3">
<p>
These need to be disabled by default otherwise <code>emacs</code> stalls often. Also, it
turns out that <code>dvipng</code> has some bugs on my system, so Imagemagick works better,
once security policies have been adjusted in <code>/etc/ImageMagick-/policy.xml</code>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #b294bb;">after!</span> org
    (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-preview-latex-default-process</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">imagexetex</span>)
    (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-startup-with-inline-images</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">nil</span>)
    (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-image-actual-width</span> 400)
    )
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-org07d9757" class="outline-4">
<h4 id="org07d9757"><span class="section-number-4">1.10.10.</span> Org Latex Subfigure</h4>
<div class="outline-text-4" id="text-1-10-10">
<p>
This modified <a href="https://list.orgmode.org/orgmode/87mty1an66.fsf@posteo.net/">environment makes it easier</a> to work with reports.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #f0c674; font-weight: bold;">TODO:</span><span style="color: #5a5b5a;"> Figure out how to pass parameters other than width</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #f0c674; font-weight: bold;">TODO:</span><span style="color: #5a5b5a;"> Also make a subcaption label</span>
(<span style="color: #de935f;">org-link-set-parameters</span>
 <span style="color: #b5bd68;">"subfig"</span>
 <span style="color: #81a2be;">:follow</span> (<span style="color: #b294bb;">lambda</span> (file) (<span style="color: #de935f;">find-file</span> file))
 <span style="color: #81a2be;">:face</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #81a2be;">:foreground</span> <span style="color: #b5bd68;">"chocolate"</span> <span style="color: #81a2be;">:weight</span> bold <span style="color: #81a2be;">:underline</span> t)
 <span style="color: #81a2be;">:display</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">full</span>
 <span style="color: #81a2be;">:export</span> (<span style="color: #b294bb;">lambda</span> (file desc backend)
           (<span style="color: #b294bb;">when</span> (<span style="color: #de935f;">eq</span> backend <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">latex</span>)
             (<span style="color: #b294bb;">if</span> (<span style="color: #de935f;">string-match</span> <span style="color: #b5bd68;">"&gt;(</span><span style="color: #c5c8c6; font-weight: bold;">\\</span><span style="color: #c5c8c6; font-weight: bold;">(</span><span style="color: #b5bd68;">.+</span><span style="color: #c5c8c6; font-weight: bold;">\\</span><span style="color: #c5c8c6; font-weight: bold;">)</span><span style="color: #b5bd68;">)"</span> desc)
                 (<span style="color: #de935f;">concat</span> <span style="color: #b5bd68;">"\\begin{subfigure}[b]{"</span>
                         (<span style="color: #de935f;">match-string</span> 1 desc)
                         <span style="color: #b5bd68;">"}\\caption{"</span> (<span style="color: #de935f;">replace-regexp-in-string</span> <span style="color: #b5bd68;">"\s+&gt;(.+)"</span> <span style="color: #b5bd68;">""</span> desc) <span style="color: #b5bd68;">"}"</span>
                         <span style="color: #b5bd68;">"\\includegraphics"</span>
                         <span style="color: #b5bd68;">"["</span>
                         <span style="color: #b5bd68;">"width=\\textwidth"</span>
                         <span style="color: #b5bd68;">"]"</span>
                         <span style="color: #b5bd68;">"{"</span>
                         file
                         <span style="color: #b5bd68;">"}"</span>
                         <span style="color: #b5bd68;">"\\end{subfigure}"</span>
                         )
               (<span style="color: #de935f;">format</span> <span style="color: #b5bd68;">"\\begin{subfigure}[b]{\\textwidth}\\includegraphics{%s}\\caption{%s}\\end{subfigure}"</span> file desc)))))
</pre>
</div>
</div>
<ol class="org-ol">
<li><a id="orgb00b5cd"></a>Prevent invisible area modifications<br />
<div class="outline-text-5" id="text-1-10-10-1">
<p>
First <a href="https://yiufung.net/post/org-mode-hidden-gems-pt1/">discussed here</a>. The invisible area modifications are a plague. I can&rsquo;t imagine why this is not set by default.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-catch-invisible-edits</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">show-and-error</span>)
</pre>
</div>
</div>
</li>
<li><a id="orgb07fe2f"></a>Compact subtrees<br />
<div class="outline-text-5" id="text-1-10-10-2">
<p>
We would like to not have additional newlines between trees.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-cycle-separator-lines</span> 0)
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-org18ff7c0" class="outline-4">
<h4 id="org18ff7c0"><span class="section-number-4">1.10.11.</span> Org Rifle</h4>
<div class="outline-text-4" id="text-1-10-11">
<p>
This probably needs to be refactored later. Or loaded elsewhere.
The keymaps are defined in the following way:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> helm-org-rifle
  <span style="color: #81a2be;">:after</span> org
  <span style="color: #81a2be;">:general</span>
  (<span style="color: #81a2be;">:keymaps</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-mode-map</span>
   <span style="color: #81a2be;">:states</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">normal</span>
   <span style="color: #81a2be;">:prefix</span> <span style="color: #cc6666;">my-leader</span>
   <span style="color: #b5bd68;">"m r"</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #81a2be;">:ignore</span> t <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Rifle (Helm)"</span>)
   <span style="color: #b5bd68;">"m r b"</span> <span style="color: #c5c8c6;">'</span>(helm-org-rifle-current-buffer <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Rifle buffer"</span>)
   <span style="color: #b5bd68;">"m r e"</span> <span style="color: #c5c8c6;">'</span>(helm-org-rifle <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Rifle every open buffer"</span>)
   <span style="color: #b5bd68;">"m r d"</span> <span style="color: #c5c8c6;">'</span>(helm-org-rifle-directory <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Rifle from org-directory"</span>)
   <span style="color: #b5bd68;">"m r a"</span> <span style="color: #c5c8c6;">'</span>(helm-org-rifle-agenda-files <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Rifle agenda"</span>)
   <span style="color: #b5bd68;">"m r o"</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #81a2be;">:ignore</span> t <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Occur (Persistent)"</span>)
   <span style="color: #b5bd68;">"m r o b"</span> <span style="color: #c5c8c6;">'</span>(helm-org-rifle-current-buffer <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Rifle buffer"</span>)
   <span style="color: #b5bd68;">"m r o e"</span> <span style="color: #c5c8c6;">'</span>(helm-org-rifle <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Rifle every open buffer"</span>)
   <span style="color: #b5bd68;">"m r o d"</span> <span style="color: #c5c8c6;">'</span>(helm-org-rifle-directory <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Rifle from org-directory"</span>)
   <span style="color: #b5bd68;">"m r o a"</span> <span style="color: #c5c8c6;">'</span>(helm-org-rifle-agenda-files <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Rifle agenda"</span>)
   )
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-org7106926" class="outline-4">
<h4 id="org7106926"><span class="section-number-4">1.10.12.</span> Org Mind Map</h4>
<div class="outline-text-4" id="text-1-10-12">
<p>
<a href="https://github.com//theodorewiles/org-mind-map">This</a> is used to create <code>graphiz</code> graphs from <code>org-mode</code> stuff.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> org-mind-map
  <span style="color: #81a2be;">:general</span>
  (<span style="color: #81a2be;">:keymaps</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-mode-map</span>
   <span style="color: #81a2be;">:states</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">normal</span>
   <span style="color: #81a2be;">:prefix</span> <span style="color: #cc6666;">my-leader</span>
   <span style="color: #b5bd68;">"m e m"</span> <span style="color: #c5c8c6;">'</span>(org-mind-map-write <span style="color: #81a2be;">:wk</span> <span style="color: #b5bd68;">"Export mind-map"</span>) ))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgffc441c" class="outline-4">
<h4 id="orgffc441c"><span class="section-number-4">1.10.13.</span> Org Gantt</h4>
<div class="outline-text-4" id="text-1-10-13">
<p>
Useful TeX generator.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> org-gantt
 <span style="color: #81a2be;">:after</span> org)
</pre>
</div>
</div>
</div>
<div id="outline-container-org419c411" class="outline-4">
<h4 id="org419c411"><span class="section-number-4">1.10.14.</span> Org Drill</h4>
<div class="outline-text-4" id="text-1-10-14">
<p>
It makes sense to keep this around so as to leverage existing resources.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">(use-package! org-drill</span>
<span style="color: #5a5b5a;">;;  </span><span style="color: #5a5b5a;">:after org)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org66f7102" class="outline-4">
<h4 id="org66f7102"><span class="section-number-4">1.10.15.</span> Org Re-Reveal Additions</h4>
<div class="outline-text-4" id="text-1-10-15">
<p>
We will load a couple of helpers to get functionality closer to <a href="https://gitlab.com/oer/emacs-reveal/">emacs-reveal</a>.
This is apparently the <code>org-ref</code> for <code>org-re-reveal</code>. For themes (e.g.
<a href="https://revealjs-themes.dzello.com/robot-lung.html">robot-lung</a>), we have a new directory. We would also now keep a local copy of our <code>revealjs</code> setup.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">after!</span> org-re-reveal
  (<span style="color: #b294bb;">use-package!</span> org-re-reveal-ref) <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">fixes org-ref</span>
  (<span style="color: #b294bb;">setq</span> reveal-extras (<span style="color: #de935f;">concat</span> <span style="color: #cc6666;">doom-private-dir</span> <span style="color: #b5bd68;">"reveal/extras/"</span>)
        org-re-reveal-root (<span style="color: #de935f;">concat</span> <span style="color: #cc6666;">doom-private-dir</span> <span style="color: #b5bd68;">"reveal/rjs/"</span>)
        sfeir-root (<span style="color: #de935f;">concat</span> <span style="color: #cc6666;">doom-private-dir</span> <span style="color: #b5bd68;">"reveal/sfeir-school-theme/"</span>))
)
</pre>
</div>
<p>
Note that this needs to be updated manually since themes change.
</p>
</div>
</div>
<div id="outline-container-org0c29d43" class="outline-4">
<h4 id="org0c29d43"><span class="section-number-4">1.10.16.</span> Org GCal</h4>
<div class="outline-text-4" id="text-1-10-16">
<p>
Note that we configure this <a href="https://github.com/kidd/org-gcal.el">as per the README</a> in the private configuration since all of these are very personal.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> org-gcal)
</pre>
</div>
</div>
</div>
<div id="outline-container-org4cbaf18" class="outline-4">
<h4 id="org4cbaf18"><span class="section-number-4">1.10.17.</span> Hugo Settings</h4>
<div class="outline-text-4" id="text-1-10-17">
<p>
This should be set for everything. I like to keep the last modified date, but only consider things to be modified if 12 hours have passed.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-hugo-auto-set-lastmod</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">t</span>
      <span style="color: #cc6666;">org-hugo-section</span> <span style="color: #b5bd68;">"posts"</span>
      <span style="color: #cc6666;">org-hugo-suppress-lastmod-period</span> 43200.0
      <span style="color: #cc6666;">org-hugo-export-creator-string</span> <span style="color: #b5bd68;">"Emacs 26.3 (Org mode 9.4 + ox-hugo + HaoZeke)"</span>
)
</pre>
</div>
</div>
</div>
<div id="outline-container-org951f351" class="outline-4">
<h4 id="org951f351"><span class="section-number-4">1.10.18.</span> Citeproc</h4>
<div class="outline-text-4" id="text-1-10-18">
<p>
I also like to have rational and numbered citations.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">after!</span> ox-hugo
  (<span style="color: #b294bb;">use-package!</span> citeproc-org
    <span style="color: #81a2be;">:config</span>
    (<span style="color: #de935f;">citeproc-org-setup</span>)
    (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">citeproc-org-org-bib-header</span> <span style="color: #b5bd68;">"* References\n"</span>)
    )
  )
</pre>
</div>
<p>
We will now lower the heading to the appropriate level. This is <a href="https://github.com/TimQuelch/emacs.d/blob/5c7b80890830d6833031a197801b7c6246f2e50e/config.org">kanged from TimQuelch</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">after!</span> citeproc-org
  (<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">hz/min-headline-level</span> ()
    (<span style="color: #b294bb;">--&gt;</span> (<span style="color: #de935f;">org-element-parse-buffer</span>)
         (<span style="color: #de935f;">org-element-map</span> it <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">headline</span> (<span style="color: #de935f;">apply-partially</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-element-property</span> <span style="color: #81a2be;">:level</span>))
         (<span style="color: #b294bb;">or</span> it <span style="color: #c5c8c6;">'</span>(0))
         (<span style="color: #de935f;">-min</span> it)))

  (<span style="color: #b294bb;">defadvice!</span> hz/citeproc-org-render-references (orig <span style="color: #f0c674;">&amp;rest</span> args)
    <span style="color: #81a2be;">:around</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">citeproc-org-render-references</span>
    (<span style="color: #b294bb;">let*</span> ((minlevel (<span style="color: #81a2be;">hz/min-headline-level</span>))
           (totallevel (<span style="color: #de935f;">max</span> 1 minlevel))
           (<span style="color: #cc6666;">citeproc-org-org-bib-header</span> (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">make-string</span> totallevel ?*)
                                                (<span style="color: #de935f;">string-trim-left</span> <span style="color: #cc6666;">citeproc-org-org-bib-header</span> <span style="color: #b5bd68;">"\\**"</span>))))
      (<span style="color: #de935f;">apply</span> orig args))))
</pre>
</div>
</div>
</div>
<div id="outline-container-orged7013a" class="outline-4">
<h4 id="orged7013a"><span class="section-number-4">1.10.19.</span> CalcTeX</h4>
<div class="outline-text-4" id="text-1-10-19">
<p>
Writing <code>TeX</code> math can be painful, in-spite of all the unicode and other fancy tricks. <a href="https://github.com/johnbcoughlin/calctex">This</a> makes things a lot more feasible. Some of the configuration is directly lifted from <a href="https://tecosaur.github.io/emacs-config/config.html#calctex">Tecosaur&rsquo;s configuration</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> calctex
  <span style="color: #81a2be;">:commands</span> calctex-mode
  <span style="color: #81a2be;">:init</span>
  (<span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">calc-mode-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calctex-mode</span>)
  <span style="color: #81a2be;">:config</span>
  (<span style="color: #b294bb;">setq</span> calctex-additional-latex-packages <span style="color: #b5bd68;">"</span>
<span style="color: #b5bd68;">\\usepackage[usenames]{xcolor}</span>
<span style="color: #b5bd68;">\\usepackage{soul}</span>
<span style="color: #b5bd68;">\\usepackage{adjustbox}</span>
<span style="color: #b5bd68;">\\usepackage{amsmath}</span>
<span style="color: #b5bd68;">\\usepackage{amssymb}</span>
<span style="color: #b5bd68;">\\usepackage{siunitx}</span>
<span style="color: #b5bd68;">\\usepackage{cancel}</span>
<span style="color: #b5bd68;">\\usepackage{mathtools}</span>
<span style="color: #b5bd68;">\\usepackage{mathalpha}</span>
<span style="color: #b5bd68;">\\usepackage{xparse}</span>
<span style="color: #b5bd68;">\\usepackage{arevmath}"</span>
        calctex-additional-latex-macros
        (<span style="color: #de935f;">concat</span> calctex-additional-latex-macros
                <span style="color: #b5bd68;">"\n\\let\\evalto\\Rightarrow"</span>))
  (<span style="color: #b294bb;">defadvice!</span> no-messaging-a (orig-fn <span style="color: #f0c674;">&amp;rest</span> args)
    <span style="color: #81a2be;">:around</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calctex-default-dispatching-render-process</span>
    (<span style="color: #b294bb;">let</span> ((<span style="color: #cc6666;">inhibit-message</span> t) <span style="color: #cc6666;">message-log-max</span>)
      (<span style="color: #de935f;">apply</span> orig-fn args)))
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Fix hardcoded dvichop path (whyyyyyyy)</span>
  (<span style="color: #b294bb;">let</span> ((vendor-folder (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">file-truename</span> <span style="color: #cc6666;">doom-local-dir</span>)
                               <span style="color: #b5bd68;">"straight/"</span>
                               (<span style="color: #de935f;">format</span> <span style="color: #b5bd68;">"build-%s"</span> <span style="color: #cc6666;">emacs-version</span>)
                               <span style="color: #b5bd68;">"/calctex/vendor/"</span>)))
    (<span style="color: #b294bb;">setq</span> calctex-dvichop-sty (<span style="color: #de935f;">concat</span> vendor-folder <span style="color: #b5bd68;">"texd/dvichop"</span>)
          calctex-dvichop-bin (<span style="color: #de935f;">concat</span> vendor-folder <span style="color: #b5bd68;">"texd/dvichop"</span>)))
  (<span style="color: #b294bb;">unless</span> (<span style="color: #de935f;">file-exists-p</span> calctex-dvichop-bin)
    (<span style="color: #de935f;">message</span> <span style="color: #b5bd68;">"CalcTeX: Building dvichop binary"</span>)
    (<span style="color: #b294bb;">let</span> ((<span style="color: #cc6666;">default-directory</span> (<span style="color: #de935f;">file-name-directory</span> calctex-dvichop-bin)))
      (<span style="color: #de935f;">call-process</span> <span style="color: #b5bd68;">"make"</span> nil nil nil))))
</pre>
</div>
<p>
Now we would like also to have a sidebar for working in the embedded mode.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">defvar</span> <span style="color: #cc6666;">calc-embedded-trail-window</span> nil)
(<span style="color: #b294bb;">defvar</span> <span style="color: #cc6666;">calc-embedded-calculator-window</span> nil)

(<span style="color: #b294bb;">defadvice!</span> calc-embedded-with-side-pannel (<span style="color: #f0c674;">&amp;rest</span> _)
  <span style="color: #81a2be;">:after</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calc-do-embedded</span>
  (<span style="color: #b294bb;">when</span> <span style="color: #cc6666;">calc-embedded-trail-window</span>
    (<span style="color: #b294bb;">ignore-errors</span>
      (<span style="color: #de935f;">delete-window</span> <span style="color: #cc6666;">calc-embedded-trail-window</span>))
    (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">calc-embedded-trail-window</span> nil))
  (<span style="color: #b294bb;">when</span> <span style="color: #cc6666;">calc-embedded-calculator-window</span>
    (<span style="color: #b294bb;">ignore-errors</span>
      (<span style="color: #de935f;">delete-window</span> <span style="color: #cc6666;">calc-embedded-calculator-window</span>))
    (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">calc-embedded-calculator-window</span> nil))
  (<span style="color: #b294bb;">when</span> (<span style="color: #b294bb;">and</span> calc-embedded-info
             (<span style="color: #de935f;">&gt;</span> (<span style="color: #de935f;">*</span> (<span style="color: #de935f;">window-width</span>) (<span style="color: #de935f;">window-height</span>)) 1200))
    (<span style="color: #b294bb;">let</span> ((main-window (<span style="color: #de935f;">selected-window</span>))
          (vertical-p (<span style="color: #de935f;">&gt;</span> (<span style="color: #de935f;">window-width</span>) 80)))
      (<span style="color: #de935f;">select-window</span>
       (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">calc-embedded-trail-window</span>
             (<span style="color: #b294bb;">if</span> vertical-p
                 (<span style="color: #de935f;">split-window-horizontally</span> (<span style="color: #de935f;">-</span> (<span style="color: #de935f;">max</span> 30 (<span style="color: #de935f;">/</span> (<span style="color: #de935f;">window-width</span>) 3))))
               (<span style="color: #de935f;">split-window-vertically</span> (<span style="color: #de935f;">-</span> (<span style="color: #de935f;">max</span> 8 (<span style="color: #de935f;">/</span> (<span style="color: #de935f;">window-height</span>) 4)))))))
      (<span style="color: #de935f;">switch-to-buffer</span> <span style="color: #b5bd68;">"*Calc Trail*"</span>)
      (<span style="color: #de935f;">select-window</span>
       (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">calc-embedded-calculator-window</span>
             (<span style="color: #b294bb;">if</span> vertical-p
                 (<span style="color: #de935f;">split-window-vertically</span> -6)
               (<span style="color: #de935f;">split-window-horizontally</span> (<span style="color: #de935f;">-</span> (<span style="color: #de935f;">/</span> (<span style="color: #de935f;">window-width</span>) 2))))))
      (<span style="color: #de935f;">switch-to-buffer</span> <span style="color: #b5bd68;">"*Calculator*"</span>)
      (<span style="color: #de935f;">select-window</span> main-window))))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orge955a77" class="outline-3">
<h3 id="orge955a77"><span class="section-number-3">1.11.</span> Syntax Highlighting</h3>
<div class="outline-text-3" id="text-1-11">
<p>
This section is for setting up major modes for various file formats which are
typically non-standard. These are matched by extensions.
</p>
</div>
<div id="outline-container-orgbb45d98" class="outline-4">
<h4 id="orgbb45d98"><span class="section-number-4">1.11.1.</span> <span class="todo TODO">TODO</span> Misc Highlighting</h4>
<div class="outline-text-4" id="text-1-11-1">
</div>
<ol class="org-ol">
<li><a id="org6913e8d"></a>Direnv<br />
<div class="outline-text-5" id="text-1-11-1-1">
<p>
<code>direnv</code> is essentially a specialized bash script. Until I have time to make a
proper font locking mode for it, this should suffice.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">auto-mode-alist</span> (<span style="color: #de935f;">append</span> <span style="color: #c5c8c6;">'</span>((<span style="color: #b5bd68;">"\\.envrc$"</span> . shell-script-mode))
                              <span style="color: #cc6666;">auto-mode-alist</span>))
</pre>
</div>
</div>
</li>
<li><a id="orgc9cf01b"></a>Vim<br />
<div class="outline-text-5" id="text-1-11-1-2">
<p>
I still keep my <code>vim</code> dotfiles up to date&#x2026;
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> vimrc-mode
  <span style="color: #81a2be;">:mode</span> <span style="color: #b5bd68;">"\\.vimrc\\'"</span>)
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-org40aceac" class="outline-4">
<h4 id="org40aceac"><span class="section-number-4">1.11.2.</span> CPP Additions</h4>
<div class="outline-text-4" id="text-1-11-2">
</div>
<ol class="org-ol">
<li><a id="org4741999"></a>Doxygen Support<br />
<div class="outline-text-5" id="text-1-11-2-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> highlight-doxygen
  <span style="color: #81a2be;">:hook</span> ((<span style="color: #de935f;">c-mode</span> c++-mode) . highlight-doxygen-mode))
</pre>
</div>
</div>
</li>
<li><a id="org488ee0b"></a>More Files<br />
<div class="outline-text-5" id="text-1-11-2-2">
<p>
<code>inl</code> files are often used for extended header definitions.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">auto-mode-alist</span> (<span style="color: #de935f;">append</span> <span style="color: #c5c8c6;">'</span>(
                                (<span style="color: #b5bd68;">"\\.C$"</span> . c++-mode)
                                (<span style="color: #b5bd68;">"\\.cc$"</span> . c++-mode)
                                (<span style="color: #b5bd68;">"\\.cpp$"</span> . c++-mode)
                                (<span style="color: #b5bd68;">"\\.inl$"</span> . c++-mode)
                                (<span style="color: #b5bd68;">"\\.H$"</span> . c++-mode)
                                (<span style="color: #b5bd68;">"\\.hh$"</span> . c++-mode)
                                (<span style="color: #b5bd68;">"\\.hpp$"</span> . c++-mode)
                                )
                              <span style="color: #cc6666;">auto-mode-alist</span>))
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-org4a142f9" class="outline-4">
<h4 id="org4a142f9"><span class="section-number-4">1.11.3.</span> Fortran</h4>
<div class="outline-text-4" id="text-1-11-3">
<p>
By default, <code>fortran-mode</code> is used for <code>f90</code> files which is less than ideal.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">auto-mode-alist</span> (<span style="color: #de935f;">append</span> <span style="color: #c5c8c6;">'</span>(
                                (<span style="color: #b5bd68;">"\\.f\\'"</span> . fortran-mode)
                                (<span style="color: #b5bd68;">"\\.f77\\'"</span> . fortran-mode)
                                (<span style="color: #b5bd68;">"\\.f90\\'"</span> . f90-mode)
                                (<span style="color: #b5bd68;">"\\.F90\\'"</span> . f90-mode)
                                )
                              <span style="color: #cc6666;">auto-mode-alist</span>))
</pre>
</div>
</div>
</div>
<div id="outline-container-org3b5a7ad" class="outline-4">
<h4 id="org3b5a7ad"><span class="section-number-4">1.11.4.</span> Quarto</h4>
<div class="outline-text-4" id="text-1-11-4">
<p>
Not a fan, but is still occasionally useful.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> quarto-mode)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf796d32" class="outline-4">
<h4 id="orgf796d32"><span class="section-number-4">1.11.5.</span> Meson</h4>
<div class="outline-text-4" id="text-1-11-5">
<p>
Mostly used with <code>cpp</code> files.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> meson-mode
  <span style="color: #81a2be;">:mode</span> <span style="color: #b5bd68;">"\\.build\\'"</span>
  <span style="color: #81a2be;">:config</span>
  (<span style="color: #b294bb;">add-hook!</span><span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">meson-mode-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">company-mode</span>)
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-org7690c17" class="outline-4">
<h4 id="org7690c17"><span class="section-number-4">1.11.6.</span> <code>xonsh</code> Mode</h4>
<div class="outline-text-4" id="text-1-11-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> xonsh-mode
  <span style="color: #81a2be;">:mode</span> <span style="color: #b5bd68;">"\\.xsh\\'"</span>
  <span style="color: #81a2be;">:config</span>
  (<span style="color: #b294bb;">add-hook!</span><span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">xonsh-mode-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">company-mode</span>)
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc5eb3e1" class="outline-4">
<h4 id="orgc5eb3e1"><span class="section-number-4">1.11.7.</span> PKGBUILD Mode</h4>
<div class="outline-text-4" id="text-1-11-7">
<p>
This is the non <code>doom</code> way of loading this.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #de935f;">autoload</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">pkgbuild-mode</span> <span style="color: #b5bd68;">"pkgbuild-mode.el"</span> <span style="color: #717171;">"PKGBUILD mode."</span> t)
(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">auto-mode-alist</span> (<span style="color: #de935f;">append</span> <span style="color: #c5c8c6;">'</span>((<span style="color: #b5bd68;">"/PKGBUILD$"</span> . pkgbuild-mode))
                              <span style="color: #cc6666;">auto-mode-alist</span>))
</pre>
</div>
<p>
I use <code>doom</code>. So.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> pkgbuild-mode
  <span style="color: #81a2be;">:mode</span> <span style="color: #b5bd68;">"\\PKGBUILD"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd424930" class="outline-4">
<h4 id="orgd424930"><span class="section-number-4">1.11.8.</span> LAMMPS Mode</h4>
<div class="outline-text-4" id="text-1-11-8">
</div>
<ol class="org-ol">
<li><a id="orgc828c19"></a>No doom setup<br />
<div class="outline-text-5" id="text-1-11-8-1">
<p>
For most users.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #de935f;">autoload</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">lammps-mode</span> <span style="color: #b5bd68;">"lammps-mode.el"</span> <span style="color: #717171;">"LAMMPS mode."</span> t)
(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">auto-mode-alist</span> (<span style="color: #de935f;">append</span>
                              <span style="color: #c5c8c6;">'</span>((<span style="color: #b5bd68;">"in\\.'"</span> . lammps-mode))
                              <span style="color: #c5c8c6;">'</span>((<span style="color: #b5bd68;">"\\.lmp\\'"</span> . lammps-mode))
                              <span style="color: #cc6666;">auto-mode-alist</span>
                              ))
</pre>
</div>
</div>
</li>
<li><a id="orgefd99b6"></a>Doom Version<br />
<div class="outline-text-5" id="text-1-11-8-2">
<p>
With macros.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> lammps-mode)
(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">auto-mode-alist</span> (<span style="color: #de935f;">append</span>
                              <span style="color: #c5c8c6;">'</span>((<span style="color: #b5bd68;">"in\\.'"</span> . lammps-mode))
                              <span style="color: #c5c8c6;">'</span>((<span style="color: #b5bd68;">"\\.lmp\\'"</span> . lammps-mode))
                              <span style="color: #cc6666;">auto-mode-alist</span>
                              ))
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-orgb31afb3" class="outline-4">
<h4 id="orgb31afb3"><span class="section-number-4">1.11.9.</span> Pug Mode</h4>
<div class="outline-text-4" id="text-1-11-9">
<p>
Need better font locking everywhere.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> pug-mode
  <span style="color: #81a2be;">:mode</span> <span style="color: #b5bd68;">"\\.pug\\'"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org695311b" class="outline-4">
<h4 id="org695311b"><span class="section-number-4">1.11.10.</span> Conf Mode Files</h4>
<div class="outline-text-4" id="text-1-11-10">
<p>
The <code>rc</code> files are usually encountered while building android stuff. They are handled
well by <code>conf-mode</code>. Turns out that <code>vmd</code> files also look just like <code>conf-mode</code> things&#x2026;
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">auto-mode-alist</span>
             (<span style="color: #de935f;">append</span>
             <span style="color: #c5c8c6;">'</span>((<span style="color: #b5bd68;">"\\.rc\\'"</span> . conf-mode))
             <span style="color: #c5c8c6;">'</span>((<span style="color: #b5bd68;">"\\.vmd\\'"</span> . conf-mode))
             <span style="color: #cc6666;">auto-mode-alist</span>
             ))
</pre>
</div>
</div>
</div>
<div id="outline-container-org34a2507" class="outline-4">
<h4 id="org34a2507"><span class="section-number-4">1.11.11.</span> JVM Languages</h4>
<div class="outline-text-4" id="text-1-11-11">
<p>
Since <code>java+meghnada</code>, <code>clojure</code>, and <code>scala</code> are covered by the standard <code>doom</code> config,
the rest of these need to be loaded here.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> kotlin-mode
  <span style="color: #81a2be;">:mode</span> <span style="color: #b5bd68;">"\\.kt\\'"</span>)

(<span style="color: #b294bb;">use-package!</span> groovy-mode
  <span style="color: #81a2be;">:mode</span> <span style="color: #b5bd68;">"\\.groovy\\'"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org3e99107" class="outline-4">
<h4 id="org3e99107"><span class="section-number-4">1.11.12.</span> Systemd</h4>
<div class="outline-text-4" id="text-1-11-12">
<p>
For all those user-units.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> systemd
  <span style="color: #81a2be;">:mode</span> <span style="color: #b5bd68;">"\\.service\\'"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org1744e22" class="outline-4">
<h4 id="org1744e22"><span class="section-number-4">1.11.13.</span> Dart Mode</h4>
<div class="outline-text-4" id="text-1-11-13">
<p>
Dart seems like a rather fun C-like language. Sort of fallen on the wayside what
with Golang and what not but still might be worth a shot.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> dart-mode
  <span style="color: #81a2be;">:mode</span> <span style="color: #b5bd68;">"\\.dart\\'"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org2d84b0b" class="outline-4">
<h4 id="org2d84b0b"><span class="section-number-4">1.11.14.</span> SaltStack</h4>
<div class="outline-text-4" id="text-1-11-14">
<p>
I like having spell checks for everything.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Load it</span>
(<span style="color: #b294bb;">use-package!</span> salt-mode
  <span style="color: #81a2be;">:config</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Flyspell</span>
(<span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">salt-mode-hook</span>
        (<span style="color: #b294bb;">lambda</span> ()
            (<span style="color: #cc6666;">flyspell-mode</span> 1))))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgdd20523" class="outline-4">
<h4 id="orgdd20523"><span class="section-number-4">1.11.15.</span> Mathematica</h4>
<div class="outline-text-4" id="text-1-11-15">
<p>
Apparently, <a href="https://github.com/kawabata/wolfram-mode">wolfram-mode</a> is the best for syntax highlighting.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Load it</span>
(<span style="color: #b294bb;">use-package!</span> wolfram-mode
  <span style="color: #81a2be;">:config</span>
  (<span style="color: #b294bb;">setq</span> mathematica-command-line <span style="color: #b5bd68;">"~/.local/bin/mash"</span>)
  (<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-src-lang-modes</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"mathematica"</span> . wolfram)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org69b254e" class="outline-4">
<h4 id="org69b254e"><span class="section-number-4">1.11.16.</span> Snakemake</h4>
<div class="outline-text-4" id="text-1-11-16">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> snakemake-mode
  <span style="color: #81a2be;">:mode</span> <span style="color: #b5bd68;">"\\.smk"</span>
)
(<span style="color: #b294bb;">after!</span> nickel-mode
  (<span style="color: #81a2be;">set-formatter!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">snakefmt</span>
    <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"nickel"</span> <span style="color: #b5bd68;">"format"</span>)
    <span style="color: #81a2be;">:modes</span> <span style="color: #c5c8c6;">'</span>(snakemake-mode))
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-org99c4b1a" class="outline-4">
<h4 id="org99c4b1a"><span class="section-number-4">1.11.17.</span> CapnProto</h4>
<div class="outline-text-4" id="text-1-11-17">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> capnp-mode
    <span style="color: #81a2be;">:mode</span> <span style="color: #b5bd68;">"\\.capnp"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfd06649" class="outline-4">
<h4 id="orgfd06649"><span class="section-number-4">1.11.18.</span> Nushell</h4>
<div class="outline-text-4" id="text-1-11-18">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> nushell-mode
    <span style="color: #81a2be;">:mode</span> <span style="color: #b5bd68;">"\\.nu"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd7e9961" class="outline-4">
<h4 id="orgd7e9961"><span class="section-number-4">1.11.19.</span> Nickel</h4>
<div class="outline-text-4" id="text-1-11-19">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> nickel-mode
  <span style="color: #81a2be;">:mode</span> <span style="color: #b5bd68;">"\\.ncl"</span>
  )
(<span style="color: #b294bb;">after!</span> nickel-mode
  (<span style="color: #81a2be;">set-formatter!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">nickelfmt</span>
    <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"nickel"</span> <span style="color: #b5bd68;">"format"</span>)
    <span style="color: #81a2be;">:modes</span> <span style="color: #c5c8c6;">'</span>(nickel-mode))
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-org661bdc8" class="outline-4">
<h4 id="org661bdc8"><span class="section-number-4">1.11.20.</span> Meson</h4>
<div class="outline-text-4" id="text-1-11-20">
<p>
There is in built support for <code>meson</code> but it has no registered formatter.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">after!</span> meson-mode
  (<span style="color: #81a2be;">set-formatter!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">mesonfmt</span>
    <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"meson"</span> <span style="color: #b5bd68;">"format"</span>)
    <span style="color: #81a2be;">:modes</span> <span style="color: #c5c8c6;">'</span>(meson-mode))
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-org7445355" class="outline-4">
<h4 id="org7445355"><span class="section-number-4">1.11.21.</span> Astro</h4>
<div class="outline-text-4" id="text-1-11-21">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(setq treesit-language-source-alist</span>
<span style="color: #5a5b5a;">;;       </span><span style="color: #5a5b5a;">'((astro "https://github.com/virchau13/tree-sitter-astro")</span>
<span style="color: #5a5b5a;">;;         </span><span style="color: #5a5b5a;">(css "https://github.com/tree-sitter/tree-sitter-css")</span>
<span style="color: #5a5b5a;">;;         </span><span style="color: #5a5b5a;">(tsx "https://github.com/tree-sitter/tree-sitter-typescript" "master" "tsx/src")))</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(mapc #'treesit-install-language-grammar '(astro css tsx))</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(use-package! astro-ts-mode</span>
<span style="color: #5a5b5a;">;;     </span><span style="color: #5a5b5a;">:mode "\\.astro")</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org3a7fce2" class="outline-3">
<h3 id="org3a7fce2"><span class="section-number-3">1.12.</span> Aesthetics</h3>
<div class="outline-text-3" id="text-1-12">
</div>
<div id="outline-container-org9e5d378" class="outline-4">
<h4 id="org9e5d378"><span class="section-number-4">1.12.1.</span> Wakatime</h4>
<div class="outline-text-4" id="text-1-12-1">
<p>
Was removed from the core <code>modules</code> of <code>doom-emacs</code>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> <span style="color: #cc6666;">wakatime-mode</span>
  <span style="color: #81a2be;">:config</span>
  (<span style="color: #b294bb;">cond</span> ((<span style="color: #de935f;">featurep</span> <span style="color: #de935f;">:system</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">linux</span>) (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">wakatime-cli-path</span> <span style="color: #b5bd68;">"/usr/bin/wakatime"</span>))
        ((<span style="color: #de935f;">featurep</span> <span style="color: #de935f;">:system</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">macos</span>) (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">wakatime-cli-path</span> <span style="color: #b5bd68;">"/usr/local/bin/wakatime-cli"</span>)) <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">We assume homebrew</span>
        )
  )
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgaf9bbfa" class="outline-3">
<h3 id="orgaf9bbfa"><span class="section-number-3">1.13.</span> Dockerfile Mode</h3>
<div class="outline-text-3" id="text-1-13">
<p>
<a href="https://github.com/spotify/dockerfile-mode">This</a> package from spotify has support for building things as well as
highlighting Dockerfiles.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> dockerfile-mode
  <span style="color: #81a2be;">:mode</span> <span style="color: #b5bd68;">"Dockerfile\\'"</span>
  <span style="color: #81a2be;">:config</span>
  (<span style="color: #de935f;">put</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">dockerfile-image-name</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">safe-local-variable</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">stringp</span>)
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-org668d982" class="outline-3">
<h3 id="org668d982"><span class="section-number-3">1.14.</span> Functions</h3>
<div class="outline-text-3" id="text-1-14">
</div>
<div id="outline-container-orge362658" class="outline-4">
<h4 id="orge362658"><span class="section-number-4">1.14.1.</span> Org-Export HTML with useful IDs</h4>
<div class="outline-text-4" id="text-1-14-1">
<p>
This minor mode <a href="https://github.com/alphapapa/unpackaged.el#export-to-html-with-useful-anchors">from here</a> is crucial to having sane <code>reveal-js</code> slides which don&rsquo;t keep jumping back to the title slide on every export.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">define-minor-mode</span> <span style="color: #cc6666;">unpackaged/org-export-html-with-useful-ids-mode</span>
  <span style="color: #717171;">"Attempt to export Org as HTML with useful link IDs.</span>
<span style="color: #717171;">Instead of random IDs like \"#orga1b2c3\", use heading titles,</span>
<span style="color: #717171;">made unique when necessary."</span>
  <span style="color: #81a2be;">:global</span> t
  (<span style="color: #b294bb;">if</span> <span style="color: #cc6666;">unpackaged/org-export-html-with-useful-ids-mode</span>
      (<span style="color: #de935f;">advice-add</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-export-get-reference</span> <span style="color: #81a2be;">:override</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">unpackaged/org-export-get-reference</span>)
    (<span style="color: #de935f;">advice-remove</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-export-get-reference</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">unpackaged/org-export-get-reference</span>)))

(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">unpackaged/org-export-get-reference</span> (datum info)
  <span style="color: #717171;">"Like `</span><span style="color: #de935f;">org-export-get-reference</span><span style="color: #717171;">', except uses heading titles instead of random numbers."</span>
  (<span style="color: #b294bb;">let</span> ((cache (<span style="color: #de935f;">plist-get</span> info <span style="color: #81a2be;">:internal-references</span>)))
    (<span style="color: #b294bb;">or</span> (<span style="color: #de935f;">car</span> (<span style="color: #de935f;">rassq</span> datum cache))
        (<span style="color: #b294bb;">let*</span> ((crossrefs (<span style="color: #de935f;">plist-get</span> info <span style="color: #81a2be;">:crossrefs</span>))
               (cells (<span style="color: #de935f;">org-export-search-cells</span> datum))
               <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Preserve any pre-existing association between</span>
               <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">a search cell and a reference, i.e., when some</span>
               <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">previously published document referenced a location</span>
               <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">within current file (see</span>
               <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">`</span><span style="color: #de935f;">org-publish-resolve-external-link</span><span style="color: #5a5b5a;">').</span>
               <span style="color: #5a5b5a;">;;</span>
               <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">However, there is no guarantee that search cells are</span>
               <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">unique, e.g., there might be duplicate custom ID or</span>
               <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">two headings with the same title in the file.</span>
               <span style="color: #5a5b5a;">;;</span>
               <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">As a consequence, before re-using any reference to</span>
               <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">an element or object, we check that it doesn't refer</span>
               <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">to a previous element or object.</span>
               (new (<span style="color: #b294bb;">or</span> (<span style="color: #de935f;">cl-some</span>
                         (<span style="color: #b294bb;">lambda</span> (cell)
                           (<span style="color: #b294bb;">let</span> ((stored (<span style="color: #de935f;">cdr</span> (<span style="color: #de935f;">assoc</span> cell crossrefs))))
                             (<span style="color: #b294bb;">when</span> stored
                               (<span style="color: #b294bb;">let</span> ((old (<span style="color: #de935f;">org-export-format-reference</span> stored)))
                                 (<span style="color: #b294bb;">and</span> (<span style="color: #de935f;">not</span> (<span style="color: #de935f;">assoc</span> old cache)) stored)))))
                         cells)
                        (<span style="color: #b294bb;">when</span> (<span style="color: #de935f;">org-element-property</span> <span style="color: #81a2be;">:raw-value</span> datum)
                          <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Heading with a title</span>
                          (<span style="color: #81a2be;">unpackaged/org-export-new-title-reference</span> datum cache))
                        <span style="color: #5a5b5a;">;; </span><span style="color: #b5bd68; font-weight: bold;">NOTE:</span><span style="color: #5a5b5a;"> This probably breaks some Org Export</span>
                        <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">feature, but if it does what I need, fine.</span>
                        (<span style="color: #de935f;">org-export-format-reference</span>
                         (<span style="color: #de935f;">org-export-new-reference</span> cache))))
               (reference-string new))
          <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Cache contains both data already associated to</span>
          <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">a reference and in-use internal references, so as to make</span>
          <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">unique references.</span>
          (<span style="color: #b294bb;">dolist</span> (cell cells) (<span style="color: #b294bb;">push</span> (<span style="color: #de935f;">cons</span> cell new) cache))
          <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Retain a direct association between reference string and</span>
          <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">DATUM since (1) not every object or element can be given</span>
          <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">a search cell (2) it permits quick lookup.</span>
          (<span style="color: #b294bb;">push</span> (<span style="color: #de935f;">cons</span> reference-string datum) cache)
          (<span style="color: #de935f;">plist-put</span> info <span style="color: #81a2be;">:internal-references</span> cache)
          reference-string))))

(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">unpackaged/org-export-new-title-reference</span> (datum cache)
  <span style="color: #717171;">"Return new reference for DATUM that is unique in CACHE."</span>
  (<span style="color: #b294bb;">cl-macrolet</span> ((inc-suffixf (place)
                  <span style="color: #c5c8c6;">`</span>(<span style="color: #b294bb;">progn</span>
                     (<span style="color: #de935f;">string-match</span> (<span style="color: #b294bb;">rx</span> bos
                                       (minimal-match (group (<span style="color: #de935f;">1+</span> anything)))
                                       (optional <span style="color: #b5bd68;">"--"</span> (group (<span style="color: #de935f;">1+</span> digit)))
                                       eos)
                                   ,place)
                     <span style="color: #5a5b5a;">;; </span><span style="color: #de935f; font-weight: bold;">HACK:</span><span style="color: #5a5b5a;"> `</span><span style="color: #de935f;">s1</span><span style="color: #5a5b5a;">' instead of a gensym.</span>
                     (<span style="color: #b294bb;">-let*</span> (((s1 suffix) (<span style="color: #de935f;">list</span> (<span style="color: #de935f;">match-string</span> 1 ,place)
                                                (<span style="color: #de935f;">match-string</span> 2 ,place)))
                             (suffix (<span style="color: #b294bb;">if</span> suffix
                                         (<span style="color: #de935f;">string-to-number</span> suffix)
                                       0)))
                       (<span style="color: #b294bb;">setf</span> ,place (<span style="color: #de935f;">format</span> <span style="color: #b5bd68;">"%s--%s"</span> s1 (<span style="color: #b294bb;">cl-incf</span> suffix)))))))
    (<span style="color: #b294bb;">let*</span> ((title (<span style="color: #de935f;">org-element-property</span> <span style="color: #81a2be;">:raw-value</span> datum))
           (ref (<span style="color: #de935f;">url-hexify-string</span> (<span style="color: #de935f;">substring-no-properties</span> title)))
           (parent (<span style="color: #de935f;">org-element-property</span> <span style="color: #81a2be;">:parent</span> datum)))
      (<span style="color: #b294bb;">while</span> (<span style="color: #b294bb;">--any</span> (<span style="color: #de935f;">equal</span> ref (<span style="color: #de935f;">car</span> it))
                    cache)
        <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Title not unique: make it so.</span>
        (<span style="color: #b294bb;">if</span> parent
            <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Append ancestor title.</span>
            (<span style="color: #b294bb;">setf</span> title (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">org-element-property</span> <span style="color: #81a2be;">:raw-value</span> parent)
                                <span style="color: #b5bd68;">"--"</span> title)
                  ref (<span style="color: #de935f;">url-hexify-string</span> (<span style="color: #de935f;">substring-no-properties</span> title))
                  parent (<span style="color: #de935f;">org-element-property</span> <span style="color: #81a2be;">:parent</span> parent))
          <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">No more ancestors: add and increment a number.</span>
          (inc-suffixf ref)))
      ref)))

</pre>
</div>
</div>
</div>
<div id="outline-container-org1f85e33" class="outline-4">
<h4 id="org1f85e33"><span class="section-number-4">1.14.2.</span> Org-mode export pdf when saved</h4>
<div class="outline-text-4" id="text-1-14-2">
<p>
This one is to generate pdfs whenever a buffer is saved. Mainly taken from
<a href="https:emacs.stackexchange.com/questions/9893/how-can-i-export-to-latex-every-time-i-save-an-org-mode-buffer">this stack exchange question</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">Pdf</span>
(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">haozeke/org-save-and-export-pdf</span> ()
  (<span style="color: #b294bb;">if</span> (<span style="color: #de935f;">eq</span> <span style="color: #cc6666;">major-mode</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-mode</span>)
    (<span style="color: #de935f;">org-latex-export-to-pdf</span> <span style="color: #81a2be;">:async</span> t)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org5e8d90b" class="outline-4">
<h4 id="org5e8d90b"><span class="section-number-4">1.14.3.</span> Org-mode export koma-letter</h4>
<div class="outline-text-4" id="text-1-14-3">
<p>
Since the <code>koma-letter</code> backend is separate, this needs a function as well.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">haozeke/org-save-and-export-koma-letter-pdf</span> ()
  (<span style="color: #b294bb;">if</span> (<span style="color: #de935f;">eq</span> <span style="color: #cc6666;">major-mode</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-mode</span>)
    (<span style="color: #de935f;">org-koma-letter-export-to-pdf</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org0834fff" class="outline-4">
<h4 id="org0834fff"><span class="section-number-4">1.14.4.</span> Org-mode export TeX</h4>
<div class="outline-text-4" id="text-1-14-4">
<p>
Similar to the one above, but <code>tex</code> generation is much faster and this way I can
keep editing my files without waiting for it to finish creating the <code>pdf</code>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">LaTeX</span>
(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">haozeke/org-save-and-export-latex</span> ()
  (<span style="color: #b294bb;">interactive</span>)
  (<span style="color: #b294bb;">if</span> (<span style="color: #de935f;">eq</span> <span style="color: #cc6666;">major-mode</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-mode</span>)
    (<span style="color: #de935f;">org-latex-export-to-latex</span> t)))
(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">haozeke/org-save-and-export-beamer</span> ()
  (<span style="color: #b294bb;">interactive</span>)
  (<span style="color: #b294bb;">if</span> (<span style="color: #de935f;">eq</span> <span style="color: #cc6666;">major-mode</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-mode</span>)
    (<span style="color: #81a2be;">org-beamer-export-to-latex</span> t)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org0ca5da5" class="outline-4">
<h4 id="org0ca5da5"><span class="section-number-4">1.14.5.</span> Org-mode clear results</h4>
<div class="outline-text-4" id="text-1-14-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Kanged from https://emacs.stackexchange.com/a/51378/19155</span>
(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">hz-clear-all-results</span> ()
  <span style="color: #717171;">"Clear all results in the buffer."</span>
  (<span style="color: #b294bb;">interactive</span>)
  (<span style="color: #b294bb;">save-excursion</span>
    (<span style="color: #de935f;">goto-char</span> (<span style="color: #de935f;">point-min</span>))
    (<span style="color: #b294bb;">while</span> (<span style="color: #de935f;">org-babel-next-src-block</span>)
      (<span style="color: #de935f;">org-babel-remove-result</span>))))
</pre>
</div>
</div>
</div>
<div id="outline-container-org94d2e14" class="outline-4">
<h4 id="org94d2e14"><span class="section-number-4">1.14.6.</span> <span class="todo TODO">TODO</span> Caveats</h4>
<div class="outline-text-4" id="text-1-14-6">
<ul class="org-ul">
<li>Minted needs to be setup.</li>
<li>There are really a lot of optimizations to the above.</li>
</ul>
</div>
</div>
<div id="outline-container-org585bffc" class="outline-4">
<h4 id="org585bffc"><span class="section-number-4">1.14.7.</span> Helper function</h4>
<div class="outline-text-4" id="text-1-14-7">
<p>
Figure out if I can replicate this some other way. Taken from <a href="https://github.com/sam217pa/emacs-config">sam217pa&rsquo;s github repo</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp" id="org5dfe99c"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">this function is used to append multiple elements to the list 'ox-latex</span>
(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">append-to-list</span> (list-var elements)
  <span style="color: #717171;">"Append ELEMENTS to the end of LIST-VAR. The return value is the new value of LIST-VAR."</span>
  (<span style="color: #b294bb;">unless</span> (<span style="color: #de935f;">consp</span> elements) (<span style="color: #de935f;">error</span> <span style="color: #b5bd68;">"ELEMENTS must be a list"</span>))
  (<span style="color: #b294bb;">let</span> ((<span style="color: #de935f;">list</span> (<span style="color: #de935f;">symbol-value</span> list-var)))
    (<span style="color: #b294bb;">if</span> list
        (<span style="color: #de935f;">setcdr</span> (<span style="color: #de935f;">last</span> list) elements)
      (<span style="color: #de935f;">set</span> list-var elements)))
(<span style="color: #de935f;">symbol-value</span> list-var))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcacd587" class="outline-4">
<h4 id="orgcacd587"><span class="section-number-4">1.14.8.</span> Async Command without Buffers</h4>
<div class="outline-text-4" id="text-1-14-8">
<p>
This supresses the output window. Useful for when I do async exports. From <a href="https://stackoverflow.com/questions/13901955/how-to-avoid-pop-up-of-async-shell-command-buffer-in-emacs">this question</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">async-shell-command-no-window</span>
    (command)
  (<span style="color: #b294bb;">interactive</span>)
  (<span style="color: #b294bb;">let</span>
      ((<span style="color: #cc6666;">display-buffer-alist</span>
        (<span style="color: #de935f;">list</span>
         (<span style="color: #de935f;">cons</span>
          <span style="color: #b5bd68;">"\\*Async Shell Command\\*.*"</span>
          (<span style="color: #de935f;">cons</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">display-buffer-no-window</span> nil)))))
    (<span style="color: #de935f;">async-shell-command</span>
     command)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org846ba65" class="outline-4">
<h4 id="org846ba65"><span class="section-number-4">1.14.9.</span> Better Rust Formatting</h4>
<div class="outline-text-4" id="text-1-14-9">
<p>
Some of these are kanged <a href="https://github.com/jaybosamiya/dotfiles/blob/master/doom-emacs/.config/doom/config.el">from here</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #b294bb;">setq</span> rustic-format-on-save t
        <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">rustfmt uses `--edition 2015` by default. For now, 2021 seems to be a</span>
        <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">reasonable alternative.</span>
        rustic-rustfmt-args <span style="color: #b5bd68;">"--edition 2021"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb9c79fa" class="outline-4">
<h4 id="orgb9c79fa"><span class="section-number-4">1.14.10.</span> Smarter Clang Formatting</h4>
<div class="outline-text-4" id="text-1-14-10">
<p>
This is taken from <a href="https://eklitzke.org/smarter-emacs-clang-format">this blog</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">haozeke/clang-format-buffer-conditional</span> ()
(<span style="color: #b294bb;">interactive</span>)
  <span style="color: #b5bd68;">"Reformat buffer if .clang-format exists in the projectile root."</span>
  (<span style="color: #b294bb;">when</span> (<span style="color: #de935f;">f-exists?</span> (<span style="color: #de935f;">expand-file-name</span> <span style="color: #b5bd68;">".clang-format"</span> (<span style="color: #cc6666;">projectile-project-root</span>)))
    (<span style="color: #de935f;">+format/buffer</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org63d7bdc" class="outline-4">
<h4 id="org63d7bdc"><span class="section-number-4">1.14.11.</span> Org-mode export to Markdown</h4>
<div class="outline-text-4" id="text-1-14-11">
<p>
This is a convinience function for working with <code>nanoc</code>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">haozeke/org-pandoc-markdown</span> (dir <span style="color: #f0c674;">&amp;optional</span> pargs)
  <span style="color: #717171;">"A wrapper to generate yaml metadata markdown files. Takes the output</span>
<span style="color: #717171;">  directory followed by pandoc arguments"</span>
  (<span style="color: #b294bb;">if</span> (<span style="color: #de935f;">not</span> (<span style="color: #de935f;">file-exists-p</span> dir)) (<span style="color: #de935f;">make-directory</span> dir))
  (<span style="color: #81a2be;">async-shell-command-no-window</span>
   (<span style="color: #de935f;">concat</span> <span style="color: #b5bd68;">"pandoc -f org -t markdown -s "</span> pargs <span style="color: #b5bd68;">" "</span> (<span style="color: #de935f;">buffer-name</span>) <span style="color: #b5bd68;">" -o "</span>
           dir <span style="color: #b5bd68;">"/"</span> (<span style="color: #de935f;">file-name-sans-extension</span> (<span style="color: #de935f;">buffer-name</span>)) <span style="color: #b5bd68;">".md"</span>))
    )
</pre>
</div>
</div>
</div>
<div id="outline-container-org7ec5fcf" class="outline-4">
<h4 id="org7ec5fcf"><span class="section-number-4">1.14.12.</span> <span class="todo TODO">TODO</span> Smartparens Wrapping</h4>
<div class="outline-text-4" id="text-1-14-12">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Make this conditional and only when <code>+smartparens</code> is active</li>
</ul>
<p>
This is to define some more wrapping functions I use often (for markdown and
org-mode inline code):
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">sp-wrap-backtick</span> ()
  <span style="color: #717171;">"Wrap following sexp in backticks."</span>
  (<span style="color: #b294bb;">interactive</span>)
  (<span style="color: #de935f;">sp-wrap-with-pair</span> <span style="color: #b5bd68;">"`"</span>))
(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">sp-wrap-tilda</span> ()
  <span style="color: #717171;">"Wrap following sexp in tildes."</span>
  (<span style="color: #b294bb;">interactive</span>)
  (<span style="color: #de935f;">sp-wrap-with-pair</span> <span style="color: #b5bd68;">"~"</span>))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgacd88b6" class="outline-4">
<h4 id="orgacd88b6"><span class="section-number-4">1.14.13.</span> Sort words</h4>
<div class="outline-text-4" id="text-1-14-13">
<p>
From the Emacs Wiki.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">sort-words</span> (<span style="color: #de935f;">reverse</span> beg end)
  <span style="color: #717171;">"Sort words in region alphabetically, in REVERSE if negative.</span>
<span style="color: #717171;">Prefixed with negative \\[</span><span style="color: #de935f;">universal-argument</span><span style="color: #717171;">], sorts in reverse.</span>

<span style="color: #717171;">The variable `</span><span style="color: #de935f;">sort-fold-case</span><span style="color: #717171;">' determines whether alphabetic case</span>
<span style="color: #717171;">affects the sort order.</span>

<span style="color: #717171;">See `</span><span style="color: #de935f;">sort-regexp-fields</span><span style="color: #717171;">'."</span>
  (<span style="color: #b294bb;">interactive</span> <span style="color: #b5bd68;">"*P\nr"</span>)
  (<span style="color: #81a2be;">sort-regexp-fields</span> reverse <span style="color: #b5bd68;">"\\w+"</span> <span style="color: #b5bd68;">"\\&amp;"</span> beg end))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb388b50" class="outline-4">
<h4 id="orgb388b50"><span class="section-number-4">1.14.14.</span> <code>doas</code> helpers</h4>
<div class="outline-text-4" id="text-1-14-14">
<p>
<code>doom-emacs</code> comes with <code>sudo</code> support, these are <a href="https://github.com/doomemacs/doomemacs/blob/559e5b6a966fa82bf8322f89d78a00ef4181812a/lisp/lib/files.el#L487">simply clones</a> with <code>doas</code> instead.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">doom--doas-file-path</span> (file)
  (<span style="color: #b294bb;">let</span> ((host (<span style="color: #b294bb;">or</span> (<span style="color: #de935f;">file-remote-p</span> file <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">host</span>) <span style="color: #b5bd68;">"localhost"</span>)))
    (<span style="color: #de935f;">concat</span> <span style="color: #b5bd68;">"/"</span> (<span style="color: #b294bb;">when</span> (<span style="color: #de935f;">file-remote-p</span> file)
                  (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">file-remote-p</span> file <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">method</span>) <span style="color: #b5bd68;">":"</span>
                          (<span style="color: #b294bb;">if-let</span> (user (<span style="color: #de935f;">file-remote-p</span> file <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">user</span>))
                              (<span style="color: #de935f;">concat</span> user <span style="color: #b5bd68;">"@"</span> host)
                            host)
                          <span style="color: #b5bd68;">"|"</span>))
            <span style="color: #b5bd68;">"doas:root@"</span> host
            <span style="color: #b5bd68;">":"</span> (<span style="color: #b294bb;">or</span> (<span style="color: #de935f;">file-remote-p</span> file <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">localname</span>)
                    file))))

(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">doom/doas-find-file</span> (file <span style="color: #f0c674;">&amp;optional</span> arg)
  <span style="color: #717171;">"Open FILE as root.</span>

<span style="color: #717171;">This will prompt you to save the current buffer, unless prefix ARG is given, in</span>
<span style="color: #717171;">which case it will save it without prompting."</span>
  (<span style="color: #b294bb;">interactive</span>
   (<span style="color: #de935f;">list</span> (<span style="color: #de935f;">read-file-name</span> <span style="color: #b5bd68;">"Open file as root: "</span>)
         <span style="color: #cc6666;">current-prefix-arg</span>))
  <span style="color: #5a5b5a;">;; </span><span style="color: #de935f; font-weight: bold;">HACK:</span><span style="color: #5a5b5a;"> Teach `</span><span style="color: #de935f;">save-place</span><span style="color: #5a5b5a;">' to treat the new "remote" buffer as if it were</span>
  <span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">visiting the same local file (because it is), and preserve the cursor</span>
  <span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">position as usual.</span>
  (<span style="color: #b294bb;">letf!</span> ((<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">remote-local-name</span> (path)
            (<span style="color: #b294bb;">if</span> path (<span style="color: #b294bb;">or</span> (<span style="color: #de935f;">file-remote-p</span> path <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">localname</span>) path)))
          (<span style="color: #b294bb;">defmacro</span> <span style="color: #81a2be;">with-local-name</span> (<span style="color: #f0c674;">&amp;rest</span> body)
            <span style="color: #c5c8c6;">`</span>(<span style="color: #b294bb;">when</span> <span style="color: #cc6666;">save-place-mode</span>
               (<span style="color: #b294bb;">let</span> ((<span style="color: #cc6666;">buffer-file-name</span> (remote-local-name <span style="color: #cc6666;">buffer-file-name</span>))
                     (<span style="color: #cc6666;">default-directory</span> (remote-local-name <span style="color: #cc6666;">default-directory</span>)))
                 ,@body))))
    (<span style="color: #b294bb;">let</span> ((<span style="color: #de935f;">window-start</span> (<span style="color: #de935f;">window-start</span>))
          (buffer (<span style="color: #de935f;">current-buffer</span>)))
      (<span style="color: #b294bb;">when</span> (<span style="color: #b294bb;">and</span> <span style="color: #cc6666;">buffer-file-name</span> (<span style="color: #de935f;">file-equal-p</span> <span style="color: #cc6666;">buffer-file-name</span> file))
        (<span style="color: #b294bb;">when</span> (<span style="color: #de935f;">buffer-modified-p</span>)
          (<span style="color: #de935f;">save-some-buffers</span> arg (<span style="color: #b294bb;">lambda</span> () (<span style="color: #de935f;">eq</span> (<span style="color: #de935f;">current-buffer</span>) buffer))))
        (with-local-name (<span style="color: #de935f;">save-place-to-alist</span>)))
      (<span style="color: #b294bb;">prog1</span>
          <span style="color: #5a5b5a;">;; </span><span style="color: #de935f; font-weight: bold;">HACK:</span><span style="color: #5a5b5a;"> Disable auto-save in temporary tramp buffers because it could</span>
          <span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">trigger processes that hang silently in the background, making</span>
          <span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">those buffers inoperable for the rest of that session (Tramp</span>
          <span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">caches them).</span>
          (<span style="color: #b294bb;">let</span> ((<span style="color: #cc6666;">auto-save-default</span> nil)
                <span style="color: #5a5b5a;">;; </span><span style="color: #b294bb; font-weight: bold;">REVIEW:</span><span style="color: #5a5b5a;"> use only these when we drop 28 support</span>
                (<span style="color: #cc6666;">remote-file-name-inhibit-auto-save</span> t)
                (<span style="color: #cc6666;">remote-file-name-inhibit-auto-save-visited</span> t)
                <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Prevent redundant work</span>
                <span style="color: #cc6666;">save-place-mode</span>)
            (<span style="color: #de935f;">find-file</span> (<span style="color: #81a2be;">doom--doas-file-path</span> (<span style="color: #de935f;">expand-file-name</span> file))))
        <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Record of the cursor's old position if it isn't at BOB (indicating</span>
        <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">this buffer was already open), in case the user wishes to go to it.</span>
        (<span style="color: #b294bb;">unless</span> (<span style="color: #de935f;">bobp</span>)
          (<span style="color: #81a2be;">doom-set-jump-h</span>)
          <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">save-place-find-file-hook requires point be a BOB to do its thang.</span>
          (<span style="color: #de935f;">goto-char</span> (<span style="color: #de935f;">point-min</span>)))
        (with-local-name (<span style="color: #de935f;">save-place-find-file-hook</span>))
        (<span style="color: #de935f;">set-window-start</span> nil window-start)))))
(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">doom/doas-this-file</span> ()
  <span style="color: #717171;">"Open the current file as root on Alpine Linux."</span>
  (<span style="color: #b294bb;">interactive</span>)
  (<span style="color: #81a2be;">doom/doas-find-file</span>
   (<span style="color: #b294bb;">or</span> (<span style="color: #cc6666;">buffer-file-name</span> (<span style="color: #de935f;">buffer-base-buffer</span>))
       (<span style="color: #b294bb;">when</span> (<span style="color: #b294bb;">or</span> (<span style="color: #de935f;">derived-mode-p</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">dired-mode</span>)
                 (<span style="color: #de935f;">derived-mode-p</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">wdired-mode</span>))
         <span style="color: #cc6666;">default-directory</span>)
       (<span style="color: #de935f;">user-error</span> <span style="color: #b5bd68;">"Current buffer isn't visiting a file"</span>))))

(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">doom/doas-save-buffer</span> ()
  <span style="color: #717171;">"Save this file as root on Alpine Linux."</span>
  (<span style="color: #b294bb;">interactive</span>)
  (<span style="color: #b294bb;">let</span> ((file (<span style="color: #81a2be;">doom--doas-file-path</span> (<span style="color: #cc6666;">buffer-file-name</span> (<span style="color: #de935f;">buffer-base-buffer</span>)))))
    (<span style="color: #b294bb;">if-let</span> (buffer (<span style="color: #de935f;">find-file-noselect</span> file))
        (<span style="color: #b294bb;">let</span> ((origin (<span style="color: #de935f;">current-buffer</span>)))
          (<span style="color: #de935f;">copy-to-buffer</span> buffer (<span style="color: #de935f;">point-min</span>) (<span style="color: #de935f;">point-max</span>))
          (<span style="color: #b294bb;">unwind-protect</span>
              (<span style="color: #b294bb;">with-current-buffer</span> buffer
                (<span style="color: #de935f;">save-buffer</span>))
            (<span style="color: #b294bb;">unless</span> (<span style="color: #de935f;">eq</span> origin buffer)
              (<span style="color: #de935f;">kill-buffer</span> buffer))
            (<span style="color: #b294bb;">with-current-buffer</span> origin
              (<span style="color: #de935f;">revert-buffer</span> t t))))
      (<span style="color: #de935f;">user-error</span> <span style="color: #b5bd68;">"Unable to open %S"</span> file))))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org4850132" class="outline-3">
<h3 id="org4850132"><span class="section-number-3">1.15.</span> Chat Clients</h3>
<div class="outline-text-3" id="text-1-15">
</div>
<div id="outline-container-org3a80a58" class="outline-4">
<h4 id="org3a80a58"><span class="section-number-4">1.15.1.</span> Matrix</h4>
<div class="outline-text-4" id="text-1-15-1">
<p>
Configuring the only <code>emacs</code> chat client I use.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(use-package! matrix-client</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">:init</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">:commands matrix-client-connect)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org08d3c6e" class="outline-3">
<h3 id="org08d3c6e"><span class="section-number-3">1.16.</span> Projects</h3>
<div class="outline-text-3" id="text-1-16">
<p>
These are to help setup org-mode workflows.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">Make sure it's not set before adding to it</span>
(<span style="color: #b294bb;">unless</span> (<span style="color: #de935f;">boundp</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-publish-project-alist</span>)
  (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-publish-project-alist</span> nil))
</pre>
</div>
</div>
<div id="outline-container-org9b4b4f4" class="outline-4">
<h4 id="org9b4b4f4"><span class="section-number-4">1.16.1.</span> dotDoom</h4>
<div class="outline-text-4" id="text-1-16-1">
<p>
This is used to generate plain HTML for my <a href="https://github.com/HaoZeke/dotDoom">dotDoom repo</a>. The setup is taken from
the <a href="https://orgmode.org/worg/org-tutorials/org-publish-html-tutorial.html#fn.3">worg documentation</a> and <a href="https://github.com/shishougang/wiki/blob/gh-pages/src/notes-init.el">this repository</a>. It so turns out that we can host the
entire thing from the master branch on GitHub, but only if it is in a <code>docs/</code>
subfolder&#x2026; Plus <code>org-html-export-to-html</code> does not accept filenames which was
a real bummer.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">dotDoom stuff</span>
<span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">This is a rather harmless useful variable</span>
(<span style="color: #b294bb;">setq</span> dotdoom-root-dir <span style="color: #b5bd68;">"~/.config/doom/"</span>)
(<span style="color: #b294bb;">setq</span> dotdoom-publish-dir  (<span style="color: #de935f;">concat</span> dotdoom-root-dir <span style="color: #b5bd68;">"docs"</span>))
</pre>
</div>
<p>
Now that the variables are set, we can move on to actually setting up the rest
of the export, this includes my own analytics and stuff. Infact maybe the
analytics would be better handled by offloading the damn thing to <a href="https://netlify.com">Netlify</a>,
though their recent changes to the TOS are worrying, so Microsoft owned GitHub
seems to be the better option for now.
</p>
</div>
<ol class="org-ol">
<li><a id="orgfaafe74"></a>Org Setup<br />
<div class="outline-text-5" id="text-1-16-1-1">
<p>
It turns out that each part of the site which needs a separate publish function
needs to be added to the <code>org-publish-project-alist</code> so we will define each rule.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-publish-project-alist</span>
             <span style="color: #c5c8c6;">`</span>(<span style="color: #b5bd68;">"dotdoom-org"</span>
               <span style="color: #81a2be;">:base-directory</span> ,dotdoom-root-dir
               <span style="color: #81a2be;">:publishing-directory</span> ,dotdoom-publish-dir
               <span style="color: #81a2be;">:base-extension</span> <span style="color: #b5bd68;">"org"</span>
               <span style="color: #81a2be;">:infojs-opt</span> <span style="color: #b5bd68;">"view:t toc:t ltoc:t mouse:underline buttons:0 path:https://thomasf.github.io/solarized-css/org-info.min.js"</span>
               <span style="color: #81a2be;">:html-head</span> <span style="color: #b5bd68;">"&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"https://thomasf.github.io/solarized-css/solarized-dark.min.css\" /&gt;"</span>
               <span style="color: #81a2be;">:recursive</span> t
               <span style="color: #81a2be;">:publishing-function</span> org-html-publish-to-html
               <span style="color: #81a2be;">:auto-index</span> nil <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">I make my own from the readme.org</span>
               <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:html-head-include-default-style nil ; supresses the rest</span>
               <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:index-filename "README.org"</span>
               <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:index-title "index"</span>
               <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:auto-sitemap t                ; Generate sitemap.org automagically...</span>
               <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:sitemap-filename "index.org"  ; ... call it sitemap.org (it's the default)...</span>
               <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:sitemap-title "index"         ; ... with title '</span><span style="color: #de935f;">sitemap</span><span style="color: #5a5b5a;">'.</span>
               <span style="color: #81a2be;">:link-home</span> <span style="color: #b5bd68;">"index.html"</span>))
</pre>
</div>
</div>
</li>
<li><a id="org6820601"></a>Static Content<br />
<div class="outline-text-5" id="text-1-16-1-2">
<p>
We will at the very least need the <code>.txt</code> files to be transferred as is for
keybase.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-publish-project-alist</span>
      <span style="color: #c5c8c6;">`</span>(<span style="color: #b5bd68;">"dotdoom-static"</span>
         <span style="color: #81a2be;">:base-directory</span> ,dotdoom-root-dir
         <span style="color: #81a2be;">:publishing-directory</span> ,dotdoom-publish-dir
         <span style="color: #81a2be;">:base-extension</span> <span style="color: #b5bd68;">"txt"</span>
         <span style="color: #81a2be;">:recursive</span> nil
         <span style="color: #81a2be;">:publishing-function</span> org-publish-attachment))
</pre>
</div>
</div>
</li>
<li><a id="orge267191"></a>Inherit and Combine<br />
<div class="outline-text-5" id="text-1-16-1-3">
<p>
Now we compose the previous projects, keeping in mind the fact that they are in the
LTR order of preference.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-publish-project-alist</span>
      <span style="color: #c5c8c6;">`</span>(<span style="color: #b5bd68;">"dotdoom"</span>
        <span style="color: #81a2be;">:components</span> (<span style="color: #b5bd68;">"dotdoom-org"</span> <span style="color: #b5bd68;">"dotdoom-static"</span>)
        ))
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-org2a5a207" class="outline-4">
<h4 id="org2a5a207"><span class="section-number-4">1.16.2.</span> Firestarter</h4>
<div class="outline-text-4" id="text-1-16-2">
<p>
Since I switched to <a href="https://rgoswami.me/posts/nix-r-devtools/">using Nix for R</a> I needed a way to reload my system-wide
<code>config.nix</code> <a href="https://depp.brause.cc/firestarter/">firestarter</a> is the best of the auto-exec in my opinion, and would
probably replace a lot of my other hooks eventually as well.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> <span style="color: #cc6666;">firestarter</span>
  <span style="color: #81a2be;">:init</span>
  (<span style="color: #cc6666;">firestarter-mode</span>)
  <span style="color: #81a2be;">:config</span>
  (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">firestarter-default-type</span> t)
)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org0cebc70" class="outline-3">
<h3 id="org0cebc70"><span class="section-number-3">1.17.</span> Hooks</h3>
<div class="outline-text-3" id="text-1-17">
</div>
<div id="outline-container-org4cf40df" class="outline-4">
<h4 id="org4cf40df"><span class="section-number-4">1.17.1.</span> <span class="todo TODO">TODO</span> Caveats</h4>
<div class="outline-text-4" id="text-1-17-1">
<p>
Move all the hooks to this section if possible.
</p>
</div>
</div>
<div id="outline-container-orgfaaa9e4" class="outline-4">
<h4 id="orgfaaa9e4"><span class="section-number-4">1.17.2.</span> Out of Focus Hook</h4>
<div class="outline-text-4" id="text-1-17-2">
<p>
Similar to <code>neovim</code> and its <code>set autowrite</code> and <code>au FocusLost * update</code>:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Save on focus lost (The frame's focus that is...)</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(defun save-all ()</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">(interactive)</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">(save-some-buffers t))</span>

<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(add-hook 'focus-out-hook 'save-all)</span>
</pre>
</div>
<p>
From <a href="https://github.com/madstap/emacs/blob/master/customizations/editing.el">here</a>.
</p>
</div>
</div>
<div id="outline-container-org815bf53" class="outline-4">
<h4 id="org815bf53"><span class="section-number-4">1.17.3.</span> Before Save Hooks</h4>
<div class="outline-text-4" id="text-1-17-3">
</div>
<ol class="org-ol">
<li><a id="orga825dec"></a>CC Mode<br />
<div class="outline-text-5" id="text-1-17-3-1">
<p>
Currently I only need to use the clang formatting hook here.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">The interactive thing is REQUIRED</span>
(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">haozeke/clang-format-buffer-smart-on-save</span> ()
(<span style="color: #b294bb;">interactive</span>)
  <span style="color: #b5bd68;">"Add auto-save hook for clang-format-buffer-smart."</span>
  (<span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">before-save-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">haozeke/clang-format-buffer-conditional</span> nil t))
<span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">This is a doom-emacs convinience macro</span>
(<span style="color: #b294bb;">add-hook!</span> (<span style="color: #de935f;">c-mode</span> c++-mode cc-mode) <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">haozeke/clang-format-buffer-smart-on-save</span>)
(<span style="color: #b294bb;">remove-hook!</span> (<span style="color: #de935f;">c-mode</span> c++-mode cc-mode) <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">haozeke/clang-format-buffer-smart-on-save</span>)
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-org8e0d832" class="outline-4">
<h4 id="org8e0d832"><span class="section-number-4">1.17.4.</span> Disable Auto RDM</h4>
<div class="outline-text-4" id="text-1-17-4">
<p>
This conflicts with the ArchLinux <code>systemctl --user start rdm</code> thing.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">Do not automatically try to run rdm</span>
(<span style="color: #de935f;">remove-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">c-mode-common-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">+cc|init-rtags</span>)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org80b262c" class="outline-3">
<h3 id="org80b262c"><span class="section-number-3">1.18.</span> Troubleshooting</h3>
<div class="outline-text-3" id="text-1-18">
<p>
These are strictly temporary hacks to resolve problems until they are fixed
upstream.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">after!</span> doom-themes
  (<span style="color: #de935f;">remove-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">doom-load-theme-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">doom-themes-treemacs-config</span>))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgcb6416b" class="outline-2">
<h2 id="orgcb6416b"><span class="section-number-2">2.</span> Sphinx and RsT</h2>
<div class="outline-text-2" id="text-2">
<p>
As mentioned in <a href="packages.html">packages.html</a>, we have some packages which make life easier.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> ox-rst
<span style="color: #81a2be;">:after</span> org)
(<span style="color: #b294bb;">use-package!</span> <span style="color: #cc6666;">sphinx-mode</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org235be6d" class="outline-2">
<h2 id="org235be6d"><span class="section-number-2">3.</span> R Helpers</h2>
<div class="outline-text-2" id="text-3">
<p>
This section is essentially to configure working with <code>R</code> above and beyond the
default <code>ess</code> configuration supplied by <code>doom-emacs</code>.
</p>
</div>
<div id="outline-container-orgc813eb0" class="outline-4">
<h4 id="orgc813eb0"><span class="section-number-4">3.0.1.</span> R Markdown</h4>
<div class="outline-text-4" id="text-3-0-1">
<p>
Basically only <code>poly-markdown</code> for <code>rmd</code> files.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Load</span>
(<span style="color: #b294bb;">use-package!</span> poly-R
<span style="color: #81a2be;">:config</span>
(<span style="color: #b294bb;">map!</span> (<span style="color: #81a2be;">:localleader</span>
      <span style="color: #81a2be;">:map</span> <span style="color: #cc6666;">polymode-mode-map</span>
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Export"</span>   <span style="color: #b5bd68;">"e"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">polymode-export</span>
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Errors"</span> <span style="color: #b5bd68;">"$"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">polymode-show-process-buffer</span>
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Weave"</span> <span style="color: #b5bd68;">"w"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">polymode-weave</span>
      <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(:prefix ("n" . "Navigation")</span>
      <span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">:desc "Next" "n" . 'polymode-next-chunk</span>
      <span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">:desc "Previous" "N" . 'polymode-previous-chunk)</span>
      <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(:prefix ("c" . "Chunks")</span>
      <span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">:desc "Narrow" "n" . 'polymode-toggle-chunk-narrowing</span>
      <span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">:desc "Kill" "k" . 'polymode-kill-chunk</span>
      <span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">:desc "Mark-Extend" "m" . 'polymode-mark-or-extend-chunk)</span>
      ))
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-org8780c06" class="outline-4">
<h4 id="org8780c06"><span class="section-number-4">3.0.2.</span> <span class="done DONE">DONE</span> Rmd to Rorg</h4>
<div class="outline-text-4" id="text-3-0-2">
<p>
The idea is to replace <code>md</code> completely with <code>org</code>. Since <code>polymode</code> is pretty finicky for most of my <code>org</code> files, I will ensure it is only enabled for <code>Rorg</code> files.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> poly-org
<span style="color: #81a2be;">:config</span>
(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">auto-mode-alist</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"\\.org"</span> . org-mode))
(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">auto-mode-alist</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"\\.Rorg"</span> . <span style="color: #cc6666;">poly-org-mode</span>))
(<span style="color: #b294bb;">map!</span> (<span style="color: #81a2be;">:localleader</span>
      <span style="color: #81a2be;">:map</span> <span style="color: #cc6666;">polymode-mode-map</span>
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Export"</span>   <span style="color: #b5bd68;">"E"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">polymode-export</span>
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Errors"</span> <span style="color: #b5bd68;">"$"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">polymode-show-process-buffer</span>
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Weave"</span> <span style="color: #b5bd68;">"w"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">polymode-weave</span>
      ))
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf038e36" class="outline-4">
<h4 id="orgf038e36"><span class="section-number-4">3.0.3.</span> Keybindings</h4>
<div class="outline-text-4" id="text-3-0-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">then_R_operator</span> ()
  <span style="color: #717171;">"R - %&gt;% operator or '</span><span style="color: #de935f;">then</span><span style="color: #717171;">' pipe operator"</span>
  (<span style="color: #b294bb;">interactive</span>)
  (<span style="color: #de935f;">just-one-space</span> 1)
  (<span style="color: #de935f;">insert</span> <span style="color: #b5bd68;">"%&gt;%"</span>)
  (<span style="color: #de935f;">reindent-then-newline-and-indent</span>))
</pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:leader</span>
      <span style="color: #81a2be;">:map</span> (<span style="color: #cc6666;">ess-mode-map</span>, <span style="color: #cc6666;">inferior-ess-mode-map</span>)
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Insert pipe"</span>  <span style="color: #b5bd68;">"&gt;"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">then_R_operator</span>)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org6b2e6e0" class="outline-2">
<h2 id="org6b2e6e0"><span class="section-number-2">4.</span> Org LaTeX</h2>
<div class="outline-text-2" id="text-4">
<p>
Portions of this section are to be mirrored in <a href="local/async-ox.el">the async init</a> file since. That&rsquo;s
also why here it&rsquo;s better to <b>not</b> use very <span class="underline">doom</span> specific code. I think it
would be a lot better to just work these into a single literate block instead of
maintaining two different sets of syntax.
</p>
</div>
<div id="outline-container-orgbd13c19" class="outline-4">
<h4 id="orgbd13c19"><span class="section-number-4">4.0.1.</span> Async Config</h4>
<div class="outline-text-4" id="text-4-0-1">
<p>
This is essentially the same, only some extra packages are added.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;;; </span><span style="color: #5a5b5a;">autoExport.el --- For async exports -*- lexical-binding: t; -*-</span>

(<span style="color: #de935f;">require</span> <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">package</span>)
(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">package-enable-at-startup</span> nil)
(<span style="color: #de935f;">package-initialize</span>)

(<span style="color: #de935f;">require</span> <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">org</span>)
(<span style="color: #de935f;">require</span> <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">ox</span>)
(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">load-path</span> <span style="color: #b5bd68;">"~/.emacs.d/.local/straight/repos/org-mode/contrib/lisp/"</span>)
(<span style="color: #de935f;">require</span> <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">ox-koma-letter</span>)
(<span style="color: #de935f;">require</span> <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">ox-beamer</span>)

<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Org-Ref Stuff</span>
(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">load-path</span> <span style="color: #b5bd68;">"~/.emacs.d/.local/straight/repos/org-ref/"</span>)
(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">load-path</span> <span style="color: #b5bd68;">"~/.emacs.d/.local/straight/repos/dash.el/"</span>)
(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">load-path</span> <span style="color: #b5bd68;">"~/.emacs.d/.local/straight/repos/helm.el/"</span>)
(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">load-path</span> <span style="color: #b5bd68;">"~/.emacs.d/.local/straight/repos/helm/"</span>)
(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">load-path</span> <span style="color: #b5bd68;">"~/.emacs.d/.local/straight/build/helm/"</span>)
(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">load-path</span> <span style="color: #b5bd68;">"~/.emacs.d/.local/straight/repos/helm-bibtex/"</span>)
(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">load-path</span> <span style="color: #b5bd68;">"~/.emacs.d/.local/straight/repos/ivy/"</span>)
(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">load-path</span> <span style="color: #b5bd68;">"~/.emacs.d/.local/straight/repos/hydra/"</span>)
(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">load-path</span> <span style="color: #b5bd68;">"~/.emacs.d/.local/straight/repos/key-chord/"</span>)
(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">load-path</span> <span style="color: #b5bd68;">"~/.emacs.d/.local/straight/repos/s.el/"</span>)
(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">load-path</span> <span style="color: #b5bd68;">"~/.emacs.d/.local/straight/repos/f.el/"</span>)
(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">load-path</span> <span style="color: #b5bd68;">"~/.emacs.d/.local/straight/repos/pdf-tools/"</span>)
(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">load-path</span> <span style="color: #b5bd68;">"~/.emacs.d/.local/straight/repos/emacs-htmlize/"</span>)
(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">load-path</span> <span style="color: #b5bd68;">"~/.emacs.d/.local/straight/repos/parsebib/"</span>)
(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">load-path</span> <span style="color: #b5bd68;">"~/.emacs.d/.local/straight/build/async/"</span>)
(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">load-path</span> <span style="color: #b5bd68;">"~/.emacs.d/.local/straight/repos/biblio.el/"</span>)
(<span style="color: #de935f;">require</span> <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">org-ref</span>)

<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Path addtion</span>
(<span style="color: #b294bb;">cond</span> ((<span style="color: #de935f;">featurep</span> <span style="color: #de935f;">:system</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">linux</span>)
       (<span style="color: #de935f;">setenv</span> <span style="color: #b5bd68;">"PATH"</span> (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"PATH"</span>) <span style="color: #b5bd68;">":"</span> (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"HOME"</span>) <span style="color: #b5bd68;">"/.local/share/texlive-20230827/bin/x86_64-linux"</span>)))
       (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">exec-path</span> (<span style="color: #de935f;">append</span> <span style="color: #cc6666;">exec-path</span> (<span style="color: #de935f;">list</span> (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"HOME"</span>) <span style="color: #b5bd68;">"/.local/share/texlive-20230827/bin/x86_64-linux"</span>))))
      )
      ((<span style="color: #de935f;">featurep</span> <span style="color: #de935f;">:system</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">macos</span>)
       (<span style="color: #de935f;">setenv</span> <span style="color: #b5bd68;">"PATH"</span> (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"PATH"</span>) <span style="color: #b5bd68;">":"</span> (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"HOME"</span>) <span style="color: #b5bd68;">"/usr/local/texlive/2021/bin/universal-darwin"</span>)))
       (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">exec-path</span> (<span style="color: #de935f;">append</span> <span style="color: #cc6666;">exec-path</span> (<span style="color: #de935f;">list</span> (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"HOME"</span>) <span style="color: #b5bd68;">"/usr/local/texlive/2021/bin/universal-darwin"</span>))))
      )
)

<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Functions</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">this function is used to append multiple elements to the list 'ox-latex</span>
(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">append-to-list</span> (list-var elements)
  <span style="color: #717171;">"Append ELEMENTS to the end of LIST-VAR. The return value is the new value of LIST-VAR."</span>
  (<span style="color: #b294bb;">unless</span> (<span style="color: #de935f;">consp</span> elements) (<span style="color: #de935f;">error</span> <span style="color: #b5bd68;">"ELEMENTS must be a list"</span>))
  (<span style="color: #b294bb;">let</span> ((<span style="color: #de935f;">list</span> (<span style="color: #de935f;">symbol-value</span> list-var)))
    (<span style="color: #b294bb;">if</span> list
        (<span style="color: #de935f;">setcdr</span> (<span style="color: #de935f;">last</span> list) elements)
      (<span style="color: #de935f;">set</span> list-var elements)))
(<span style="color: #de935f;">symbol-value</span> list-var))
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Feature parity with doom</span>
(<span style="color: #de935f;">eval-after-load</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">ox</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #b294bb;">require</span> <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">ox-koma-letter</span>))
(<span style="color: #b294bb;">with-eval-after-load</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">ox-latex</span>
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Compiler</span>
  (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-latex-pdf-process</span> (<span style="color: #de935f;">list</span> <span style="color: #b5bd68;">"latexmk -shell-escape -f -pdfxe %f"</span>))
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Configuration</span>
  (<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-latex-packages-alist</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">""</span> <span style="color: #b5bd68;">"minted"</span> <span style="color: #b5bd68;">"xcolor"</span>))
  (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-latex-listings</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">minted</span>)
  (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-latex-minted-options</span>
    <span style="color: #c5c8c6;">'</span>((<span style="color: #b5bd68;">"bgcolor"</span> <span style="color: #b5bd68;">"white"</span>) (<span style="color: #b5bd68;">"breaklines"</span> <span style="color: #b5bd68;">"true"</span>) (<span style="color: #b5bd68;">"linenos"</span> <span style="color: #b5bd68;">"true"</span>) (<span style="color: #b5bd68;">"style"</span> <span style="color: #b5bd68;">"tango"</span>)))
  (<span style="color: #81a2be;">append-to-list</span>
   <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-latex-classes</span>
   <span style="color: #c5c8c6;">'</span>((<span style="color: #b5bd68;">"tufte-book"</span>
      <span style="color: #b5bd68;">"\\documentclass[a4paper, sfsidenotes, openany, justified]{tufte-book}"</span>
      (<span style="color: #b5bd68;">"\\part{%s}"</span> . <span style="color: #b5bd68;">"\\part*{%s}"</span>)
      (<span style="color: #b5bd68;">"\\chapter{%s}"</span> . <span style="color: #b5bd68;">"\\chapter*{%s}"</span>)
      (<span style="color: #b5bd68;">"\\section{%s}"</span> . <span style="color: #b5bd68;">"\\section*{%s}"</span>)
      (<span style="color: #b5bd68;">"utf8"</span> . <span style="color: #b5bd68;">"utf8x"</span>)
      (<span style="color: #b5bd68;">"\\subsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsection*{%s}"</span>))))
  (<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-latex-classes</span>
               <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"koma-article"</span> <span style="color: #b5bd68;">"\\documentclass{scrartcl}"</span>
                 (<span style="color: #b5bd68;">"\\section{%s}"</span> . <span style="color: #b5bd68;">"\\section*{%s}"</span>)
                 (<span style="color: #b5bd68;">"\\subsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsection*{%s}"</span>)
                 (<span style="color: #b5bd68;">"\\subsubsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsubsection*{%s}"</span>)
                 (<span style="color: #b5bd68;">"\\paragraph{%s}"</span> . <span style="color: #b5bd68;">"\\paragraph*{%s}"</span>)
                 (<span style="color: #b5bd68;">"\\subparagraph{%s}"</span> . <span style="color: #b5bd68;">"\\subparagraph*{%s}"</span>)))
  (<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-latex-classes</span>
               <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"koma-report"</span> <span style="color: #b5bd68;">"\\documentclass{scrreprt}"</span>))
)
(<span style="color: #de935f;">provide</span> <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">autoExport</span>)
<span style="color: #5a5b5a;">;;; </span><span style="color: #5a5b5a;">autoExport.el ends here</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org1fe0569" class="outline-4">
<h4 id="org1fe0569"><span class="section-number-4">4.0.2.</span> Path Additions</h4>
<div class="outline-text-4" id="text-4-0-2">
<p>
Due to my recent switch to using <code>tlmgr</code>, I had to make some modifications to
the <code>emacs</code> path.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp" id="org0b73e42">(<span style="color: #b294bb;">cond</span> ((<span style="color: #de935f;">featurep</span> <span style="color: #de935f;">:system</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">linux</span>)
       (<span style="color: #de935f;">setenv</span> <span style="color: #b5bd68;">"PATH"</span> (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"PATH"</span>) <span style="color: #b5bd68;">":"</span> (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"HOME"</span>) <span style="color: #b5bd68;">"/.local/share/texlive-20230827/bin/x86_64-linux"</span>)))
       (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">exec-path</span> (<span style="color: #de935f;">append</span> <span style="color: #cc6666;">exec-path</span> (<span style="color: #de935f;">list</span> (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"HOME"</span>) <span style="color: #b5bd68;">"/.local/share/texlive-20230827/bin/x86_64-linux"</span>))))
      )
      ((<span style="color: #de935f;">featurep</span> <span style="color: #de935f;">:system</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">macos</span>)
       (<span style="color: #de935f;">setenv</span> <span style="color: #b5bd68;">"PATH"</span> (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"PATH"</span>) <span style="color: #b5bd68;">":"</span> (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"HOME"</span>) <span style="color: #b5bd68;">"/usr/local/texlive/2021/bin/universal-darwin"</span>)))
       (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">exec-path</span> (<span style="color: #de935f;">append</span> <span style="color: #cc6666;">exec-path</span> (<span style="color: #de935f;">list</span> (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"HOME"</span>) <span style="color: #b5bd68;">"/usr/local/texlive/2021/bin/universal-darwin"</span>))))
      )
)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgdce947a" class="outline-4">
<h4 id="orgdce947a"><span class="section-number-4">4.0.3.</span> Config</h4>
<div class="outline-text-4" id="text-4-0-3">
<p>
This is the part which is exported normally.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp" id="org0abb345">(<span style="color: #de935f;">eval-after-load</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">ox</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #b294bb;">require</span> <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">ox-koma-letter</span>))
(<span style="color: #b294bb;">with-eval-after-load</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">ox-latex</span>
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Compiler</span>
  (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-latex-pdf-process</span> (<span style="color: #de935f;">list</span> <span style="color: #b5bd68;">"latexmk -shell-escape -f -pdfxe %f"</span>))
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Configuration</span>
  (<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-latex-packages-alist</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">""</span> <span style="color: #b5bd68;">"minted"</span> <span style="color: #b5bd68;">"xcolor"</span>))
  (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-latex-listings</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">minted</span>)
  (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-latex-minted-options</span>
    <span style="color: #c5c8c6;">'</span>((<span style="color: #b5bd68;">"bgcolor"</span> <span style="color: #b5bd68;">"white"</span>) (<span style="color: #b5bd68;">"breaklines"</span> <span style="color: #b5bd68;">"true"</span>) (<span style="color: #b5bd68;">"linenos"</span> <span style="color: #b5bd68;">"true"</span>) (<span style="color: #b5bd68;">"style"</span> <span style="color: #b5bd68;">"tango"</span>)))
  (<span style="color: #81a2be;">append-to-list</span>
   <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-latex-classes</span>
   <span style="color: #c5c8c6;">'</span>((<span style="color: #b5bd68;">"tufte-book"</span>
      <span style="color: #b5bd68;">"\\documentclass[a4paper, sfsidenotes, openany, justified]{tufte-book}"</span>
      (<span style="color: #b5bd68;">"\\part{%s}"</span> . <span style="color: #b5bd68;">"\\part*{%s}"</span>)
      (<span style="color: #b5bd68;">"\\chapter{%s}"</span> . <span style="color: #b5bd68;">"\\chapter*{%s}"</span>)
      (<span style="color: #b5bd68;">"\\section{%s}"</span> . <span style="color: #b5bd68;">"\\section*{%s}"</span>)
      (<span style="color: #b5bd68;">"utf8"</span> . <span style="color: #b5bd68;">"utf8x"</span>)
      (<span style="color: #b5bd68;">"\\subsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsection*{%s}"</span>))))
  (<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-latex-classes</span>
               <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"koma-article"</span> <span style="color: #b5bd68;">"\\documentclass{scrartcl}"</span>
                 (<span style="color: #b5bd68;">"\\section{%s}"</span> . <span style="color: #b5bd68;">"\\section*{%s}"</span>)
                 (<span style="color: #b5bd68;">"\\subsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsection*{%s}"</span>)
                 (<span style="color: #b5bd68;">"\\subsubsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsubsection*{%s}"</span>)
                 (<span style="color: #b5bd68;">"\\paragraph{%s}"</span> . <span style="color: #b5bd68;">"\\paragraph*{%s}"</span>)
                 (<span style="color: #b5bd68;">"\\subparagraph{%s}"</span> . <span style="color: #b5bd68;">"\\subparagraph*{%s}"</span>)))
  (<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-latex-classes</span>
               <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"koma-report"</span> <span style="color: #b5bd68;">"\\documentclass{scrreprt}"</span>))
)
</pre>
</div>
</div>
</div>
<div id="outline-container-org81bf1e7" class="outline-3">
<h3 id="org81bf1e7"><span class="section-number-3">4.1.</span> Shared Preferences</h3>
<div class="outline-text-3" id="text-4-1">
</div>
<div id="outline-container-orga45a676" class="outline-4">
<h4 id="orga45a676"><span class="section-number-4">4.1.1.</span> Compiler</h4>
<div class="outline-text-4" id="text-4-1-1">
<p>
It makes sense to use <code>latexmk</code> anyway. This way I can set sane defaults.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp" id="org5372e5a"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Compiler</span>
(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-latex-pdf-process</span> (<span style="color: #de935f;">list</span> <span style="color: #b5bd68;">"latexmk -shell-escape -f -pdfxe %f"</span>))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgccaf7dc" class="outline-4">
<h4 id="orgccaf7dc"><span class="section-number-4">4.1.2.</span> Packages</h4>
<div class="outline-text-4" id="text-4-1-2">
<p>
Some of these are damn near universal given my set up, so they are declared here.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp" id="org9238c58"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Configuration</span>
(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-latex-packages-alist</span> <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">""</span> <span style="color: #b5bd68;">"minted"</span> <span style="color: #b5bd68;">"xcolor"</span>))
(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-latex-listings</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">minted</span>)
(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-latex-minted-options</span>
  <span style="color: #c5c8c6;">'</span>((<span style="color: #b5bd68;">"bgcolor"</span> <span style="color: #b5bd68;">"white"</span>) (<span style="color: #b5bd68;">"breaklines"</span> <span style="color: #b5bd68;">"true"</span>) (<span style="color: #b5bd68;">"linenos"</span> <span style="color: #b5bd68;">"true"</span>) (<span style="color: #b5bd68;">"style"</span> <span style="color: #b5bd68;">"tango"</span>)))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org4b6459b" class="outline-3">
<h3 id="org4b6459b"><span class="section-number-3">4.2.</span> Export Templates</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Most of the configuration is to be moved into the file snippets. However, class
definitions and other packages are still to be loaded here. Though here in the <code>config.el</code> I could use <code>doom</code> semantics and might as
well to keep things DRY, it appears that the <a href="local/async-ox.el">async file</a> needs to keep things in
the old syntax.
</p>
</div>
<div id="outline-container-org6cf9c79" class="outline-4">
<h4 id="org6cf9c79"><span class="section-number-4">4.2.1.</span> KOMA Article</h4>
<div class="outline-text-4" id="text-4-2-1">
<p>
Inspired by the post <a href="https://tex.stackexchange.com/a/364982/130845">here</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp" id="org3d8f3df">(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-latex-classes</span>
             <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"koma-article"</span> <span style="color: #b5bd68;">"\\documentclass{scrartcl}"</span>
               (<span style="color: #b5bd68;">"\\section{%s}"</span> . <span style="color: #b5bd68;">"\\section*{%s}"</span>)
               (<span style="color: #b5bd68;">"\\subsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsection*{%s}"</span>)
               (<span style="color: #b5bd68;">"\\subsubsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsubsection*{%s}"</span>)
               (<span style="color: #b5bd68;">"\\paragraph{%s}"</span> . <span style="color: #b5bd68;">"\\paragraph*{%s}"</span>)
               (<span style="color: #b5bd68;">"\\subparagraph{%s}"</span> . <span style="color: #b5bd68;">"\\subparagraph*{%s}"</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-orge318d23" class="outline-4">
<h4 id="orge318d23"><span class="section-number-4">4.2.2.</span> KOMA Report</h4>
<div class="outline-text-4" id="text-4-2-2">
<p>
Inspired by the post <a href="https://tex.stackexchange.com/a/364982/130845">here</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp" id="org7f302a6">(<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-latex-classes</span>
             <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"koma-report"</span> <span style="color: #b5bd68;">"\\documentclass{scrreprt}"</span>))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc389542" class="outline-4">
<h4 id="orgc389542"><span class="section-number-4">4.2.3.</span> Tufte Book</h4>
<div class="outline-text-4" id="text-4-2-3">
<p>
This is really ad-hoc right now and from <a href="https://www.reddit.com/r/emacs/comments/54g578/anyone_go_from_using_latex_to_org_mode/">this reddit thread</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp" id="org55b4737">(<span style="color: #81a2be;">append-to-list</span>
 <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-latex-classes</span>
 <span style="color: #c5c8c6;">'</span>((<span style="color: #b5bd68;">"tufte-book"</span>
    <span style="color: #b5bd68;">"\\documentclass[a4paper, sfsidenotes, openany, justified]{tufte-book}"</span>
    (<span style="color: #b5bd68;">"\\part{%s}"</span> . <span style="color: #b5bd68;">"\\part*{%s}"</span>)
    (<span style="color: #b5bd68;">"\\chapter{%s}"</span> . <span style="color: #b5bd68;">"\\chapter*{%s}"</span>)
    (<span style="color: #b5bd68;">"\\section{%s}"</span> . <span style="color: #b5bd68;">"\\section*{%s}"</span>)
    (<span style="color: #b5bd68;">"utf8"</span> . <span style="color: #b5bd68;">"utf8x"</span>)
    (<span style="color: #b5bd68;">"\\subsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsection*{%s}"</span>))))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org35f332c" class="outline-3">
<h3 id="org35f332c"><span class="section-number-3">4.3.</span> LaTeX Preview for Org mode</h3>
<div class="outline-text-3" id="text-4-3">
<p>
Basically I need to see math and physics. Originally borrowed from <a href="https://emacs.stackexchange.com/questions/30341/how-do-i-customize-the-process-that-gets-triggered-in-org-preview-latex-fragment">this
stackexchange</a> question.
</p>
</div>
<ol class="org-ol">
<li><a id="orgaaedb30"></a>Process<br />
<div class="outline-text-5" id="text-4-3-0-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #c5c8c6;">'</span>(<span style="color: #cc6666;">org-preview-latex-process-alist</span>
  (<span style="color: #b294bb;">quote</span>
   ((dvipng <span style="color: #81a2be;">:programs</span>
     (<span style="color: #b5bd68;">"lualatex"</span> <span style="color: #b5bd68;">"dvipng"</span>)
     <span style="color: #81a2be;">:description</span> <span style="color: #b5bd68;">"dvi &gt; png"</span> <span style="color: #81a2be;">:message</span> <span style="color: #b5bd68;">"you need to install the programs: latex and dvipng."</span> <span style="color: #81a2be;">:image-input-type</span> <span style="color: #b5bd68;">"dvi"</span> <span style="color: #81a2be;">:image-output-type</span> <span style="color: #b5bd68;">"png"</span> <span style="color: #81a2be;">:image-size-adjust</span>
     (1.0 . 1.0)
     <span style="color: #81a2be;">:latex-compiler</span>
     (<span style="color: #b5bd68;">"lualatex -output-format dvi -interaction nonstopmode -output-directory %o %f"</span>)
     <span style="color: #81a2be;">:image-converter</span>
     (<span style="color: #b5bd68;">"dvipng -fg %F -bg %B -D %D -T tight -o %O %f"</span>))
    (dvisvgm <span style="color: #81a2be;">:programs</span>
     (<span style="color: #b5bd68;">"latex"</span> <span style="color: #b5bd68;">"dvisvgm"</span>)
     <span style="color: #81a2be;">:description</span> <span style="color: #b5bd68;">"dvi &gt; svg"</span> <span style="color: #81a2be;">:message</span> <span style="color: #b5bd68;">"you need to install the programs: latex and dvisvgm."</span> <span style="color: #81a2be;">:use-xcolor</span> t <span style="color: #81a2be;">:image-input-type</span> <span style="color: #b5bd68;">"xdv"</span> <span style="color: #81a2be;">:image-output-type</span> <span style="color: #b5bd68;">"svg"</span> <span style="color: #81a2be;">:image-size-adjust</span>
     (1.7 . 1.5)
     <span style="color: #81a2be;">:latex-compiler</span>
     (<span style="color: #b5bd68;">"xelatex -no-pdf -interaction nonstopmode -output-directory %o %f"</span>)
     <span style="color: #81a2be;">:image-converter</span>
     (<span style="color: #b5bd68;">"dvisvgm %f -n -b min -c %S -o %O"</span>))
    (imagemagick <span style="color: #81a2be;">:programs</span>
     (<span style="color: #b5bd68;">"latex"</span> <span style="color: #b5bd68;">"convert"</span>)
     <span style="color: #81a2be;">:description</span> <span style="color: #b5bd68;">"pdf &gt; png"</span> <span style="color: #81a2be;">:message</span> <span style="color: #b5bd68;">"you need to install the programs: latex and imagemagick."</span> <span style="color: #81a2be;">:use-xcolor</span> t <span style="color: #81a2be;">:image-input-type</span> <span style="color: #b5bd68;">"pdf"</span> <span style="color: #81a2be;">:image-output-type</span> <span style="color: #b5bd68;">"png"</span> <span style="color: #81a2be;">:image-size-adjust</span>
     (1.0 . 1.0)
     <span style="color: #81a2be;">:latex-compiler</span>
     (<span style="color: #b5bd68;">"xelatex -no-pdf -interaction nonstopmode -output-directory %o %f"</span>)
     <span style="color: #81a2be;">:image-converter</span>
     (<span style="color: #b5bd68;">"convert -density %D -trim -antialias %f -quality 100 %O"</span>)))))
</pre>
</div>
</div>
</li>
<li><a id="orgb088abf"></a>Packages<br />
<div class="outline-text-5" id="text-4-3-0-2">
<p>
These are required to view math properly.
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-orgc89f0b3" class="outline-3">
<h3 id="orgc89f0b3"><span class="section-number-3">4.4.</span> Math support</h3>
<div class="outline-text-3" id="text-4-4">
<p>
This is from <a href="https://www.reddit.com/r/emacs/comments/8tjgtu/cdlatex_and_general_latex_completion_with_company/">this reddit</a> thread.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:map</span> <span style="color: #cc6666;">cdlatex-mode-map</span>
      <span style="color: #81a2be;">:i</span> <span style="color: #b5bd68;">"TAB"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">cdlatex-tab</span>)
</pre>
</div>
<p>
Also we need some more things.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> cdlatex
    <span style="color: #81a2be;">:after</span> (<span style="color: #81a2be;">:any</span> org-mode LaTeX-mode)
    <span style="color: #81a2be;">:hook</span>
    ((<span style="color: #de935f;">LaTeX-mode</span> . turn-on-cdlatex)
     (<span style="color: #de935f;">org-mode</span> . turn-on-org-cdlatex)))

(<span style="color: #b294bb;">use-package!</span> company-math
    <span style="color: #81a2be;">:after</span> (<span style="color: #81a2be;">:any</span> org-mode TeX-mode)
    <span style="color: #81a2be;">:config</span>
    (<span style="color: #81a2be;">set-company-backend!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-mode</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">company-math-symbols-latex</span>)
    (<span style="color: #81a2be;">set-company-backend!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">TeX-mode</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">company-math-symbols-latex</span>)
    (<span style="color: #81a2be;">set-company-backend!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-mode</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">company-latex-commands</span>)
    (<span style="color: #81a2be;">set-company-backend!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">TeX-mode</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">company-latex-commands</span>)
    (<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">company-tooltip-align-annotations</span> t)
    (<span style="color: #b294bb;">setq</span> company-math-allow-latex-symbols-in-faces t))
</pre>
</div>
<p>
We would also like to set up the <code>math-symbol-list</code> unicode input <a href="https://www.emacswiki.org/emacs/TeXInputMethod">from here</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> math-symbol-lists
  <span style="color: #81a2be;">:config</span>
  (<span style="color: #de935f;">quail-define-package</span> <span style="color: #b5bd68;">"math"</span> <span style="color: #b5bd68;">"UTF-8"</span> <span style="color: #b5bd68;">"&#937;"</span> t)
  (<span style="color: #b294bb;">quail-define-rules</span> <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">add whatever extra rules you want to define here...</span>
   (<span style="color: #b5bd68;">"\\from"</span>    #X2190)
   (<span style="color: #b5bd68;">"\\to"</span>      #X2192)
   (<span style="color: #b5bd68;">"\\lhd"</span>     #X22B2)
   (<span style="color: #b5bd68;">"\\rhd"</span>     #X22B3)
   (<span style="color: #b5bd68;">"\\unlhd"</span>   #X22B4)
   (<span style="color: #b5bd68;">"\\unrhd"</span>   #X22B5))
  (<span style="color: #de935f;">mapc</span> (<span style="color: #b294bb;">lambda</span> (x)
          (<span style="color: #b294bb;">if</span> (<span style="color: #de935f;">cddr</span> x)
              (<span style="color: #de935f;">quail-defrule</span> (<span style="color: #de935f;">cadr</span> x) (<span style="color: #de935f;">car</span> (<span style="color: #de935f;">cddr</span> x)))))
        (<span style="color: #de935f;">append</span> <span style="color: #cc6666;">math-symbol-list-basic</span> <span style="color: #cc6666;">math-symbol-list-extended</span> <span style="color: #cc6666;">math-symbol-list-subscripts</span> <span style="color: #cc6666;">math-symbol-list-superscripts</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org4808b72" class="outline-3">
<h3 id="org4808b72"><span class="section-number-3">4.5.</span> Prettier TeX buffers</h3>
<div class="outline-text-3" id="text-4-5">
<p>
From <a href="https://endlessparentheses.com/improving-latex-equations-with-font-lock.html">here</a>. Reduces the size of inessential <code>tex</code>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">defface</span> <span style="color: #cc6666;">endless/unimportant-latex-face</span>
  <span style="color: #c5c8c6;">'</span>((t <span style="color: #81a2be;">:height</span> 0.7
     <span style="color: #81a2be;">:inherit</span> <span style="color: #cc6666;">font-lock-comment-face</span>))
  <span style="color: #717171;">"Face used on less relevant math commands."</span>
  <span style="color: #81a2be;">:group</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">LaTeX-math</span>)

(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">font-latex-user-keyword-classes</span>
      <span style="color: #c5c8c6;">'</span>((<span style="color: #b5bd68;">"mathunimportant"</span>
         (<span style="color: #b5bd68;">"left"</span> <span style="color: #b5bd68;">"right"</span>
          <span style="color: #b5bd68;">"big"</span> <span style="color: #b5bd68;">"Big"</span>
          <span style="color: #b5bd68;">"bigl"</span> <span style="color: #b5bd68;">"bigr"</span>
          <span style="color: #b5bd68;">"Bigl"</span> <span style="color: #b5bd68;">"Bigr"</span>
          <span style="color: #b5bd68;">"biggl"</span> <span style="color: #b5bd68;">"biggr"</span>
          <span style="color: #b5bd68;">"Biggl"</span> <span style="color: #b5bd68;">"Biggr"</span>
          <span style="color: #b5bd68;">","</span> <span style="color: #b5bd68;">"."</span> <span style="color: #b5bd68;">";"</span> <span style="color: #b5bd68;">"!"</span>)
         endless/unimportant-latex-face
         noarg)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org5b9885e" class="outline-3">
<h3 id="org5b9885e"><span class="section-number-3">4.6.</span> Babel Tabs</h3>
<div class="outline-text-3" id="text-4-6">
<p>
Evidently there was <a href="https://emacs.stackexchange.com/questions/24283/org-mode-converting-spaces-to-tabs-when-evaluating-source">some sort of re-indentation</a> going on during the export
process which was breaking a lot of <code>python</code>, this should fix that:
More generally, it is best set with <code># -*- org-src-preserve-indentation: t;
org-edit-src-content: 0; -*-</code> on a per-file basis, however given that the
indentation is handled by the programming major mode, this is a good global
setting as well.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-src-preserve-indentation</span> t
      <span style="color: #cc6666;">org-edit-src-content-indentation</span> 0)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgced6a73" class="outline-3">
<h3 id="orgced6a73"><span class="section-number-3">4.7.</span> Pandoc Babel</h3>
<div class="outline-text-3" id="text-4-7">
<p>
As fully described in <a href="https://rgoswami.me/posts/org-pandoc-babel/">this post</a>, I felt the need to export some common <code>pandoc</code>
formats with <code>babel</code>.
</p>
</div>
<div id="outline-container-org93635b2" class="outline-4">
<h4 id="org93635b2"><span class="section-number-4">4.7.1.</span> Restructured Text</h4>
<div class="outline-text-4" id="text-4-7-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">org-babel-execute:rst</span> (body params)
  <span style="color: #717171;">"Execute a block of rst code with org-babel.</span>
<span style="color: #717171;">This function is called by `</span><span style="color: #de935f;">org-babel-execute-src-block</span><span style="color: #717171;">'."</span>
  (<span style="color: #b294bb;">let*</span> ((result-params (<span style="color: #de935f;">split-string</span> (<span style="color: #b294bb;">or</span> (<span style="color: #de935f;">cdr</span> (<span style="color: #de935f;">assoc</span> <span style="color: #81a2be;">:results</span> params)) <span style="color: #b5bd68;">""</span>)))
         (in-file (<span style="color: #de935f;">org-babel-temp-file</span> <span style="color: #b5bd68;">"rst-"</span>))
         (cmdline (<span style="color: #de935f;">cdr</span> (<span style="color: #de935f;">assoc</span> <span style="color: #81a2be;">:cmdline</span> params)))
         (to (<span style="color: #de935f;">cdr</span> (<span style="color: #de935f;">assoc</span> <span style="color: #81a2be;">:to</span> params)))
         (template (<span style="color: #de935f;">cdr</span> (<span style="color: #de935f;">assoc</span> <span style="color: #81a2be;">:template</span> params)))
         (cmd (<span style="color: #de935f;">concat</span> <span style="color: #b5bd68;">"pandoc"</span>
                      <span style="color: #b5bd68;">" -t  org"</span>
                      <span style="color: #b5bd68;">" -i "</span> (<span style="color: #de935f;">org-babel-process-file-name</span> in-file)
                      <span style="color: #b5bd68;">" -f rst "</span>
                      <span style="color: #b5bd68;">" "</span> cmdline)))
    (<span style="color: #b294bb;">with-temp-file</span> in-file (<span style="color: #de935f;">insert</span> body))
    (<span style="color: #de935f;">message</span> cmd)
    (<span style="color: #de935f;">shell-command-to-string</span> cmd))) <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Send to results</span>

(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">org-babel-prep-session:rst</span> (session params)
  <span style="color: #717171;">"Return an error because rst does not support sessions."</span>
  (<span style="color: #de935f;">error</span> <span style="color: #b5bd68;">"rst does not support sessions"</span>))
</pre>
</div>
</div>
</div>
<div id="outline-container-org765e13e" class="outline-4">
<h4 id="org765e13e"><span class="section-number-4">4.7.2.</span> Markdown HTML</h4>
<div class="outline-text-4" id="text-4-7-2">
<p>
A helper execution method mostly for better formatting with <code>org-gcal</code>, the method is described in <a href="https://rgoswami.me/posts/org-pandoc-babel/">this post</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">org-babel-execute:mdhtml</span> (body params)
  <span style="color: #717171;">"Execute a block of rst code with org-babel.</span>
<span style="color: #717171;">This function is called by `</span><span style="color: #de935f;">org-babel-execute-src-block</span><span style="color: #717171;">'."</span>
  (<span style="color: #b294bb;">let*</span> ((result-params (<span style="color: #de935f;">split-string</span> (<span style="color: #b294bb;">or</span> (<span style="color: #de935f;">cdr</span> (<span style="color: #de935f;">assoc</span> <span style="color: #81a2be;">:results</span> params)) <span style="color: #b5bd68;">""</span>)))
         (in-file (<span style="color: #de935f;">org-babel-temp-file</span> <span style="color: #b5bd68;">"mdhtml-"</span>))
         (cmdline (<span style="color: #de935f;">cdr</span> (<span style="color: #de935f;">assoc</span> <span style="color: #81a2be;">:cmdline</span> params)))
         (to (<span style="color: #de935f;">cdr</span> (<span style="color: #de935f;">assoc</span> <span style="color: #81a2be;">:to</span> params)))
         (template (<span style="color: #de935f;">cdr</span> (<span style="color: #de935f;">assoc</span> <span style="color: #81a2be;">:template</span> params)))
         (cmd (<span style="color: #de935f;">concat</span> <span style="color: #b5bd68;">"pandoc"</span>
                      <span style="color: #b5bd68;">" -t  html"</span>
                      <span style="color: #b5bd68;">" -i "</span> (<span style="color: #de935f;">org-babel-process-file-name</span> in-file)
                      <span style="color: #b5bd68;">" -f gfm "</span>
                      <span style="color: #b5bd68;">" "</span> cmdline)))
    (<span style="color: #b294bb;">with-temp-file</span> in-file (<span style="color: #de935f;">insert</span> body))
    (<span style="color: #de935f;">message</span> cmd)
    (<span style="color: #de935f;">shell-command-to-string</span> cmd))) <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Send to results</span>

(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">org-babel-prep-session:mdhtml</span> (session params)
  <span style="color: #717171;">"Return an error because mdhtml does not support sessions."</span>
  (<span style="color: #de935f;">error</span> <span style="color: #b5bd68;">"mdhtml does not support sessions"</span>))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org2ef8526" class="outline-3">
<h3 id="org2ef8526"><span class="section-number-3">4.8.</span> Completion</h3>
<div class="outline-text-3" id="text-4-8">
</div>
<div id="outline-container-orgb00158b" class="outline-4">
<h4 id="orgb00158b"><span class="section-number-4">4.8.1.</span> Github Copilot</h4>
<div class="outline-text-4" id="text-4-8-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">accept completion from copilot and fallback to company</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(use-package! copilot</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">:hook (prog-mode . copilot-mode)</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">:bind (:map copilot-completion-map</span>
<span style="color: #5a5b5a;">;;               </span><span style="color: #5a5b5a;">("&lt;tab&gt;" . 'copilot-accept-completion)</span>
<span style="color: #5a5b5a;">;;               </span><span style="color: #5a5b5a;">("TAB" . 'copilot-accept-completion)</span>
<span style="color: #5a5b5a;">;;               </span><span style="color: #5a5b5a;">("C-TAB" . 'copilot-accept-completion-by-word)</span>
<span style="color: #5a5b5a;">;;               </span><span style="color: #5a5b5a;">("C-&lt;tab&gt;" . 'copilot-accept-completion-by-word)))</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org1b3d53f" class="outline-3">
<h3 id="org1b3d53f"><span class="section-number-3">4.9.</span> Flycheck Additions</h3>
<div class="outline-text-3" id="text-4-9">
<p>
These are basically meant to aid in development. The relevant linters are also
added here.
</p>
</div>
<div id="outline-container-orgbe7cde5" class="outline-4">
<h4 id="orgbe7cde5"><span class="section-number-4">4.9.1.</span> MELPA Helpers</h4>
<div class="outline-text-4" id="text-4-9-1">
<p>
This includes settings for both flycheck and the packages it needs.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> flycheck-package
  <span style="color: #81a2be;">:after</span> flycheck
  <span style="color: #81a2be;">:config</span> (<span style="color: #de935f;">flycheck-package-setup</span>))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org5cc39ad" class="outline-3">
<h3 id="org5cc39ad"><span class="section-number-3">4.10.</span> Xenops Inspired</h3>
<div class="outline-text-3" id="text-4-10">
<p>
<a href="https://github.com/dandavison/xenops/">Xenops</a> is essentially a supercharged literate set of functions for using <code>Mathematica</code> and <code>SymPy</code>. It is similar to my previous <code>mash</code> et. al. setup but automatically appends <code>// TeXForm // ToString</code> and other helpful conversions. Due to the many modifications of my default environment and setup; these functions are adapted for use from <code>xenops</code> but cannot be loaded directly with it. Also my use case here is more focused towards only working in <code>orgmode</code> as opposed to <code>xenops</code>&rsquo;s focus on <code>TeX</code>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgcbd9ea1" class="outline-2">
<h2 id="orgcbd9ea1"><span class="section-number-2">5.</span> Notes</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-org862ff93" class="outline-3">
<h3 id="org862ff93"><span class="section-number-3">5.1.</span> noteYoda</h3>
<div class="outline-text-3" id="text-5-1">
<p>
<del>This is largely inspired from <a href="https://www.reddit.com/r/emacs/comments/4gudyw/help_me_with_my_orgmode_workflow_for_notetaking/">this reddit comment</a>. For clarity and extensibility this will be broken down into a per-package configuration. The heart of this is an <a href="https://rclone.org/mega/">rclone mega</a> folder to manage all these transparently. With this setup links to the files are stored in <a href="https://www.zotero.org/">zotero</a> and managed by <a href="https://github.com/jlegewie/zotfile">zotfile</a>.</del> Now described in <a href="https://rgoswami.me/posts/org-note-workflow">this post</a>.
</p>
</div>
<div id="outline-container-org2da5c66" class="outline-4">
<h4 id="org2da5c66"><span class="section-number-4">5.1.1.</span> Org-Ref</h4>
<div class="outline-text-4" id="text-5-1-1">
<p>
<a href="https://github.com/jkitchin/org-ref">This</a> seems like an ubiquitous choice for working with org files and references,
though quite a bit of the config here relates to <a href="https://github.com/tmalsburg/helm-bibtex/tree/file-field">helm-bibtex</a>. <b>Commented</b>
sections are set in my <code>private</code> config.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> org-ref
  <span style="color: #81a2be;">:init</span>
  (<span style="color: #b294bb;">with-eval-after-load</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">ox</span>
    (<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">my/org-ref-process-buffer--html</span> (backend)
      <span style="color: #717171;">"Preprocess `</span><span style="color: #de935f;">org-ref</span><span style="color: #717171;">' citations to HTML format.</span>

<span style="color: #717171;">  Do this only if the export backend is `</span><span style="color: #de935f;">html</span><span style="color: #717171;">' or a derivative of</span>
<span style="color: #717171;">  that."</span>
      <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">`</span><span style="color: #de935f;">ox-hugo</span><span style="color: #5a5b5a;">' is derived indirectly from `</span><span style="color: #de935f;">ox-html</span><span style="color: #5a5b5a;">'.</span>
      <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">ox-hugo &lt;- ox-blackfriday &lt;- ox-md &lt;- ox-html</span>
      (<span style="color: #b294bb;">when</span> (<span style="color: #de935f;">org-export-derived-backend-p</span> backend <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">html</span>)
        (<span style="color: #de935f;">org-ref-process-buffer</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">html</span>)))
    (<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-export-before-parsing-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">my/org-ref-process-buffer--html</span>))
  <span style="color: #81a2be;">:config</span>
  (<span style="color: #b294bb;">setq</span>
   org-ref-completion-library <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-ref-ivy-cite</span>
   org-ref-get-pdf-filename-function <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-ref-get-pdf-filename-helm-bibtex</span>
   <span style="color: #cc6666;">bibtex-completion-bibliography</span> (<span style="color: #de935f;">list</span> (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"HOME"</span>) <span style="color: #b5bd68;">"/GDrive/zotLib.bib"</span>))
   <span style="color: #cc6666;">bibtex-completion-notes-path</span> (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"HOME"</span>) <span style="color: #b5bd68;">"/Git/Gitlab/Mine/Notes/bibnotes.org"</span>)
   org-ref-note-title-format <span style="color: #b5bd68;">"* </span><span style="color: #f0c674; font-weight: bold;">TODO</span><span style="color: #b5bd68;"> %y - %t\n :PROPERTIES:\n  :Custom_ID: %k\n  :NOTER_DOCUMENT: %F\n :ROAM_KEY: cite:%k\n  :AUTHOR: %9a\n  :JOURNAL: %j\n  :YEAR: %y\n  :VOLUME: %v\n  :PAGES: %p\n  :DOI: %D\n  :URL: %U\n :END:\n\n"</span>
   org-ref-notes-directory (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"HOME"</span>) <span style="color: #b5bd68;">"/Git/Gitlab/Mine/Notes/"</span>)
   org-ref-notes-function <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">orb-edit-notes</span>
   ))
</pre>
</div>

<p>
Apparently, <code>org-ref</code> is also able to fetch <code>pdf</code> files when <code>DOI</code> or <code>URL</code>
links are dragged onto the <code>.bib</code> file. However, since <code>zotero</code> will handle the
metadata, this remains to be considered.
</p>

<p>
Ivy is used exclusively throughout <code>doom</code>, makes sense to use it here too, but I recently switched to <code>helm</code>.
Turns out <code>helm</code> is probably faster for larger collections since it can be
asynchronous. Basically, this is because using the minibuffer, as ivy does is a
blocking action while the <code>helm</code> buffer may be opened asynchronously.
Name aside, <a href="https://github.com/tmalsburg/helm-bibtex">helm-bibtex</a> also works for <code>ivy</code>. Basically meant to interface with
bibliographies in general. However, since I&rsquo;m using <code>org-ref</code>, I won&rsquo;t be configuring or loading that anymore.
</p>
</div>
</div>
<div id="outline-container-org075c52c" class="outline-4">
<h4 id="org075c52c"><span class="section-number-4">5.1.2.</span> Helm Bibtex</h4>
<div class="outline-text-4" id="text-5-1-2">
<p>
For some reason, <code>org-ref-notes</code> isn&rsquo;t working very nicely, so the setup above prioritizes the <code>helm-bibtex</code> note-taking setup.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">after!</span> org-ref
  (<span style="color: #b294bb;">setq</span>
   <span style="color: #cc6666;">bibtex-completion-notes-path</span> (<span style="color: #de935f;">concat</span> (<span style="color: #de935f;">getenv</span> <span style="color: #b5bd68;">"HOME"</span>) <span style="color: #b5bd68;">"/Git/Gitlab/Mine/Notes/"</span>)
   <span style="color: #cc6666;">bibtex-completion-bibliography</span> zot_bib
   <span style="color: #cc6666;">bibtex-completion-pdf-field</span> <span style="color: #b5bd68;">"file"</span>
   <span style="color: #cc6666;">bibtex-completion-notes-template-multiple-files</span>
   (<span style="color: #de935f;">concat</span>
    <span style="color: #b5bd68;">"#+TITLE: ${title}\n"</span>
    <span style="color: #b5bd68;">"#+ROAM_KEY: cite:${=key=}\n"</span>
    <span style="color: #b5bd68;">"#+ROAM_TAGS: ${keywords}\n"</span>
    <span style="color: #b5bd68;">"* </span><span style="color: #f0c674; font-weight: bold;">TODO</span><span style="color: #b5bd68;"> Notes\n"</span>
    <span style="color: #b5bd68;">":PROPERTIES:\n"</span>
    <span style="color: #b5bd68;">":Custom_ID: ${=key=}\n"</span>
    <span style="color: #b5bd68;">":NOTER_DOCUMENT: %(orb-process-file-field \"${=key=}\")\n"</span>
    <span style="color: #b5bd68;">":AUTHOR: ${author-abbrev}\n"</span>
    <span style="color: #b5bd68;">":JOURNAL: ${journaltitle}\n"</span>
    <span style="color: #b5bd68;">":DATE: ${date}\n"</span>
    <span style="color: #b5bd68;">":YEAR: ${year}\n"</span>
    <span style="color: #b5bd68;">":DOI: ${doi}\n"</span>
    <span style="color: #b5bd68;">":URL: ${url}\n"</span>
    <span style="color: #b5bd68;">":END:\n\n"</span>
    )
   )
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-org87d728c" class="outline-4">
<h4 id="org87d728c"><span class="section-number-4">5.1.3.</span> Org-Roam</h4>
<div class="outline-text-4" id="text-5-1-3">
<p>
Will also setup the <code>org-roam-bibtex</code> thing here.
As foretold in the last line, there are more settings for <a href="https://github.com/Zaeph/org-roam-bibtex">ORB</a>. The template is
modified from <a href="https://github.com/zaeph/org-roam-bibtex/issues/4">here</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> org-roam-bibtex
  <span style="color: #81a2be;">:after</span> (org-roam)
  <span style="color: #81a2be;">:hook</span> (org-roam-mode . <span style="color: #cc6666;">org-roam-bibtex-mode</span>)
  <span style="color: #81a2be;">:config</span>
  (<span style="color: #b294bb;">setq</span> org-roam-bibtex-preformat-keywords
        <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"=key="</span> <span style="color: #b5bd68;">"title"</span> <span style="color: #b5bd68;">"url"</span> <span style="color: #b5bd68;">"file"</span> <span style="color: #b5bd68;">"author-or-editor"</span> <span style="color: #b5bd68;">"keywords"</span>))
  (<span style="color: #b294bb;">setq</span> orb-templates
        <span style="color: #c5c8c6;">'</span>((<span style="color: #b5bd68;">"r"</span> <span style="color: #b5bd68;">"ref"</span> plain (<span style="color: #b294bb;">function</span> org-roam-capture--get-point)
           <span style="color: #b5bd68;">""</span>
           <span style="color: #81a2be;">:file-name</span> <span style="color: #b5bd68;">"${slug}"</span>
           <span style="color: #81a2be;">:head</span> <span style="color: #b5bd68;">"#+TITLE: ${=key=}: ${title}\n#+ROAM_KEY: ${ref}\n#+ROAM_TAGS:</span>

<span style="color: #b5bd68;">- keywords :: ${keywords}</span>

<span style="color: #b5bd68;">\n* ${title}\n  :PROPERTIES:\n  :Custom_ID: ${=key=}\n  :URL: ${url}\n  :AUTHOR: ${author-or-editor}\n  :NOTER_DOCUMENT: %(orb-process-file-field \"${=key=}\")\n  :NOTER_PAGE: \n  :END:\n\n"</span>

           <span style="color: #81a2be;">:unnarrowed</span> t))))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb08e0bc" class="outline-4">
<h4 id="orgb08e0bc"><span class="section-number-4">5.1.4.</span> Org-Noter</h4>
<div class="outline-text-4" id="text-5-1-4">
<p>
I decided to use <a href="https://github.com/weirdNox/org-noter">org-noter</a> over the more commonly described <a href="https://github.com/rudolfochrist/interleave">interleave</a> because
it has better support for working with multiple documents linked to one file.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> org-noter
  <span style="color: #81a2be;">:after</span> (<span style="color: #81a2be;">:any</span> org pdf-view)
  <span style="color: #81a2be;">:config</span>
  (<span style="color: #b294bb;">setq</span>
   <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">The WM can handle splits</span>
   <span style="color: #cc6666;">org-noter-notes-window-location</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">other-frame</span>
   <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Please stop opening frames</span>
   <span style="color: #cc6666;">org-noter-always-create-frame</span> nil
   <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">I want to see the whole file</span>
   <span style="color: #cc6666;">org-noter-hide-other</span> nil
   <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Everything is relative to the rclone mega</span>
   <span style="color: #cc6666;">org-noter-notes-search-path</span> (<span style="color: #de935f;">list</span> org_notes)
   )
  )
</pre>
</div>

<p>
I have a rather involved setup in mind, so I have spun this section off from the
rest. The basic idea is to use <a href="https://github.com/jrblevin/deft"><code>deft</code></a> for short-to-long lookup notes, and
<code>org-capture</code> templates with <code>org-protocol</code> for the rest. I am also considering
<a href="https://github.com/hasu/notdeft">notdeft</a> since it might work better for what I want to achieve. Though it isn&rsquo;t
really part of a note taking workflow, I also intend to use <a href="https://github.com/anticodeninja/michel2">michel2</a> to sync my
tasks&#x2026;
</p>
</div>
</div>
</div>
<div id="outline-container-orgf1c76fc" class="outline-3">
<h3 id="orgf1c76fc"><span class="section-number-3">5.2.</span> Org Capture</h3>
<div class="outline-text-3" id="text-5-2">
<p>
I am not really sure how to use these correctly, but I have the bare minimum
required for the <a href="https://github.com/sprig/org-capture-extension#set-up-handlers-in-emacs">Firefox browser extension</a> (setup <a href="http://www.mediaonfire.com/blog/2017_07_21_org_protocol_firefox.html">from here</a>), and a random
article thing.
</p>
</div>
<div id="outline-container-orgdefccab" class="outline-4">
<h4 id="orgdefccab"><span class="section-number-4">5.2.1.</span> Buffer Size</h4>
<div class="outline-text-4" id="text-5-2-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #81a2be;">set-popup-rule!</span> <span style="color: #b5bd68;">"^CAPTURE-.*\\.org$"</span> <span style="color: #81a2be;">:size</span> 0.5 <span style="color: #81a2be;">:quit</span> nil <span style="color: #81a2be;">:select</span> t <span style="color: #81a2be;">:autosave</span> t)
</pre>
</div>
</div>
</div>
<div id="outline-container-org05e6212" class="outline-4">
<h4 id="org05e6212"><span class="section-number-4">5.2.2.</span> Functions</h4>
<div class="outline-text-4" id="text-5-2-2">
<p>
These are needed for <code>org-capture</code> alone for now.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Fix some link issues</span>
(<span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">transform-square-brackets-to-round-ones</span>(string-to-transform)
  <span style="color: #717171;">"Transforms [ into ( and ] into ), other chars left unchanged."</span>
  (<span style="color: #de935f;">concat</span>
   (<span style="color: #de935f;">mapcar</span> <span style="color: #c5c8c6;">#'</span>(<span style="color: #b294bb;">lambda</span> (c) (<span style="color: #b294bb;">if</span> (<span style="color: #de935f;">equal</span> c ?\[) ?\( (<span style="color: #b294bb;">if</span> (<span style="color: #de935f;">equal</span> c ?\]) ?\) c))) string-to-transform))
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-org935c56e" class="outline-4">
<h4 id="org935c56e"><span class="section-number-4">5.2.3.</span> Templates</h4>
<div class="outline-text-4" id="text-5-2-3">
<p>
This might get complicated but I am only trying to get the bare minimum for
<code>org-protocol</code> right now. Will look into <a href="https://github.com/abo-abo/orca">orca</a> and <a href="https://github.com/progfolio/doct/">doct</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Actually start using templates</span>
(<span style="color: #b294bb;">after!</span> org-capture
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Firefox</span>
  (<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-capture-templates</span>
               <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"P"</span> <span style="color: #b5bd68;">"Protocol"</span> entry
                 (file+headline <span style="color: #cc6666;">+org-capture-notes-file</span> <span style="color: #b5bd68;">"Inbox"</span>)
                 <span style="color: #b5bd68;">"* %^{Title}\nSource: %u, %c\n #+BEGIN_QUOTE\n%i\n#+END_QUOTE\n\n\n%?"</span>
                 <span style="color: #81a2be;">:prepend</span> t
                 <span style="color: #81a2be;">:kill-buffer</span> t))
  (<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-capture-templates</span>
               <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"L"</span> <span style="color: #b5bd68;">"Protocol Link"</span> entry
                 (file+headline <span style="color: #cc6666;">+org-capture-notes-file</span> <span style="color: #b5bd68;">"Inbox"</span>)
                 <span style="color: #b5bd68;">"* %? [[%:link][%(transform-square-brackets-to-round-ones \"%:description\")]]\n"</span>
                 <span style="color: #81a2be;">:prepend</span> t
                 <span style="color: #81a2be;">:kill-buffer</span> t))
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Misc</span>
  (<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-capture-templates</span>
               <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"a"</span>               <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">key</span>
                 <span style="color: #b5bd68;">"Article"</span>         <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">name</span>
                 entry             <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">type</span>
                 (file+headline <span style="color: #cc6666;">+org-capture-notes-file</span> <span style="color: #b5bd68;">"Article"</span>)  <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">target</span>
                 <span style="color: #b5bd68;">"* %^{Title} %(org-set-tags)  :article: \n:PROPERTIES:\n:Created: %U\n:Linked: %a\n:END:\n%i\nBrief description:\n%?"</span>  <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">template</span>
                 <span style="color: #81a2be;">:prepend</span> t        <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">properties</span>
                 <span style="color: #81a2be;">:empty-lines</span> 1    <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">properties</span>
                 <span style="color: #81a2be;">:created</span> t        <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">properties</span>
                 ))
  )
</pre>
</div>
</div>
<ol class="org-ol">
<li><a id="orgbb82e98"></a>HTML Parsing<br />
<div class="outline-text-5" id="text-5-2-3-1">
<p>
The standard capture method isn&rsquo;t too great, but <a href="https://github.com/alphapapa/org-protocol-capture-html">this</a> makes it better.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">use-package!</span> org-protocol-capture-html
  <span style="color: #81a2be;">:after</span> org-protocol
  <span style="color: #81a2be;">:config</span>
  (<span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-capture-templates</span>
               <span style="color: #c5c8c6;">'</span>(<span style="color: #b5bd68;">"w"</span>
                 <span style="color: #b5bd68;">"Web site"</span>
                 entry
                 (file+headline <span style="color: #cc6666;">+org-capture-notes-file</span> <span style="color: #b5bd68;">"Website"</span>)  <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">target</span>
                 <span style="color: #b5bd68;">"* %a :website:\n\n%U %?\n\n%:initial"</span>)
               )
  )
</pre>
</div>


<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b294bb;">setq</span> org-roam-ref-capture-templates
      <span style="color: #c5c8c6;">'</span>((<span style="color: #b5bd68;">"r"</span> <span style="color: #b5bd68;">"ref"</span> plain (<span style="color: #b294bb;">function</span> org-roam--capture-get-point)
         <span style="color: #b5bd68;">"%?"</span>
         <span style="color: #81a2be;">:file-name</span> <span style="color: #b5bd68;">"websites/${slug}"</span>
         <span style="color: #81a2be;">:head</span> <span style="color: #b5bd68;">"#+SETUPFILE:./hugo_setup.org</span>
<span style="color: #b5bd68;">#+ROAM_KEY: ${ref}</span>
<span style="color: #b5bd68;">#+HUGO_SLUG: ${slug}</span>
<span style="color: #b5bd68;">#+TITLE: ${title}</span>
</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2020:04:09</p>
<p class="author">Author: Rohit Goswami (HaoZeke) &lt;rohit.goswami@aol.com&gt;</p>
<p class="date">Created: 2025-07-27 Sun 02:08</p>
</div>
</body>
</html>
